<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/empowernow_react_app" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">empowernow_react_app | EmpowerNow Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://empowerid.github.io/empowernow_docs/img/empowernow-logo.svg"><meta data-rh="true" name="twitter:image" content="https://empowerid.github.io/empowernow_docs/img/empowernow-logo.svg"><meta data-rh="true" property="og:url" content="https://empowerid.github.io/empowernow_docs/docs/services/empowernow_react_app"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="empowernow_react_app | EmpowerNow Docs"><meta data-rh="true" name="description" content="EmpowerNow React App Specification"><meta data-rh="true" property="og:description" content="EmpowerNow React App Specification"><link data-rh="true" rel="icon" href="/empowernow_docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://empowerid.github.io/empowernow_docs/docs/services/empowernow_react_app"><link data-rh="true" rel="alternate" href="https://empowerid.github.io/empowernow_docs/docs/services/empowernow_react_app" hreflang="en"><link data-rh="true" rel="alternate" href="https://empowerid.github.io/empowernow_docs/docs/services/empowernow_react_app" hreflang="x-default"><link rel="stylesheet" href="/empowernow_docs/assets/css/styles.b212d4ba.css">
<script src="/empowernow_docs/assets/js/runtime~main.b7e4b38b.js" defer="defer"></script>
<script src="/empowernow_docs/assets/js/main.288af713.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/empowernow_docs/img/en-logo-light.png"><link rel="preload" as="image" href="/empowernow_docs/img/en-logo-dark.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/empowernow_docs/"><div class="navbar__logo"><img src="/empowernow_docs/img/en-logo-light.png" alt="EmpowerNow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/empowernow_docs/img/en-logo-dark.png" alt="EmpowerNow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/empowernow_docs/">Home</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/solutions">Solutions</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/products">Products</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/pricing">Pricing</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/trust">Trust</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/resources">Resources</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/company">Company</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/crud-service/explanation/secrets-executive-overview">Secrets Overview</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/bff/explanation/executive-overview">BFF Overview</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/bff/explanation/bff-visual-guide">BFF Visual Guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/empowerID/empowernow_docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>empowernow_react_app</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="empowernow-react-app-specification">EmpowerNow React App Specification<a href="#empowernow-react-app-specification" class="hash-link" aria-label="Direct link to EmpowerNow React App Specification" title="Direct link to EmpowerNow React App Specification">​</a></h2>
<p>This document specifies how EmpowerNow front-end React applications are built, configured, authenticated, deployed, and tested. It is intended for third‑party developers and internal “vibe coders” building new SPAs that conform to our platform standards.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scope">Scope<a href="#scope" class="hash-link" aria-label="Direct link to Scope" title="Direct link to Scope">​</a></h3>
<ul>
<li>IdP (Authentication Studio), PDP (Authorization Studio), and Workflow/Visual Designer SPAs follow the same conventions.</li>
<li>SPAs are static builds served by Nginx and routed via Traefik; all API calls go through the Backend‑for‑Frontend (BFF) service.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a href="#architecture-overview" class="hash-link" aria-label="Direct link to Architecture Overview" title="Direct link to Architecture Overview">​</a></h2>
<ul>
<li><strong>SPA framework</strong>: React 18 + TypeScript 5, bundled with Vite.</li>
<li><strong>Design system</strong>: <code>@empowernow/ui</code> (Neon Flux theme) for consistent components and tokens.</li>
<li><strong>Auth</strong>: <code>@empowernow/bff-auth-react</code> integrates browser auth with the BFF, which implements secure OAuth/OIDC flows.</li>
<li><strong>Data fetching</strong>: TanStack Query v5 for server state; optional Redux Toolkit for UI/app state.</li>
<li><strong>Transport</strong>: All API requests are same‑origin to the BFF under <code>/api/**</code>. Prefer SSE for realtime updates where applicable.</li>
<li><strong>Containerization</strong>: Built artifacts are served by Nginx as static SPAs; Traefik routes static vs API paths; the BFF handles auth/session and proxies service APIs.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-dependencies">Core Dependencies<a href="#core-dependencies" class="hash-link" aria-label="Direct link to Core Dependencies" title="Direct link to Core Dependencies">​</a></h2>
<ul>
<li><strong>Required</strong>
<ul>
<li><code>react</code>, <code>react-dom</code></li>
<li><code>react-router-dom</code> (v7) for routing</li>
<li><code>@empowernow/ui</code> for UI components and Neon Flux design tokens</li>
<li><code>@empowernow/bff-auth-react</code> for auth session + login flows</li>
<li><code>@tanstack/react-query</code> for server state</li>
<li><code>axios</code> for HTTP client (wrapped; see API section)</li>
</ul>
</li>
<li><strong>Common</strong>
<ul>
<li><code>@empowernow/common</code>, <code>@empowernow/react</code></li>
<li><code>antd</code> (select components), <code>monaco-editor</code> (where needed), <code>lucide-react</code></li>
<li><code>zod</code>/<code>ajv</code> for schema validation as needed</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-structure-baseline">Project Structure (baseline)<a href="#project-structure-baseline" class="hash-link" aria-label="Direct link to Project Structure (baseline)" title="Direct link to Project Structure (baseline)">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">frontend/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app/               # App bootstrap (providers, routing)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pages/             # Route components</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    features/          # Feature slices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    components/        # Reusable UI components</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    services/          # API clients, adapters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    store/             # Optional Redux Toolkit store (UI state)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lib/               # Utilities, hooks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public/              # Static assets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  env.local.template   # Vite environment variables template</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  package.json         # Scripts and deps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  nginx-spa.conf       # Nginx SPA fallback config</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-vite-envs">Configuration (Vite envs)<a href="#configuration-vite-envs" class="hash-link" aria-label="Direct link to Configuration (Vite envs)" title="Direct link to Configuration (Vite envs)">​</a></h2>
<p>Define these in <code>env.local</code> (do not commit secrets):</p>
<ul>
<li><code>VITE_OIDC_AUTHORITY</code>: OIDC discovery base (e.g., <code>https://idp.ocg.labs.empowernow.ai/api/oidc</code>)</li>
<li><code>VITE_OIDC_CLIENT_ID</code>: OIDC client id (e.g., <code>spa-client</code>)</li>
<li><code>VITE_OIDC_SCOPE</code>: space‑separated scopes (e.g., <code>openid profile email admin.api</code>)</li>
<li><code>VITE_OIDC_RESOURCE</code> (optional): audience/resource when required by IdP</li>
<li><code>VITE_BFF_BASE_URL</code>: base URL for BFF; leave empty in same‑origin deployments (recommended)</li>
</ul>
<p>Guidelines:</p>
<ul>
<li>Prefer same‑origin deployment where the SPA is hosted under the same domain as the BFF; set <code>VITE_BFF_BASE_URL</code> to empty and use relative <code>/api/**</code>.</li>
<li>Do not embed direct service URLs in the SPA; route everything through the BFF for auth and policy enforcement.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="routing">Routing<a href="#routing" class="hash-link" aria-label="Direct link to Routing" title="Direct link to Routing">​</a></h2>
<ul>
<li>Use <code>react-router-dom</code> v7 with standard SPA client‑side routing.</li>
<li>Nginx serves <code>index.html</code> as a fallback (<code>try_files ... /index.html</code>) to support deep links.</li>
<li>Keep route modules lazy‑loaded where sensible to optimize initial load.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-and-session">Authentication and Session<a href="#authentication-and-session" class="hash-link" aria-label="Direct link to Authentication and Session" title="Direct link to Authentication and Session">​</a></h2>
<ul>
<li>Use <code>@empowernow/bff-auth-react</code> provider at the app root.</li>
<li>Sessions are managed by the BFF (http‑only cookies). The SPA should:<!-- -->
<ul>
<li>Check session via <code>/api/auth/session</code> on load and on focus/visibility changes.</li>
<li>Initiate login via the auth provider; the BFF handles OIDC (FAPI/DPoP/private_key_jwt) and returns a session.</li>
<li>Never store access tokens in local storage; use cookies via same‑origin requests.</li>
</ul>
</li>
</ul>
<p>Minimal wiring example:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> createRoot </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react-dom/client&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BrowserRouter</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react-router-dom&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClientProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@tanstack/react-query&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BffAuthProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/bff-auth-react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./app/App&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> qc </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">QueryClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">createRoot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getElementById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;root&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">render</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">BffAuthProvider</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">QueryClientProvider</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">client</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">qc</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">BrowserRouter</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">App</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">BrowserRouter</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">QueryClientProvider</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">BffAuthProvider</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-access-pattern">API Access Pattern<a href="#api-access-pattern" class="hash-link" aria-label="Direct link to API Access Pattern" title="Direct link to API Access Pattern">​</a></h2>
<ul>
<li>All requests are relative to the BFF under <code>/api/**</code>.</li>
<li>Use a shared Axios instance configured for same‑origin credentials and error handling.</li>
<li>Use TanStack Query for fetching/caching/invalidation; colocate queries with features.</li>
<li>Prefer Server‑Sent Events (SSE) for realtime updates where supported (e.g., <code>/events/**</code>).</li>
</ul>
<p>Axios instance:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;axios&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> api </span><span class="token operator">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  baseURL</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">VITE_BFF_BASE_URL</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/api&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  withCredentials</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  headers</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token string-property property">&#x27;X-Requested-With&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;spa&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<p>React Query usage:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useQuery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  queryKey</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;users&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">queryFn</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/users&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> params</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> page </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r </span><span class="token operator">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<p>SSE helper (example):</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onMessage</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">data</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">VITE_BFF_BASE_URL</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> es </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">EventSource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> withCredentials</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  es</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onmessage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">JSON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> es</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">close</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-system--theming">Design System &amp; Theming<a href="#design-system--theming" class="hash-link" aria-label="Direct link to Design System &amp; Theming" title="Direct link to Design System &amp; Theming">​</a></h2>
<ul>
<li>Use <code>@empowernow/ui</code> components and tokens to align with the Neon Flux design system.</li>
<li>Import global CSS once at app root:</li>
</ul>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/ui/dist/index.css&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<ul>
<li>Avoid bespoke styling; extend via component tokens/props.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/DESIGN_SYSTEM.md" target="_blank" rel="noopener noreferrer">Design System (tokens, patterns, Monaco)</a></li>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/DESIGN_SYSTEM_CHECKLIST.md" target="_blank" rel="noopener noreferrer">Design System Compliance Checklist</a></li>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/vibe-coding-strategy.md" target="_blank" rel="noopener noreferrer">Vibe Coding Strategy</a></li>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/QUICK_START.md" target="_blank" rel="noopener noreferrer">UI Quick Start</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="critical-ui-pattern-tile-grid-dodont">Critical UI Pattern: Tile Grid (Do/Don&#x27;t)<a href="#critical-ui-pattern-tile-grid-dodont" class="hash-link" aria-label="Direct link to Critical UI Pattern: Tile Grid (Do/Don&#x27;t)" title="Direct link to Critical UI Pattern: Tile Grid (Do/Don&#x27;t)">​</a></h3>
<p>Use the standardized tile grid and glass card patterns. Do NOT use Ant Design List for card grids.</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// ❌ WRONG - Ant Design List grid breaks glass-card styling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">List</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;antd&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">List</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">grid</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> gutter</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript number" style="color:rgb(255, 121, 198)">16</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> column</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript number" style="color:rgb(255, 121, 198)">3</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">dataSource</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">items</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">renderItem</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript arrow operator" style="color:rgb(255, 121, 198)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">    </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:rgb(255, 121, 198)">List.Item</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token tag script language-javascript plain-text" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag script language-javascript plain-text" style="color:rgb(255, 121, 198)">      </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:rgb(255, 121, 198)">Card</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token tag script language-javascript property-access" style="color:rgb(255, 121, 198)">content</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:rgb(255, 121, 198)">Card</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token tag script language-javascript plain-text" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag script language-javascript plain-text" style="color:rgb(255, 121, 198)">    </span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:rgb(255, 121, 198)">List.Item</span><span class="token tag script language-javascript tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">  </span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// ✅ CORRECT - Use tile-grid + TileCard (from @empowernow/ui)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">TileCard</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/ui&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">className</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">tile-grid</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">item </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">TileCard</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">item</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token tag script language-javascript property-access" style="color:rgb(255, 121, 198)">id</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">className</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">glass-card</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">TileCard</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">&gt;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="local-development">Local Development<a href="#local-development" class="hash-link" aria-label="Direct link to Local Development" title="Direct link to Local Development">​</a></h2>
<ul>
<li>Scripts (typical):<!-- -->
<ul>
<li><code>npm run dev</code> – start Vite dev server</li>
<li><code>npm run build</code> – type‑check + build</li>
<li><code>npm run test</code> – unit tests (Vitest + jsdom)</li>
<li><code>npm run test:e2e</code> – Playwright E2E</li>
</ul>
</li>
<li>Create <code>env.local</code> from <code>env.local.template</code> and set VITE_* values.</li>
<li>When running the full stack locally, use the shared docker‑compose files provided in <code>CRUDService/</code> if needed.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-standards">Testing Standards<a href="#testing-standards" class="hash-link" aria-label="Direct link to Testing Standards" title="Direct link to Testing Standards">​</a></h2>
<ul>
<li><strong>Unit</strong>: Vitest + Testing Library for component and hook tests.</li>
<li><strong>E2E</strong>: Playwright tests run against the built SPA + BFF; headless in CI, headed locally as needed.</li>
<li>Keep happy‑path auth/login flows covered. Validate <code>/api/auth/session</code> handling and protected route access.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-deployment">Build and Deployment<a href="#build-and-deployment" class="hash-link" aria-label="Direct link to Build and Deployment" title="Direct link to Build and Deployment">​</a></h2>
<ol>
<li><strong>Build</strong> with Vite to <code>dist/</code>.</li>
<li><strong>Containerize</strong> with Nginx serving the built assets and SPA fallback. Use the canonical Nginx config:</li>
</ol>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  listen 80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  root /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  index index.html;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  location / { try_files $uri $uri/ /index.html; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  location ~* \.(?:css|js|png|jpg|jpeg|gif|svg|woff2?)$ {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    try_files $uri =404;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    expires 30d;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    access_log off;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre></div></div>
<ol start="3">
<li><strong>Route</strong> via Traefik:</li>
</ol>
<ul>
<li>Static content on host routers; exclude <code>/api/</code>, <code>/auth/</code>, and known streaming endpoints from SPA router rules.</li>
<li>Example (compose label rule): <code>Host(&quot;authz.ocg.labs.empowernow.ai&quot;) &amp;&amp; !PathPrefix(&quot;/api/&quot;) &amp;&amp; !PathPrefix(&quot;/auth/&quot;)</code></li>
</ul>
<ol start="4">
<li><strong>BFF Integration</strong>:</li>
</ol>
<ul>
<li>BFF handles <code>/api/**</code> routes, auth flows, and session verification. Keep same‑origin when possible so cookies flow correctly.</li>
</ul>
<p>Multi‑stage builds</p>
<ul>
<li>Our canonical build uses a multi‑stage Dockerfile that builds each SPA with Node, then copies <code>dist/</code> into lightweight <code>nginx:alpine</code> images per app.</li>
<li>Compose targets produce <code>idp-ui</code>, <code>authz-ui</code>, and <code>workflow-ui</code> static containers, each with SPA fallback enabled.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-guidelines">Security Guidelines<a href="#security-guidelines" class="hash-link" aria-label="Direct link to Security Guidelines" title="Direct link to Security Guidelines">​</a></h2>
<ul>
<li>Do not bypass the BFF; avoid direct service URLs.</li>
<li>Do not store tokens in local/session storage; rely on http‑only cookies.</li>
<li>Use same‑origin requests where possible; set <code>withCredentials: true</code>.</li>
<li>Respect CSP; keep inline scripts/styles minimal and hashed when required.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessibility--performance">Accessibility &amp; Performance<a href="#accessibility--performance" class="hash-link" aria-label="Direct link to Accessibility &amp; Performance" title="Direct link to Accessibility &amp; Performance">​</a></h2>
<ul>
<li>Follow WCAG best practices; use semantic HTML and ARIA where appropriate.</li>
<li>Code‑split large routes/features; cache immutable assets aggressively (hashed filenames).</li>
<li>Keep bundle size in check; prefer composable UI over one‑off heavy widgets.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-app">Creating a New App<a href="#creating-a-new-app" class="hash-link" aria-label="Direct link to Creating a New App" title="Direct link to Creating a New App">​</a></h2>
<ul>
<li>Use the <code>@empowernow/ui</code> starter or CLI to scaffold consistent structure and theming.</li>
<li>Wire <code>@empowernow/bff-auth-react</code>, React Query provider, and Router in <code>main.tsx</code>.</li>
<li>Add an Axios instance under <code>services/api.ts</code> and feature‑scoped query hooks.</li>
<li>Configure VITE_* envs; validate <code>/api/auth/session</code> flow early.</li>
</ul>
<p>Helpful references:</p>
<ul>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/QUICK_START.md" target="_blank" rel="noopener noreferrer">UI Quick Start</a></li>
<li><a href="https://github.com/empowernow/client_sdk/blob/main/empowernow-packages/packages/empowernow-ui/docs/vibe-coding-strategy.md" target="_blank" rel="noopener noreferrer">Vibe Coding Strategy</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="empowernow-experience-app-enduser-interface">EmpowerNow Experience App (End‑User Interface)<a href="#empowernow-experience-app-enduser-interface" class="hash-link" aria-label="Direct link to EmpowerNow Experience App (End‑User Interface)" title="Direct link to EmpowerNow Experience App (End‑User Interface)">​</a></h3>
<p>The Experience app is the end‑user portal for the EmpowerNow Identity Fabric Suite. It must support customers running any subset of services (IdP, PDP, Workflow, CRUD, etc.). The UI enables or disables modules dynamically and calls all backends strictly through the BFF.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="modular-feature-activation">Modular Feature Activation<a href="#modular-feature-activation" class="hash-link" aria-label="Direct link to Modular Feature Activation" title="Direct link to Modular Feature Activation">​</a></h4>
<ul>
<li>Source of truth: a BFF‑served UI config document.<!-- -->
<ul>
<li>Recommended endpoint: <code>/api/configs/ui</code> (JSON) with an SSE stream at <code>/api/configs/stream</code> for live updates.</li>
<li>Example payload:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;modules&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;idp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;pdp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;workflow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;crud&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li>Build‑time fallback (optional): <code>VITE_EXPERIENCE_MODULES=idp,pdp,workflow,crud</code> used only if the runtime config is unavailable.</li>
<li>UI behavior:<!-- -->
<ul>
<li>Hide navigation and routes for disabled modules.</li>
<li>Guard deep links (redirect to home if module disabled).</li>
<li>Prefer runtime config over build‑time flags when both exist.</li>
</ul>
</li>
</ul>
<p>Minimal config hook:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> useQuery </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@tanstack/react-query&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useUiConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useQuery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    queryKey</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ui-config&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">queryFn</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/api/configs/ui&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> credentials</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;include&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r </span><span class="token operator">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    staleTime</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">60_000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p>Optional SSE subscription for live updates:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> useEffect </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> subscribe </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;../services/sse&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// wrapper from this guide</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useUiConfigStream</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onUpdate</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cfg</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">useEffect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/configs/stream&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> onUpdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">onUpdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unified-multiservice-api-layer">Unified Multi‑Service API Layer<a href="#unified-multiservice-api-layer" class="hash-link" aria-label="Direct link to Unified Multi‑Service API Layer" title="Direct link to Unified Multi‑Service API Layer">​</a></h4>
<p>Implement a single <code>@api</code> module modeled after Visual Designer’s SDK‑backed client. Each service uses a canonical prefix routed by the BFF: <code>/idp/**</code>, <code>/pdp/**</code>, <code>/crud/**</code>, <code>/workflow/**</code>, etc.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/services/api.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> apiClient </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/bff-auth-react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex anchor function" style="color:rgb(80, 250, 123)">^</span><span class="token regex regex-source language-regex escape">\/</span><span class="token regex regex-source language-regex">api</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> api </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">get</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">post</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">put</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">put</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">patch</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">patch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">delete</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">delete</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripApi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Namespaced helpers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> idpApi </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">getProfile</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/idp/profile&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...other IdP endpoints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> pdpApi </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">listPolicies</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/pdp/policies&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...other PDP endpoints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> workflowApi </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">listWorkflows</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/workflow/workflows&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> crudApi </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">listEntities</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">t</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">/crud/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">t</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<p>Guidelines:</p>
<ul>
<li>Always use BFF‑relative paths; never call services directly.</li>
<li>Keep each service in its own file and re‑export via an <code>@api/index.ts</code> barrel.</li>
<li>Provide typed helpers per feature area; colocate React Query hooks with features.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-navigation--routing">Dynamic Navigation &amp; Routing<a href="#dynamic-navigation--routing" class="hash-link" aria-label="Direct link to Dynamic Navigation &amp; Routing" title="Direct link to Dynamic Navigation &amp; Routing">​</a></h4>
<ul>
<li>Build the menu and routes from the active modules list.</li>
<li>Lazy‑load module routes to minimize initial bundle size.</li>
</ul>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Pseudocode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> routes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">idp</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/idp&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> element</span><span class="token operator">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">IdpRoutes</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">pdp</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/pdp&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> element</span><span class="token operator">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">PdpRoutes</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">workflow</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/workflow&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> element</span><span class="token operator">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">WorkflowRoutes</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">crud</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/data&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> element</span><span class="token operator">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">CrudRoutes</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="events--realtime">Events &amp; Realtime<a href="#events--realtime" class="hash-link" aria-label="Direct link to Events &amp; Realtime" title="Direct link to Events &amp; Realtime">​</a></h4>
<ul>
<li>Prefer SSE for user notifications and job/task progress per module:<!-- -->
<ul>
<li><code>/events/idp</code>, <code>/events/pdp</code>, <code>/events/workflow</code>, etc.</li>
</ul>
</li>
<li>Use a single SSE helper to subscribe/unsubscribe; namespace by module.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker--traefik-experience-spa">Docker &amp; Traefik (Experience SPA)<a href="#docker--traefik-experience-spa" class="hash-link" aria-label="Direct link to Docker &amp; Traefik (Experience SPA)" title="Direct link to Docker &amp; Traefik (Experience SPA)">​</a></h4>
<ul>
<li>Build args (compose): <code>VITE_BFF_BASE_URL</code>, <code>VITE_OIDC_*</code>, <code>VITE_EXPERIENCE_MODULES</code> (optional).</li>
<li>Traefik router for the Experience host should exclude all API/auth/stream routes from the SPA router rule, similar to Workflow UI:<!-- -->
<ul>
<li>Example rule: <code>Host(&quot;experience.ocg.labs.empowernow.ai&quot;) &amp;&amp; !PathPrefix(&quot;/api/&quot;) &amp;&amp; !PathPrefix(&quot;/auth/&quot;) &amp;&amp; !PathPrefix(&quot;/events/&quot;) &amp;&amp; !PathPrefix(&quot;/configs/stream&quot;) &amp;&amp; !PathPrefix(&quot;/stream/&quot;) &amp;&amp; !PathPrefix(&quot;/access/v1/&quot;) &amp;&amp; !PathPrefix(&quot;/health&quot;)</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard--widgets">Dashboard &amp; Widgets<a href="#dashboard--widgets" class="hash-link" aria-label="Direct link to Dashboard &amp; Widgets" title="Direct link to Dashboard &amp; Widgets">​</a></h3>
<ul>
<li>Landing page is a PDP‑aware dashboard composed of widgets.</li>
<li>Each widget declares <code>{ resource, action }</code> and is rendered only if <code>useAuthorization(resource, action)</code> allows.</li>
<li>Users will be able to add/remove/reorder widgets (future); default set includes:<!-- -->
<ul>
<li>Tasks Summary (reads <code>/api/crud/tasks/summary</code>)</li>
<li>Workflow Shortcuts (invokes predefined workflows)</li>
<li>Recently Completed (reads <code>/api/crud/tasks?status=COMPLETED&amp;limit=...</code>)</li>
</ul>
</li>
<li>Navigation menu must be PDP‑driven: only pages for which the user is authorized should be listed.</li>
</ul>
<p>Reference components to embed from Visual Designer:</p>
<ul>
<li><code>Visualizer/ExecutionView.tsx</code>: render workflow execution diagrams (mermaid) and raw JSON results.</li>
<li><code>VisualDesigner/WorkflowExecutor.tsx</code>: modal to execute workflows, monitor progress via SSE <code>/api/crud/events/workflow/status/{id}</code>, resume with forms.</li>
</ul>
<p>Embedding guidance:</p>
<ul>
<li>Wrap embedded components with Experience providers (Auth, React Query).</li>
<li>Calls must remain BFF‑relative; do not port any direct service URLs.</li>
<li>Use the Experience <code>AuthZProvider</code> and <code>useAuthorization</code> to guard access to runner actions.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enduser-tasks--approvals-experience">End‑User Tasks &amp; Approvals (Experience)<a href="#enduser-tasks--approvals-experience" class="hash-link" aria-label="Direct link to End‑User Tasks &amp; Approvals (Experience)" title="Direct link to End‑User Tasks &amp; Approvals (Experience)">​</a></h3>
<p>The Experience app provides a unified end‑user surface for Tasks/To‑Dos and approval requests sourced from the CRUD service via the BFF.</p>
<ul>
<li>
<p>Canonical endpoints (via BFF):</p>
<ul>
<li><code>GET /api/crud/tasks</code> – list, with filters: <code>status</code>, <code>type</code>, <code>search</code>, <code>limit</code>, <code>offset</code></li>
<li><code>GET /api/crud/tasks/summary</code> – counters for dashboard</li>
<li><code>GET /api/crud/tasks/{id}</code> – task details</li>
<li><code>POST /api/crud/tasks/{id}/complete</code> – complete/approve/reject</li>
</ul>
</li>
<li>
<p>Reference API (Visual Designer):</p>
</li>
</ul>
<div class="language-29:36:visual_designer/visual_designer/frontend/src/core/api/tasks.ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-29:36:visual_designer/visual_designer/frontend/src/core/api/tasks.ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export async function listTasks(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  params?: TaskQueryParams,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  settings?: AppSettings</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">): Promise&lt;TaskListResponse&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const qs = buildQuery(params as Record&lt;string, unknown&gt;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const path = qs ? `/api/crud/tasks?${qs}` : &#x27;/api/crud/tasks&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return fetchWithAuth(path, { method: &#x27;GET&#x27; }, settings) as Promise&lt;TaskListResponse&gt;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-68:71:visual_designer/visual_designer/frontend/src/core/api/tasks.ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-68:71:visual_designer/visual_designer/frontend/src/core/api/tasks.ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export async function getTaskSummary(settings?: AppSettings): Promise&lt;TaskSummaryCounters&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  logger.debug(&#x27;Fetching task summary counters&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return fetchWithAuth(&#x27;/api/crud/tasks/summary&#x27;, { method: &#x27;GET&#x27; }, settings) as Promise&lt;TaskSummaryCounters&gt;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre></div></div>
<ul>
<li>Reference Page (Visual Designer):</li>
</ul>
<div class="language-130:186:visual_designer/visual_designer/frontend/src/pages/TasksPage.tsx language-130:186:visual_designer/visual_designer/frontend/src/pages/taskspage.tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-130:186:visual_designer/visual_designer/frontend/src/pages/taskspage.tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">return (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;div style={{ background: &#x27;#0b1c3d&#x27;, padding: 16 }}&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;Space style={{ marginBottom: 16 }} wrap&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;Tooltip title=&quot;Refresh&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={fetchData} loading={loading} /&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;/Tooltip&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/Space&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {loading ? (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;Spin /&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ) : (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;Table</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        rowKey=&quot;id&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        dataSource={tasks}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        columns={columns}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        size=&quot;small&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        pagination={{ pageSize: PAGE_SIZE, current: page, total, onChange: (p) =&gt; setPage(p) }}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      /&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre></div></div>
<ul>
<li>Experience should mirror this API shape and UI patterns using <code>@empowernow/ui</code> components; page lives under <code>/tasks</code> and requires session + authorization (see PDP protection below).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-protection-via-openid-authzen-pdp">Page Protection via OpenID AuthZEN PDP<a href="#page-protection-via-openid-authzen-pdp" class="hash-link" aria-label="Direct link to Page Protection via OpenID AuthZEN PDP" title="Direct link to Page Protection via OpenID AuthZEN PDP">​</a></h3>
<p>All pages must enforce authorization using the OpenID AuthZEN PDP through the BFF. The SPA must not call PDP directly; use BFF endpoints:</p>
<ul>
<li><code>POST /access/v1/evaluation</code> – single decision</li>
<li><code>POST /access/v1/evaluations</code> – batch decisions</li>
</ul>
<p>Reference (Visual Designer):</p>
<div class="language-1:12:visual_designer/visual_designer/frontend/src/core/auth/authz-context.tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-1:12:visual_designer/visual_designer/frontend/src/core/auth/authz-context.tsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import React, { createContext, useContext } from &#x27;react&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">const AuthZContext = createContext&lt;PDPStrategy | null&gt;(null);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre></div></div>
<div class="language-58:66:visual_designer/visual_designer/frontend/src/core/auth/authz-hooks.ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-58:66:visual_designer/visual_designer/frontend/src/core/auth/authz-hooks.ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const response = await fetch(`/access/v1/evaluation`, {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  method: &#x27;POST&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  headers: { &#x27;Content-Type&#x27;: &#x27;application/json&#x27;, ...(token ? { Authorization: `Bearer ${token}` } : {}) },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  body: JSON.stringify({ resource: { type: res }, action: { name: act }, context: {} }),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  credentials: &#x27;include&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span></code></pre></div></div>
<div class="language-44:55:visual_designer/visual_designer/frontend/src/core/auth/authz-strategy.ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-44:55:visual_designer/visual_designer/frontend/src/core/auth/authz-strategy.ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const { data } = await axios.post(&#x27;/access/v1/evaluation&#x27;, {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  resource: { type: request.resourceType, id: request.resourceId, properties: request.context?.resourceAttributes || {} },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  action: { name: request.action },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  context: request.context,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}, { withCredentials: true });</span><br></span></code></pre></div></div>
<p>Implementation guidance:</p>
<ul>
<li>Provide an <code>AuthZProvider</code> and a <code>useAuthorization()</code> hook to gate routes and actions.</li>
<li>For pages, evaluate coarse permissions on route load; for action buttons (e.g., Approve), evaluate fine‑grained permissions per item.</li>
<li>Fail closed on PDP errors; surface a helpful message and disable restricted actions.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handover-notes-experience-app-integration">Handover Notes: Experience App Integration<a href="#handover-notes-experience-app-integration" class="hash-link" aria-label="Direct link to Handover Notes: Experience App Integration" title="Direct link to Handover Notes: Experience App Integration">​</a></h2>
<p>These are the concrete infra/config steps required to run the Experience SPA in the platform. Use this as the completion checklist for the downstream team.</p>
<ul>
<li>
<p>Experience SPA container</p>
<ul>
<li>Build from <code>experience/frontend/Dockerfile</code>.</li>
<li>Serve with <code>nginx-spa.conf</code> router fallback.</li>
<li>Compose service should include Traefik labels with SPA rule and security headers middleware reference:<!-- -->
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># labels (example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.enable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.http.routers.experience-ui.rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Host(`experience.ocg.labs.empowernow.ai`) </span><span class="token important">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/api/`) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/auth/`) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/events/`) </span><span class="token important">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/configs/stream`) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/stream/`) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/access/v1/`) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!PathPrefix(</span><span class="token plain">`/health`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.http.routers.experience-ui.entrypoints</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> websecure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.http.routers.experience-ui.tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.http.routers.experience-ui.middlewares</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> security</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">headers@file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">traefik.http.services.experience-ui.loadbalancer.server.port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;80&quot;</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li>
<p>BFF Traefik routers (on the BFF service) for the Experience host</p>
<ul>
<li>Intercept Experience host API and streaming paths so they reach the BFF before the SPA router:<!-- -->
<ul>
<li>Streaming: rule on <code>Host(experience…) &amp;&amp; PathPrefix(/events/|/configs/stream|/stream/|/test/events)</code> → service <code>api</code></li>
<li>API/auth: rule on <code>Host(experience…) &amp;&amp; (PathPrefix(/api/|/access/v1/|/auth/))</code> → service <code>api</code></li>
</ul>
</li>
<li>Use <code>security-headers@file</code> middleware, set priority ≥95 as in other SPAs.</li>
</ul>
</li>
<li>
<p>BFF configuration updates (ServiceConfigs)</p>
<ul>
<li><code>routes.yaml</code>: add internal endpoints for Experience runtime UI config<!-- -->
<ul>
<li><code>GET /api/configs/ui</code> (session‑protected)</li>
<li><code>GET /api/configs/stream</code> (SSE, session‑protected)</li>
</ul>
</li>
<li><code>settings.yaml</code>: add Experience domain to <code>cors.allow_origins</code> and localhost <code>5177</code> to <code>dev_origins</code>.</li>
</ul>
</li>
<li>
<p>IdP configuration updates (ServiceConfigs)</p>
<ul>
<li><code>settings.yaml</code>: add <code>experience.ocg.labs.empowernow.ai</code> to <code>trusted_hosts</code> and <code>cors_origins</code>; add <code>localhost:5177</code> for local dev.</li>
<li><code>clients.yaml</code> (SPA client): append Experience URIs:<!-- -->
<ul>
<li><code>redirect_uris</code>: <code>https://experience.ocg.labs.empowernow.ai/callback</code>, <code>http://localhost:5177/callback</code></li>
<li><code>post_logout_redirect_uris</code>: <code>https://experience.ocg.labs.empowernow.ai</code>, <code>http://localhost:5177</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>BFF environment (compose) updates</p>
<ul>
<li>Add Experience domain to:<!-- -->
<ul>
<li><code>ALLOWED_REDIRECT_ORIGINS</code></li>
<li><code>ALLOWED_FRONTEND_ORIGINS</code> (also include <code>http://localhost:5177</code>)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Experience app routes &amp; modules</p>
<ul>
<li>Route: <code>/tasks</code> (Tasks &amp; Approvals page). Requires session and authorization.</li>
<li>Feature toggling: driven by <code>/api/configs/ui</code> with SSE at <code>/api/configs/stream</code>; fallback to <code>VITE_EXPERIENCE_MODULES</code>.</li>
</ul>
</li>
<li>
<p>Local development</p>
<ul>
<li>Bind hosts entry for <code>experience.ocg.labs.empowernow.ai</code> to the gateway IP used by Traefik.</li>
<li>Use <code>npm run dev</code> on port <code>5177</code> if testing without containers; set <code>VITE_BFF_BASE_URL</code> appropriately.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="readiness-checklist">Readiness Checklist<a href="#readiness-checklist" class="hash-link" aria-label="Direct link to Readiness Checklist" title="Direct link to Readiness Checklist">​</a></h2>
<ul>
<li>Uses <code>@empowernow/ui</code> components and Neon Flux theme CSS.</li>
<li>Auth wired via <code>@empowernow/bff-auth-react</code>; session check on load and protected routes.</li>
<li>All API calls are to the BFF (<code>/api/**</code>), with credentials enabled.</li>
<li>React Query used for server state; optional Redux Toolkit only for UI/app state.</li>
<li>Env config documented and applied via Vite.</li>
<li>Nginx SPA fallback in container; Traefik routes exclude <code>/api/</code> and <code>/auth/</code>.</li>
<li>Unit tests (Vitest) and E2E tests (Playwright) pass locally.</li>
<li>No direct service URLs or secrets in the client bundle.</li>
<li>CSS import uses <code>@empowernow/ui/dist/index.css</code> at the app root.</li>
<li>Tile grid uses <code>.tile-grid</code> + <code>TileCard</code>; Ant Design List grid is not used for cards.</li>
<li>Passed visual QA against the Design System Compliance Checklist.</li>
</ul>
<p>Quick code checks (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Non-standard opacity levels for deep space blue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;rgba(11, 28, 61, 0\.[^8]&quot;</span><span class="token plain"> src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Custom toolbar/header backgrounds (should use .glass-header)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;background.*rgba.*28.*61&quot;</span><span class="token plain"> src/ </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-v</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;glass-header&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Raw Monaco usage (should use EmpowerNowMonacoEditor)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;from.*monaco-editor&quot;</span><span class="token plain"> src/ </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-v</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;type&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 🚨 Ant Design List card grid anti-pattern</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;List.*grid&quot;</span><span class="token plain"> src/ </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-v</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;// Correct pattern&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-principles">Core principles<a href="#core-principles" class="hash-link" aria-label="Direct link to Core principles" title="Direct link to Core principles">​</a></h3>
<ul>
<li><strong>End-user first</strong>: fast, simple, predictable. Designer UI never bleeds into runtime.</li>
<li><strong>BFF-only transport</strong>: no tokens in the browser, cookie session via <code>/auth/session</code>.</li>
<li><strong>PDP everywhere</strong>: routes, nav, widgets, actions, and row-level affordances all PDP-gated.</li>
<li><strong>Live UX</strong>: SSE for task counters, workflow status, page widget refreshes.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="information-architecture">Information architecture<a href="#information-architecture" class="hash-link" aria-label="Direct link to Information architecture" title="Direct link to Information architecture">​</a></h3>
<ul>
<li><strong>Home/Dashboard</strong>: PDP-gated widgets (My Tasks, Recent Workflows, Favorites, Announcements). Drag–drop layout, per-user saved layouts. Live counters via SSE.</li>
<li><strong>Pages</strong>:<!-- -->
<ul>
<li>List of available pages (PDP-filtered) with search/favorites/recent.</li>
<li>Page Runner renders <code>PageConfig</code> with: grid(s), search bar, action dock, form modals, empty/error states.</li>
<li>Contextual actions enabled only when rows selected and PDP allows.</li>
</ul>
</li>
<li><strong>Workflows</strong>:<!-- -->
<ul>
<li>Launchpad (search/favorites/recent).</li>
<li>Workflow Runner: start (inputs/form), live status via SSE, visualization (compact), resume/cancel, result panel.</li>
</ul>
</li>
<li><strong>Tasks</strong>:<!-- -->
<ul>
<li>Inbox: tabs (All, Assigned to me, Awaiting my approval, Overdue). Filters, bulk actions (if PDP allows), SLA cues.</li>
<li>Task Detail: summary, form/resume panel, history/audit, related items.</li>
</ul>
</li>
<li><strong>Activity</strong>: recent runs, pages viewed, exported reports (optional).</li>
<li><strong>Profile</strong>: preferences (theme, language, time zone), notification settings.</li>
<li><strong>Help</strong>: quick tips, keyboard shortcuts.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authorization-model-pdp">Authorization model (PDP)<a href="#authorization-model-pdp" class="hash-link" aria-label="Direct link to Authorization model (PDP)" title="Direct link to Authorization model (PDP)">​</a></h3>
<ul>
<li><strong>Multi-level gating</strong>:<!-- -->
<ul>
<li>Route-level: protect <code>/pages</code>, <code>/workflows</code>, <code>/tasks</code>.</li>
<li>Nav/menu: <code>useAuthorization</code> for link visibility and disabled states.</li>
<li>Widget/action-level: PDP checks on button render and on click (defense in depth).</li>
<li>Row-level: action availability per row (batch PDP with cache).</li>
</ul>
</li>
<li><strong>Caching</strong>: short-lived PDP cache with TTL and max size; batch endpoints for lists.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data--realtime">Data + realtime<a href="#data--realtime" class="hash-link" aria-label="Direct link to Data + realtime" title="Direct link to Data + realtime">​</a></h3>
<ul>
<li><strong>API</strong>: unified <code>api.ts</code> (namespaces: pages, workflows, tasks, crud, pdp).</li>
<li><strong>SSE</strong>: channels for <code>tasks/summary</code>, <code>workflow/status/:id</code>, <code>configs/stream</code>.</li>
<li><strong>Query</strong>: TanStack Query for caching, background refresh, stale-while-revalidate. Optimistic task completes where safe (quick undo).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authnsession">Authn/session<a href="#authnsession" class="hash-link" aria-label="Direct link to Authn/session" title="Direct link to Authn/session">​</a></h3>
<ul>
<li><strong>Guard</strong>: session-driven guard that hits <code>/auth/session</code>; allow <code>/auth/*</code> and <code>/login</code>.</li>
<li><strong>Callback</strong>: <code>/auth/callback</code> polls session then navigates to <code>return_to</code>.</li>
<li><strong>Session UX</strong>: idle timeout prompts, cross-tab sync via BroadcastChannel, graceful re-auth.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-page-runner-distinct-from-designer">Runtime Page Runner (distinct from Designer)<a href="#runtime-page-runner-distinct-from-designer" class="hash-link" aria-label="Direct link to Runtime Page Runner (distinct from Designer)" title="Direct link to Runtime Page Runner (distinct from Designer)">​</a></h3>
<ul>
<li><strong>Renderer</strong>: small, production-only renderer that:<!-- -->
<ul>
<li>Handles multiple grids, simple search (plus advanced when present), pagination.</li>
<li>Action dock (general + contextual), form modals (schema-driven).</li>
<li>Minimal mermaid/visualization only in Workflow result panel; no canvas editing.</li>
</ul>
</li>
<li><strong>Empty/error</strong>: gentle messages; retry buttons; PDP nudges when denied.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tasks-center">Tasks center<a href="#tasks-center" class="hash-link" aria-label="Direct link to Tasks center" title="Direct link to Tasks center">​</a></h3>
<ul>
<li><strong>Inbox UX</strong>: keyboard nav, bulk select, quick filters (Overdue, High Priority, My queue).</li>
<li><strong>Detail</strong>: approve/complete with form; show upstream workflow breadcrumbs; audit trail.</li>
<li><strong>Counters</strong>: SSE-driven; low-frequency background revalidate.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-runner">Workflow runner<a href="#workflow-runner" class="hash-link" aria-label="Direct link to Workflow runner" title="Direct link to Workflow runner">​</a></h3>
<ul>
<li><strong>Start</strong>: by name or ID (resolve name); optional quick-launch presets.</li>
<li><strong>Status</strong>: SSE tags RUNNING/COMPLETED/FAILED; result panel; compact diagram (optional).</li>
<li><strong>Resume</strong>: WAITING_FOR_INPUT form; PDP check before show.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="navigation--personalization">Navigation &amp; personalization<a href="#navigation--personalization" class="hash-link" aria-label="Direct link to Navigation &amp; personalization" title="Direct link to Navigation &amp; personalization">​</a></h3>
<ul>
<li><strong>Nav</strong>: built from BFF <code>/api/configs/ui</code> + PDP; favorites drawer; recent list.</li>
<li><strong>Personalization</strong>: pinned pages/workflows; saved filters; per-user dashboard layout.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-functional">Non-functional<a href="#non-functional" class="hash-link" aria-label="Direct link to Non-functional" title="Direct link to Non-functional">​</a></h3>
<ul>
<li><strong>Design system</strong>: Neon Flux only; responsive; WCAG AA.</li>
<li><strong>Perf</strong>: code-split per route; prefetch hover; debounce search; SSR not required.</li>
<li><strong>Telemetry</strong>: page views, action clicks, errors to BFF → Kafka; correlation-id propagation.</li>
<li><strong>Security</strong>: CSP locked, httpOnly cookies, no localStorage secrets, strict SameSite/Domain.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-delta-short">Implementation delta (short)<a href="#implementation-delta-short" class="hash-link" aria-label="Direct link to Implementation delta (short)" title="Direct link to Implementation delta (short)">​</a></h3>
<ul>
<li><strong>Finish auth flow</strong>: ensure <code>/auth/login</code> → IdP → <code>/auth/callback</code> → <code>/auth/session</code> true.</li>
<li><strong>Tasks</strong>: switch <code>TasksPage</code> to <code>tasksApi</code>, add PDP gating, counters via SSE.</li>
<li><strong>Pages</strong>: replace placeholders with <code>PreviewMode</code> renderer (we added minimal); wire forms/actions progressively.</li>
<li><strong>Workflows</strong>: keep SSE status + <code>ExecutionView</code>; add resume/cancel endpoints.</li>
<li><strong>Nav gating</strong>: already added; extend to route protection wrappers.</li>
<li><strong>Batch PDP</strong>: add <code>batchAuthorize</code> calls for lists.</li>
<li><strong>Tests</strong>: Playwright flows (login, pages list/run, workflow start/status, task approve).</li>
</ul>
<p>If you want, I’ll implement the tasks page wiring (use <code>tasksApi</code>, SSE counters, PDP gating) and add route-level PDP guards next, then run the e2e smoke.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/empowernow_react_app.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#empowernow-react-app-specification" class="table-of-contents__link toc-highlight">EmpowerNow React App Specification</a><ul><li><a href="#scope" class="table-of-contents__link toc-highlight">Scope</a></li></ul></li><li><a href="#architecture-overview" class="table-of-contents__link toc-highlight">Architecture Overview</a></li><li><a href="#core-dependencies" class="table-of-contents__link toc-highlight">Core Dependencies</a></li><li><a href="#project-structure-baseline" class="table-of-contents__link toc-highlight">Project Structure (baseline)</a></li><li><a href="#configuration-vite-envs" class="table-of-contents__link toc-highlight">Configuration (Vite envs)</a></li><li><a href="#routing" class="table-of-contents__link toc-highlight">Routing</a></li><li><a href="#authentication-and-session" class="table-of-contents__link toc-highlight">Authentication and Session</a></li><li><a href="#api-access-pattern" class="table-of-contents__link toc-highlight">API Access Pattern</a></li><li><a href="#design-system--theming" class="table-of-contents__link toc-highlight">Design System &amp; Theming</a><ul><li><a href="#critical-ui-pattern-tile-grid-dodont" class="table-of-contents__link toc-highlight">Critical UI Pattern: Tile Grid (Do/Don&#39;t)</a></li></ul></li><li><a href="#local-development" class="table-of-contents__link toc-highlight">Local Development</a></li><li><a href="#testing-standards" class="table-of-contents__link toc-highlight">Testing Standards</a></li><li><a href="#build-and-deployment" class="table-of-contents__link toc-highlight">Build and Deployment</a></li><li><a href="#security-guidelines" class="table-of-contents__link toc-highlight">Security Guidelines</a></li><li><a href="#accessibility--performance" class="table-of-contents__link toc-highlight">Accessibility &amp; Performance</a></li><li><a href="#creating-a-new-app" class="table-of-contents__link toc-highlight">Creating a New App</a><ul><li><a href="#empowernow-experience-app-enduser-interface" class="table-of-contents__link toc-highlight">EmpowerNow Experience App (End‑User Interface)</a></li><li><a href="#dashboard--widgets" class="table-of-contents__link toc-highlight">Dashboard &amp; Widgets</a></li><li><a href="#enduser-tasks--approvals-experience" class="table-of-contents__link toc-highlight">End‑User Tasks &amp; Approvals (Experience)</a></li><li><a href="#page-protection-via-openid-authzen-pdp" class="table-of-contents__link toc-highlight">Page Protection via OpenID AuthZEN PDP</a></li></ul></li><li><a href="#handover-notes-experience-app-integration" class="table-of-contents__link toc-highlight">Handover Notes: Experience App Integration</a></li><li><a href="#readiness-checklist" class="table-of-contents__link toc-highlight">Readiness Checklist</a><ul><li><a href="#core-principles" class="table-of-contents__link toc-highlight">Core principles</a></li><li><a href="#information-architecture" class="table-of-contents__link toc-highlight">Information architecture</a></li><li><a href="#authorization-model-pdp" class="table-of-contents__link toc-highlight">Authorization model (PDP)</a></li><li><a href="#data--realtime" class="table-of-contents__link toc-highlight">Data + realtime</a></li><li><a href="#authnsession" class="table-of-contents__link toc-highlight">Authn/session</a></li><li><a href="#runtime-page-runner-distinct-from-designer" class="table-of-contents__link toc-highlight">Runtime Page Runner (distinct from Designer)</a></li><li><a href="#tasks-center" class="table-of-contents__link toc-highlight">Tasks center</a></li><li><a href="#workflow-runner" class="table-of-contents__link toc-highlight">Workflow runner</a></li><li><a href="#navigation--personalization" class="table-of-contents__link toc-highlight">Navigation &amp; personalization</a></li><li><a href="#non-functional" class="table-of-contents__link toc-highlight">Non-functional</a></li><li><a href="#implementation-delta-short" class="table-of-contents__link toc-highlight">Implementation delta (short)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/intro">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Marketing</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/solutions">Solutions</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/pricing">Pricing</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/products">Products</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/trust">Trust</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/resources">Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/company">Company</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/empowerID/empowernow_docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 EmpowerNow. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>