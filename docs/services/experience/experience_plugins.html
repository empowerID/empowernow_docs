<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/experience/experience_plugins" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">EmpowerNow Experience — Plugin Architecture | EmpowerNow Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://empowerid.github.io/empowernow_docs/img/empowernow-logo.svg"><meta data-rh="true" name="twitter:image" content="https://empowerid.github.io/empowernow_docs/img/empowernow-logo.svg"><meta data-rh="true" property="og:url" content="https://empowerid.github.io/empowernow_docs/docs/services/experience/experience_plugins"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="EmpowerNow Experience — Plugin Architecture | EmpowerNow Docs"><meta data-rh="true" name="description" content="30‑second pitch"><meta data-rh="true" property="og:description" content="30‑second pitch"><link data-rh="true" rel="icon" href="/empowernow_docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://empowerid.github.io/empowernow_docs/docs/services/experience/experience_plugins"><link data-rh="true" rel="alternate" href="https://empowerid.github.io/empowernow_docs/docs/services/experience/experience_plugins" hreflang="en"><link data-rh="true" rel="alternate" href="https://empowerid.github.io/empowernow_docs/docs/services/experience/experience_plugins" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Experience","item":"https://empowerid.github.io/empowernow_docs/docs/services/experience/"},{"@type":"ListItem","position":2,"name":"EmpowerNow Experience — Plugin Architecture","item":"https://empowerid.github.io/empowernow_docs/docs/services/experience/experience_plugins"}]}</script><link rel="stylesheet" href="/empowernow_docs/assets/css/styles.b212d4ba.css">
<script src="/empowernow_docs/assets/js/runtime~main.b7e4b38b.js" defer="defer"></script>
<script src="/empowernow_docs/assets/js/main.288af713.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/empowernow_docs/img/en-logo-light.png"><link rel="preload" as="image" href="/empowernow_docs/img/en-logo-dark.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/empowernow_docs/"><div class="navbar__logo"><img src="/empowernow_docs/img/en-logo-light.png" alt="EmpowerNow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/empowernow_docs/img/en-logo-dark.png" alt="EmpowerNow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/empowernow_docs/">Home</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/solutions">Solutions</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/products">Products</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/pricing">Pricing</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/trust">Trust</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/resources">Resources</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/website_copy/company">Company</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/empowernow_docs/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/crud-service/explanation/secrets-executive-overview">Secrets Overview</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/bff/explanation/executive-overview">BFF Overview</a><a class="navbar__item navbar__link" href="/empowernow_docs/docs/services/bff/explanation/bff-visual-guide">BFF Visual Guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/empowerID/empowernow_docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/empowernow_docs/docs/intro">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/empowernow_docs/docs/services/identity-fabric">Services</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/identity-fabric">Identity Fabric</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/crud-service">CRUD Service</a><button aria-label="Expand sidebar category &#x27;CRUD Service&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/bff">BFF</a><button aria-label="Expand sidebar category &#x27;BFF&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/pdp">PDP</a><button aria-label="Expand sidebar category &#x27;PDP&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/empowernow_docs/docs/services/experience">Experience</a><button aria-label="Collapse sidebar category &#x27;Experience&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/api-reference">Plugins API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/authorization-authzen">Authorization (AuthZEN)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/cicd-cookbook">CI/CD Cookbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/developer-types">TypeScript Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/error-loading-patterns">Error &amp; Loading Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/executive-overview">Executive Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/empowernow_docs/docs/services/experience/experience_plugins">EmpowerNow Experience — Plugin Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience">EmpowerNow Experience (End‑User App)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/local-dev-mock">Local Dev Mocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/monitoring-alerts">Monitoring &amp; Alerts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/ops-runbook">Plugins Ops Runbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/overview">React App (Spec)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/performance-budgets">Performance Budgets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/plugin-starter">Plugin Starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/plugin_guide">Plugin Dev Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/plugins-storage-deployment">Plugins Storage &amp; Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/plugins">Plugins (Primer)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/qa-test-plan">QA Test Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/quickstart">Plugins Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/security-compliance">Security &amp; Compliance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/security-reference">Plugins Security Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/empowernow_docs/docs/services/experience/versioning-compatibility">Plugins Versioning &amp; Compatibility</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/aria-shield">ARIA Shield</a><button aria-label="Expand sidebar category &#x27;ARIA Shield&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/nowconnect">NowConnect</a><button aria-label="Expand sidebar category &#x27;NowConnect&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/empowernow_docs/docs/services/idp">IdP</a><button aria-label="Expand sidebar category &#x27;IdP&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/empowernow_docs/docs/personas/faq">Personas</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/empowernow_docs/docs/marketing">Marketing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/empowernow_docs/docs/enablement/product-review-study-guide">Enablement</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/empowernow_docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Services</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/empowernow_docs/docs/services/experience"><span>Experience</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">EmpowerNow Experience — Plugin Architecture</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>EmpowerNow Experience — Plugin Architecture</h1></header>
<blockquote>
<p><strong>30‑second pitch</strong>
Enterprises need tenant‑specific features without forks, risky redeploys, or brittle iframes. Our plugins are lightweight, same‑origin ESM UI modules the host loads on demand—pre‑authorized by policy and enforced at runtime by a BFF (no browser tokens, strict CSP) with instant quarantine rollback. Developer workflow fits existing CI/CD: build once, place a file under <code>ServiceConfigs</code>, register in <code>plugins.yaml</code>, and roll out per tenant—no host redeploy. Outcome: faster delivery and safer upgrades with centralized governance, auditability, and lower TCO, on standard web tech.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-navigation-by-role">Quick Navigation (by Role)<a href="#quick-navigation-by-role" class="hash-link" aria-label="Direct link to Quick Navigation (by Role)" title="Direct link to Quick Navigation (by Role)">​</a></h2>
<p><strong>Executives &amp; PMs</strong> → §§1–4, 20, 22
<strong>Architects &amp; Tech Leads</strong> → Full doc; focus on §§5–9, 18–23
<strong>Plugin Developers</strong> → §§5–17 (esp. §§10–12)
<strong>QA Engineers</strong> → §§6–9, 14–15
<strong>Operations Teams</strong> → §§16–18, 21</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-executive-summary">1. Executive Summary<a href="#1-executive-summary" class="hash-link" aria-label="Direct link to 1. Executive Summary" title="Direct link to 1. Executive Summary">​</a></h2>
<p>The EmpowerNow Experience plugin system enables customers to extend the platform with custom UI components <strong>without modifying the core app</strong>. Plugins are small, independently deliverable ESM modules declared by a manifest and loaded by the host SPA <strong>only after</strong> authorization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="business-impact">Business Impact<a href="#business-impact" class="hash-link" aria-label="Direct link to Business Impact" title="Direct link to Business Impact">​</a></h3>
<ul>
<li><strong>Faster delivery</strong>: Customer‑specific features in days instead of quarters.</li>
<li><strong>Zero‑downtime customization</strong>: Enable/disable per tenant via manifests; no SPA redeploy.</li>
<li><strong>Risk containment</strong>: Isolated, pre‑gated UI; instant quarantine if issues arise.</li>
<li><strong>Multi‑tenant fit</strong>: Different tenants enable different plugins without code branches.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-excellence">Technical Excellence<a href="#technical-excellence" class="hash-link" aria-label="Direct link to Technical Excellence" title="Direct link to Technical Excellence">​</a></h3>
<ul>
<li><strong>Defense‑in‑depth</strong>: Same‑origin ESM + strict CSP + PDP pre‑gating + BFF allow‑lists.</li>
<li><strong>Future‑proof</strong>: Independent versioning; semver guard via <code>engine.experience</code>.</li>
<li><strong>AI‑ready</strong>: Bounded surface (manifest + <code>routes</code>/<code>widgets</code> + SDK) for safe codegen.</li>
<li><strong>Performance‑oriented</strong>: Native <code>import()</code> with caching and no iframe overhead.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-distinct">What’s distinct<a href="#whats-distinct" class="hash-link" aria-label="Direct link to What’s distinct" title="Direct link to What’s distinct">​</a></h3>
<p>Unlike iframe‑centric models (e.g., many app ecosystems) or proprietary stacks, we use <strong>standard web technologies</strong> with enterprise‑grade security controls—yielding faster development, better UX, and lower TCO.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-key-concepts-plain-language">2. Key Concepts (Plain Language)<a href="#2-key-concepts-plain-language" class="hash-link" aria-label="Direct link to 2. Key Concepts (Plain Language)" title="Direct link to 2. Key Concepts (Plain Language)">​</a></h2>
<p><strong>Plugin</strong> — A small UI extension (widget/page/mini‑app) that can be added without changing the core app.</p>
<p><strong>Tenant</strong> — A customer org using our platform; each tenant can enable different plugins.</p>
<p><strong>Manifest</strong> — A plugin’s “passport”: declares contributions (routes/widgets) and permissions (API/SSE allow‑lists), plus compatibility and PDP hints.</p>
<p><strong>Same‑origin</strong> — Plugin code ships from the <strong>same domain</strong> as the app; existing cookies work and CSP remains tight.</p>
<p><strong>ESM (ECMAScript Modules)</strong> — Modern JS module format the browser can <code>import()</code> natively; no globals; tree‑shakable.</p>
<p><strong>CSP (Content‑Security‑Policy)</strong> — Browser rules limiting executable sources (we keep <code>script-src &#x27;self&#x27;</code>).</p>
<p><strong>PDP (Policy Decision Point)</strong> — AuthZEN service answering, “Is subject S allowed to do action A on resource R?”</p>
<p><strong>BFF (Backend for Frontend)</strong> — Same‑origin gateway that serves manifests/bundles and <strong>enforces</strong> plugin calls.</p>
<p><strong>Allow‑lists</strong> — Per‑plugin allowed <strong>method + path templates</strong> (and SSE topics). If not on the list → 403.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-the-problem-were-solving">3. The Problem We’re Solving<a href="#3-the-problem-were-solving" class="hash-link" aria-label="Direct link to 3. The Problem We’re Solving" title="Direct link to 3. The Problem We’re Solving">​</a></h2>
<p><strong>Before plugins</strong>: every customization meant core‑app changes, risky updates, and tangled branching logic; time‑to‑market 3–6 months.</p>
<p><strong>With plugins</strong>: isolated, independently deployable extensions; core upgrades remain safe; each tenant gets exactly what they need; time‑to‑market 3–7 days.</p>
<p><strong>Real‑world scenarios</strong></p>
<ul>
<li><strong>Healthcare</strong>: HIPAA‑aligned widget with specific data views, enabled only for that tenant.</li>
<li><strong>Financial services</strong>: Multi‑level approval routes as a plugin, not impacting other tenants.</li>
<li><strong>Retail</strong>: Inventory integration mini‑app targeting their backend via allow‑listed endpoints.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-highlevel-howitworks">4. High‑Level How‑It‑Works<a href="#4-highlevel-howitworks" class="hash-link" aria-label="Direct link to 4. High‑Level How‑It‑Works" title="Direct link to 4. High‑Level How‑It‑Works">​</a></h2>
<p>Think of a secure building: the <strong>directory</strong> (BFF) lists apartments (plugins), <strong>security</strong> (PDP) checks access <strong>before doors open</strong>, and all movement is logged; access can be revoked immediately.</p>
<!-- -->
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-system-architecture">5. System Architecture<a href="#5-system-architecture" class="hash-link" aria-label="Direct link to 5. System Architecture" title="Direct link to 5. System Architecture">​</a></h2>
<!-- -->
<p><strong>Roles</strong></p>
<ul>
<li><strong>Experience SPA (host)</strong> — discovers manifests, pre‑gates with PDP, imports ESM bundles, mounts contributions, uses SDK for all I/O.</li>
<li><strong>Plugin</strong> — bundle + manifest; exports <code>routes</code>/<code>widgets</code>, declares allow‑lists.</li>
<li><strong>BFF</strong> — validates session, serves manifests/bundles, enforces allow‑lists using <code>X‑Plugin‑Id</code>, forwards PDP calls, enriches context.</li>
<li><strong>PDP (AuthZEN)</strong> — returns authorization decisions used pre‑mount and during interactions.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-lifecycle-discovery--pregating--load--mount">6. Lifecycle (Discovery → Pre‑gating → Load → Mount)<a href="#6-lifecycle-discovery--pregating--load--mount" class="hash-link" aria-label="Direct link to 6. Lifecycle (Discovery → Pre‑gating → Load → Mount)" title="Direct link to 6. Lifecycle (Discovery → Pre‑gating → Load → Mount)">​</a></h2>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loader-url-pattern-current">Loader URL pattern (current)<a href="#loader-url-pattern-current" class="hash-link" aria-label="Direct link to Loader URL pattern (current)" title="Direct link to Loader URL pattern (current)">​</a></h3>
<ul>
<li>The host imports plugin bundles from:<!-- -->
<ul>
<li><code>/api/plugins/bundle?entry=&lt;pluginId&gt;&amp;id=&lt;pluginId&gt;</code></li>
</ul>
</li>
<li>Examples:<!-- -->
<ul>
<li><code>/api/plugins/bundle?entry=hello-page&amp;id=hello-page</code></li>
<li><code>/api/plugins/bundle?entry=hello-widget&amp;id=hello-widget</code></li>
</ul>
</li>
</ul>
<p>Note: The BFF maps <code>id</code> to the configured <code>bundle.file</code> on disk and streams the file back as <code>text/javascript</code>.</p>
<p>Compatibility note: The SPA loader currently uses query params. If needed later, a path form (e.g., <code>/api/plugins/bundle/{pluginId}/{version}</code>) can run in parallel and migrate when convenient.</p>
<p><strong>Outcome</strong>: <strong>Permit</strong> ⇒ contribution mounts; <strong>Deny/error</strong> ⇒ omitted (no flicker).</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-security-model-defenseindepth">7. Security Model (Defense‑in‑Depth)<a href="#7-security-model-defenseindepth" class="hash-link" aria-label="Direct link to 7. Security Model (Defense‑in‑Depth)" title="Direct link to 7. Security Model (Defense‑in‑Depth)">​</a></h2>
<ol>
<li><strong>Front door — CSP</strong>: only same‑origin scripts; no external script tags or <code>unsafe-eval</code>.</li>
<li><strong>Security desk — PDP pre‑gating</strong>: authorize routes/widgets <strong>before</strong> they render.</li>
<li><strong>Access control — BFF enforcement</strong>: every call carries <code>X‑Plugin‑Id</code>; method + path‑template allow‑lists checked per request; SSE prefixes gated.</li>
<li><strong>Monitoring — Observability &amp; kill‑switch</strong>: labeled metrics (<code>{tenant, plugin_id}</code>); quarantine blocks bundle serving and API/SSE.</li>
</ol>
<p><strong>Prevents</strong>: data overreach (only allow‑listed endpoints), code injection (strict CSP), privilege escalation (AuthZEN checks), cross‑tenant bleed (per‑tenant filtering), and unsafe updates (quarantine &amp; semver guard).</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-authorization-openid-authzen">8. Authorization (OpenID AuthZEN)<a href="#8-authorization-openid-authzen" class="hash-link" aria-label="Direct link to 8. Authorization (OpenID AuthZEN)" title="Direct link to 8. Authorization (OpenID AuthZEN)">​</a></h2>
<p><strong>Why it matters</strong>: standard request/response shapes, auditability, and consistency across routes, widgets, and actions.</p>
<p><strong>Endpoints (via BFF, cookies+CSRF)</strong></p>
<ul>
<li><code>POST /access/v1/evaluation</code> (single)</li>
<li><code>POST /access/v1/evaluations</code> (batch)</li>
</ul>
<p><strong>Subject (canonical)</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;account&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;auth:account:{provider}:{user_id}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p>Provider note: <code>{provider}</code> is resolved from the IdP <code>provider</code> alias defined in <code>idps.yaml</code> (falls back to the IdP entry <code>name</code>). Use the same alias across entries with the same issuer to keep ARNs stable across audiences.</p>
<p><strong>Resources</strong></p>
<ul>
<li>Route: <code>{&quot;type&quot;:&quot;plugin.route&quot;,&quot;id&quot;:&quot;/hello&quot;}</code></li>
<li>Widget: <code>{&quot;type&quot;:&quot;plugin.widget&quot;,&quot;id&quot;:&quot;hello:HelloWidget&quot;}</code></li>
</ul>
<p><strong>Single evaluation (example)</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;subject&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;account&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;auth:account:empowernow:test&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;resource&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;plugin.route&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/hello&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;view&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;context&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p><strong>Response</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;decision&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Permit&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p><strong>Batch (pre‑gating) example</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;evaluations&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;subject&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;account&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;auth:account:empowernow:test&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;resource&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;plugin.route&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/hello&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;view&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;context&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;subject&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;account&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;auth:account:empowernow:test&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;resource&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;plugin.widget&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello:HelloWidget&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;view&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token property">&quot;context&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p><strong>Batch response</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;decisions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;decision&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Permit&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;decision&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Deny&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p>Notes: The BFF enriches context (<code>context.client.ip</code>, <code>context.client.user_agent</code>) when absent. Deny/error ⇒ fail‑closed; contributions aren’t mounted.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-runtime-enforcement-calls">9. Runtime Enforcement (Calls)<a href="#9-runtime-enforcement-calls" class="hash-link" aria-label="Direct link to 9. Runtime Enforcement (Calls)" title="Direct link to 9. Runtime Enforcement (Calls)">​</a></h2>
<!-- -->
<p><strong>Model</strong>: Allow‑lists are <strong>method + path templates</strong> (e.g., <code>/api/crud/items/:id</code>) with optional param shapes (e.g., <code>uuid</code>), compiled to safe regex after <strong>path normalization</strong>. SSE topics are gated by declared prefixes.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-plugin-development-guide">10. Plugin Development Guide<a href="#10-plugin-development-guide" class="hash-link" aria-label="Direct link to 10. Plugin Development Guide" title="Direct link to 10. Plugin Development Guide">​</a></h2>
<p><strong>What can a plugin be?</strong></p>
<ul>
<li><strong>Widgets</strong> — PDP‑gated components in dashboard slots (e.g., <code>dashboard.main</code>).</li>
<li><strong>Pages (routes)</strong> — full screens mounted at declared paths.</li>
<li><strong>Mini‑apps</strong> — multiple routes forming a cohesive feature (list → detail → settings).</li>
</ul>
<p><strong>Structure</strong></p>
<ul>
<li><strong>Manifest</strong> — declares contributions and permissions.</li>
<li><strong>Bundle (ESM)</strong> — exports React components in <code>routes</code> and/or <code>widgets</code> records.</li>
</ul>
<p><strong>Simple manifest</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sales-analytics&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">contributions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">widgets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">slot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dashboard.main&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;SalesWidget&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;GET&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/api/sales/*&quot;</span><br></span></code></pre></div></div>
<p><strong>Simple bundle</strong></p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> widgets </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">SalesWidget</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain">Sales data visualization here</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p>Constraints &amp; best practices:</p>
<ul>
<li>Do <strong>not</strong> create a top‑level Router; the host owns routing (use <code>/plugins/{pluginId}/…</code>).</li>
<li>All HTTP/SSE/AuthZ via <strong>Host SDK</strong>.</li>
<li>Follow Neon Flux via <code>@empowernow/ui</code>; no global CSS; no external scripts/styles.</li>
<li>Gate sensitive actions with PDP at render time and rely on BFF enforcement at request time.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-component-library-empowernowui">11. Component Library (<code>@empowernow/ui</code>)<a href="#11-component-library-empowernowui" class="hash-link" aria-label="Direct link to 11-component-library-empowernowui" title="Direct link to 11-component-library-empowernowui">​</a></h2>
<p><strong>Why</strong>: Consistency, accessibility, theming, and security.</p>
<p><strong>Categories</strong></p>
<ul>
<li>Layout: Container, Grid, Stack</li>
<li>Input: TextField, Select, DatePicker</li>
<li>Display: Table, Card, Chart</li>
<li>Feedback: Alert, Toast, Modal</li>
<li>Navigation: Tabs, Breadcrumb, Menu</li>
</ul>
<p><strong>Requesting new components</strong></p>
<ol>
<li><strong>Request</strong> with use case &amp; UX (screens), accessibility needs, tokens, and any PDP/security considerations.</li>
<li><strong>Design review</strong> for Neon Flux fit and API ergonomics.</li>
<li><strong>Implementation</strong> with tokens/docs/stories; no CSP relaxations; semver.</li>
<li><strong>Adoption</strong> by updating plugin dependency (host imports global CSS once).</li>
<li><strong>Support</strong> via tracked bugs/enhancements and documented deprecations.</li>
</ol>
<p><strong>Temporary gaps &amp; workarounds</strong>: Prefer composing existing primitives. Narrow ESM utilities (e.g., <code>zod</code>, lightweight charts) are fine if CSP‑safe and tree‑shakable, with <strong>no global CSS</strong>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-development-best-practices">12. Development Best Practices<a href="#12-development-best-practices" class="hash-link" aria-label="Direct link to 12. Development Best Practices" title="Direct link to 12. Development Best Practices">​</a></h2>
<p><strong>DO</strong></p>
<ul>
<li>Use <code>@empowernow/ui</code> components.</li>
<li>Use the SDK for all calls; implement error boundaries and loading states.</li>
<li>Test with varied permissions (Permit/Deny).</li>
<li>Keep bundles small and focused; treat peers as externals.</li>
</ul>
<p><strong>DON’T</strong></p>
<ul>
<li>Import third‑party UI kits directly (MUI/Chakra/AntD/Tailwind runtime frameworks).</li>
<li>Create your own top‑level Router or inject global CSS.</li>
<li>Make direct API calls or store sensitive data in the browser.</li>
</ul>
<p><strong>Checklist</strong></p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->All API calls use the SDK</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->No external UI kits; <code>@empowernow/ui</code> only</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Error boundaries present</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Loading/empty states handled</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Permissions respected (pre‑gating + actions)</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-theming--branding-neon-flux">13. Theming &amp; Branding (Neon Flux)<a href="#13-theming--branding-neon-flux" class="hash-link" aria-label="Direct link to 13. Theming &amp; Branding (Neon Flux)" title="Direct link to 13. Theming &amp; Branding (Neon Flux)">​</a></h2>
<ul>
<li>Host loads customer theme from <code>/api/configs/ui</code> (live via <code>/api/configs/stream</code>).</li>
<li><code>@empowernow/ui</code> applies tokens/props and theme classes.</li>
<li>Plugins inherit branding automatically—no per‑tenant CSS in plugins.</li>
</ul>
<p>Not supported: CSP overrides, external styles/scripts, or injected global CSS.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-version-management-compatibility">14. Version Management (Compatibility)<a href="#14-version-management-compatibility" class="hash-link" aria-label="Direct link to 14. Version Management (Compatibility)" title="Direct link to 14. Version Management (Compatibility)">​</a></h2>
<p>Plugins declare a host compatibility range via <code>engine.experience</code> (semver); the host enforces it at runtime.</p>
<p><strong>Stable contract</strong></p>
<ul>
<li>Manifest keys/types: <code>id</code>, <code>version</code>, <code>engine.experience</code>, <code>contributions.routes/widgets</code>, <code>permissions.api/sse</code>.</li>
<li>Bundle exports: <code>routes</code> &amp; <code>widgets</code> records of React components.</li>
<li>SDK surface: <code>sdk.api.fetch</code>, <code>sdk.sse.subscribe</code>, <code>sdk.authz.evaluate</code> (same‑origin, credentials, <code>X‑Plugin‑Id</code>).</li>
<li>PDP naming: <code>plugin.route:view</code>, <code>plugin.widget:view</code>.</li>
</ul>
<p><strong>Guard behavior</strong></p>
<ul>
<li>Not satisfied ⇒ skip import, omit contributions, log diagnostic (optional dev banner off‑prod).</li>
<li>Near boundary/pre‑release ⇒ allow with warning.</li>
</ul>
<p><strong>Breaking vs. additive</strong></p>
<ul>
<li>Additive: new optional manifest fields, optional SDK methods, new contribution slots.</li>
<li>Breaking: removing/renaming manifest keys, changing required types/semantics, removing SDK methods, changing PDP semantics.</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;engine&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;experience&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&gt;=1.2.0 &lt;2.0.0&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="15-testing--quality-assurance">15. Testing &amp; Quality Assurance<a href="#15-testing--quality-assurance" class="hash-link" aria-label="Direct link to 15. Testing &amp; Quality Assurance" title="Direct link to 15. Testing &amp; Quality Assurance">​</a></h2>
<p><strong>Functional</strong>: loads without errors; features work as specified; data correct; forms submit.</p>
<p><strong>Security</strong>: cannot access unauthorized APIs; no sensitive data exposed; CSP clean; permission boundaries respected.</p>
<p><strong>Performance</strong>: acceptable load times; no memory leaks; UI smoothness; handles large data.</p>
<p><strong>Integration</strong>: plays well with other plugins; theming applies; navigation/session correct.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="16-deployment-process">16. Deployment Process<a href="#16-deployment-process" class="hash-link" aria-label="Direct link to 16. Deployment Process" title="Direct link to 16. Deployment Process">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Development → Testing → Staging → Production</span><br></span></code></pre></div></div>
<ol>
<li><strong>Development</strong>: build locally; mock data; validate requirements.</li>
<li><strong>Testing</strong>: deploy to test; QA verification; security scan.</li>
<li><strong>Staging</strong>: deploy; customer UAT; performance validation.</li>
<li><strong>Production</strong>: enable per tenant; monitor metrics; allow gradual rollout.</li>
</ol>
<p><strong>Rollback</strong></p>
<ul>
<li>Immediate: <strong>Quarantine</strong> (blocks bundle and API/SSE; 403 with <code>X-Plugin-Quarantined: 1</code>).</li>
<li>Fast: disable in manifest.</li>
<li>Complete: remove plugin entry.</li>
</ul>
<p><strong>Import maps &amp; peers (host‑provided)</strong></p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">script</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">importmap</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript"></span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">  </span><span class="token script language-javascript string-property property">&quot;imports&quot;</span><span class="token script language-javascript operator">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">    </span><span class="token script language-javascript string-property property">&quot;react&quot;</span><span class="token script language-javascript operator">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(255, 121, 198)">&quot;/vendor/react@18.esm.js&quot;</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">    </span><span class="token script language-javascript string-property property">&quot;react-dom&quot;</span><span class="token script language-javascript operator">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(255, 121, 198)">&quot;/vendor/react-dom@18.esm.js&quot;</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">    </span><span class="token script language-javascript string-property property">&quot;@empowernow/ui&quot;</span><span class="token script language-javascript operator">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(255, 121, 198)">&quot;/vendor/empowernow-ui@x.y.esm.js&quot;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">  </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript"></span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">script</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre></div></div>
<p>Benefits: React dedupe, smaller bundles, fewer runtime mismatches, strict CSP. Treat peers as externals.</p>
<p><strong>SBOM</strong>: CI can emit CycloneDX (<code>npm run sbom</code>); publish as artifact (no runtime coupling).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-workflow-build--place--configure--deploy--verify">Developer workflow (Build → Place → Configure → Deploy → Verify)<a href="#developer-workflow-build--place--configure--deploy--verify" class="hash-link" aria-label="Direct link to Developer workflow (Build → Place → Configure → Deploy → Verify)" title="Direct link to Developer workflow (Build → Place → Configure → Deploy → Verify)">​</a></h3>
<ol>
<li>
<p><strong>Build</strong></p>
<ul>
<li>Author routes and/or widgets and export as ESM.</li>
<li>Externalize <code>react</code>, <code>react-dom</code>, and <code>@empowernow/ui</code> (host provides peers via import maps).</li>
<li>Produce a single file bundle, for example <code>index.esm.js</code>.</li>
</ul>
<p>Build examples (turnkey):</p>
<ul>
<li>
<p>esbuild (CLI one‑liner):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx esbuild src/index.tsx </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--bundle</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--format</span><span class="token operator">=</span><span class="token plain">esm </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--platform</span><span class="token operator">=</span><span class="token plain">browser </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--target</span><span class="token operator">=</span><span class="token plain">es2020 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--outfile</span><span class="token operator">=</span><span class="token plain">dist/index.esm.js </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--external:react</span><span class="token plain"> --external:react-dom --external:@empowernow/ui</span><br></span></code></pre></div></div>
</li>
<li>
<p>esbuild (Node script <code>build.mjs</code>):</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> build </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;esbuild&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">entryPoints</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;src/index.tsx&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">bundle</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">format</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;esm&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">platform</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;browser&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;es2020&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">outfile</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;dist/index.esm.js&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">external</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react-dom&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/ui&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">jsx</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;automatic&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
</li>
<li>
<p>Rollup (<code>rollup.config.mjs</code>):</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">resolve</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@rollup/plugin-node-resolve&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">commonjs</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@rollup/plugin-commonjs&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">esbuild</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-esbuild&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;src/index.tsx&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">external</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react-dom&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@empowernow/ui&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">file</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;dist/index.esm.js&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">format</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;esm&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">browser</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">commonjs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esbuild</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">jsx</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;automatic&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;es2020&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
</li>
</ul>
<p>Place the resulting <code>dist/index.esm.js</code> at <code>ServiceConfigs/BFF/plugins/&lt;pluginId&gt;/&lt;version&gt;/index.esm.js</code>.</p>
</li>
<li>
<p><strong>Place</strong></p>
<ul>
<li>Copy the built bundle to <code>ServiceConfigs/BFF/plugins/&lt;pluginId&gt;/&lt;version&gt;/index.esm.js</code>.</li>
</ul>
</li>
<li>
<p><strong>Configure</strong></p>
<ul>
<li>Add or update the entry under <code>ServiceConfigs/BFF/config/plugins.yaml</code>:<!-- -->
<ul>
<li>Set <code>id</code>, <code>version</code>, <code>engine.experience</code>.</li>
<li>Set <code>bundle.file</code> to <code>/app/plugins/&lt;pluginId&gt;/&lt;version&gt;/index.esm.js</code>.</li>
<li>Add <code>contributions</code> and <code>permissions</code> (method+path allow‑lists and optional SSE prefixes).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Deploy</strong></p>
<ul>
<li>BFF containers mount:<!-- -->
<ul>
<li><code>../ServiceConfigs/BFF/plugins:/app/plugins:ro</code></li>
<li><code>../ServiceConfigs/BFF/config:/app/config:ro</code></li>
</ul>
</li>
<li>Restart/reload the BFF to pick up config changes and bundles.</li>
</ul>
</li>
<li>
<p><strong>Verify</strong></p>
<ul>
<li><code>GET /api/plugins/manifests</code> shows your plugin.</li>
<li>SPA loads <code>/api/plugins/bundle?...</code> with 200 and strong caching headers.</li>
<li>PDP pre‑gating permits your contributions; widgets/routes render.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="17-operations-guide">17. Operations Guide<a href="#17-operations-guide" class="hash-link" aria-label="Direct link to 17. Operations Guide" title="Direct link to 17. Operations Guide">​</a></h2>
<p><strong>Monitoring dashboard</strong> (labels: <code>{tenant, plugin_id}</code>): active plugins per tenant, error rates, load times, authorization denials.</p>
<p><strong>Common tasks</strong></p>
<table><thead><tr><th>Task</th><th>How</th><th>Time</th></tr></thead><tbody><tr><td>Enable/disable plugin</td><td>Update manifest</td><td>~1 min</td></tr><tr><td>Quarantine/unquarantine</td><td>API call</td><td>Instant</td></tr><tr><td>Check plugin health</td><td>View dashboard</td><td>Instant</td></tr><tr><td>Update permissions</td><td>Adjust PDP/allow‑lists</td><td>~5 min</td></tr></tbody></table>
<p><strong>Troubleshooting</strong></p>
<ul>
<li><strong>Plugin won’t load</strong>: check <code>/api/plugins/manifests</code>; verify PDP; check console; confirm version guard.</li>
<li><strong>403s</strong>: ensure <code>X‑Plugin‑Id</code> header; review allow‑list templates; confirm PDP rules; look for <code>X-Allowlist-Violation: 1</code>.</li>
<li><strong>Performance</strong>: inspect bundle size; API call frequency; backend latency; memory leaks.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="operational-procedures">Operational procedures<a href="#operational-procedures" class="hash-link" aria-label="Direct link to Operational procedures" title="Direct link to Operational procedures">​</a></h3>
<ul>
<li><strong>Atomic rollout (recommended)</strong>: stage new bundles under <code>ServiceConfigs/BFF/plugins/.staged/...</code> and flip to <code>/app/plugins/&lt;id&gt;/&lt;version&gt;</code> in one step to avoid broken references.</li>
<li><strong>Integrity management (optional, recommended)</strong>: compute sha256 of the final ESM and set <code>bundle.integrity: &quot;sha256:&lt;hex&gt;&quot;</code>; on mismatch the BFF fails closed with 409 and <code>X-Integrity-Error: 1</code>.</li>
<li><strong>Quarantine</strong>: immediate kill switch to block serving and use.<!-- -->
<ul>
<li><code>POST /api/plugins/quarantine/{plugin_id}</code></li>
<li><code>POST /api/plugins/unquarantine/{plugin_id}</code></li>
</ul>
</li>
<li><strong>Hot reload of manifests</strong>: <code>POST /api/plugins/refresh</code> reloads <code>plugins.yaml</code> without container rebuilds.</li>
<li><strong>Monitoring (minimum)</strong>: track bundle serve outcomes/latencies and allow‑list denials by <code>{tenant, plugin_id, version}</code>; alert on quarantine/integrity errors.</li>
<li><strong>Backups</strong>: treat <code>ServiceConfigs</code> as configuration SoT; ensure your normal config backup processes include the plugins folder and <code>plugins.yaml</code>.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="18-configuration-management-bff-stores--serves">18. Configuration Management (BFF Stores &amp; Serves)<a href="#18-configuration-management-bff-stores--serves" class="hash-link" aria-label="Direct link to 18. Configuration Management (BFF Stores &amp; Serves)" title="Direct link to 18. Configuration Management (BFF Stores &amp; Serves)">​</a></h2>
<p><strong>Source‑of‑truth config</strong> (<code>ServiceConfigs/BFF/config</code>)</p>
<ul>
<li><code>routes.yaml</code> — public/internal endpoints and service targets</li>
<li><code>settings.yaml</code> — CORS/dev origins, redirect origins, security toggles</li>
<li><code>plugins.yaml</code> — plugin manifest entries (YAML)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-layout-source-of-truth">Storage layout (source of truth)<a href="#storage-layout-source-of-truth" class="hash-link" aria-label="Direct link to Storage layout (source of truth)" title="Direct link to Storage layout (source of truth)">​</a></h3>
<ul>
<li>Host filesystem (checked into your configuration repo):<!-- -->
<ul>
<li><code>ServiceConfigs/BFF/plugins/&lt;pluginId&gt;/&lt;version&gt;/index.esm.js</code></li>
</ul>
</li>
<li>Container mount (BFF):<!-- -->
<ul>
<li><code>/app/plugins</code> (read‑only)</li>
</ul>
</li>
<li>Configuration (BFF):<!-- -->
<ul>
<li><code>ServiceConfigs/BFF/config/plugins.yaml</code> declares each plugin plus its bundle file path</li>
</ul>
</li>
</ul>
<p>Storage &amp; mounts (visual)</p>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compose-mounts-bff">Compose mounts (BFF)<a href="#compose-mounts-bff" class="hash-link" aria-label="Direct link to Compose mounts (BFF)" title="Direct link to Compose mounts (BFF)">​</a></h4>
<ul>
<li><code>docker-compose-authzen4.yml</code>:<!-- -->
<ul>
<li><code>../ServiceConfigs/BFF/plugins:/app/plugins:ro</code></li>
<li><code>../ServiceConfigs/BFF/config:/app/config:ro</code></li>
</ul>
</li>
<li><code>docker-compose-nowconnect.yml</code>:<!-- -->
<ul>
<li><code>../ServiceConfigs/BFF/plugins:/app/plugins:ro</code></li>
<li><code>../ServiceConfigs/BFF/config:/app/config:ro</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-config-serviceconfigsbffconfigpluginsyaml">Plugin config (<code>ServiceConfigs/BFF/config/plugins.yaml</code>)<a href="#plugin-config-serviceconfigsbffconfigpluginsyaml" class="hash-link" aria-label="Direct link to plugin-config-serviceconfigsbffconfigpluginsyaml" title="Direct link to plugin-config-serviceconfigsbffconfigpluginsyaml">​</a></h3>
<p>Example (hello, page, and widget plugins):</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">tenants</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">experience.ocg.labs.empowernow.ai</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">experience</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&gt;=1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/app/plugins/hello/1.0.0/index.esm.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># integrity: &quot;sha256:&lt;optional_hex_hash&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GET</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /api/plugins/secure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">echo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> POST</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /api/plugins/telemetry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">sse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">contributions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /hello</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Hello</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">resource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> plugin.route</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">widgets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">slot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> dashboard.main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HelloWidget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">resource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> plugin.widget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hello</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">page</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">experience</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&gt;=1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/app/plugins/hello-page/1.0.0/index.esm.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GET</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /api/plugins/secure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">echo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">sse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">contributions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /hello</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">page</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HelloPage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">resource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> plugin.route</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hello</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">widget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">experience</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&gt;=1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/app/plugins/hello-widget/1.0.0/index.esm.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> POST</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /api/plugins/telemetry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">sse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">contributions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">widgets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">slot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> dashboard.main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HelloWidget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">resource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> plugin.widget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> view</span><br></span></code></pre></div></div>
<p>Key fields:</p>
<ul>
<li><code>id</code>/<code>version</code>/<code>engine.experience</code> — identity and compatibility range</li>
<li><code>bundle.file</code> — absolute file path inside the container under <code>/app/plugins</code></li>
<li><code>bundle.integrity</code> (optional) — content hash enforced at serve time</li>
<li><code>permissions</code> — allow‑list of method+path templates and SSE prefixes</li>
<li><code>contributions</code> — routes and/or widgets with PDP hints</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-view">Runtime view<a href="#runtime-view" class="hash-link" aria-label="Direct link to Runtime view" title="Direct link to Runtime view">​</a></h3>
<ul>
<li>Manifests are served as JSON from <code>GET /api/plugins/manifests</code> (<code>PluginManifest[]</code>), scoped by tenant host.</li>
<li>Bundles are served same‑origin from <code>GET /api/plugins/bundle?entry=&lt;id&gt;&amp;id=&lt;id&gt;</code> as ESM (<code>text/javascript</code>).</li>
<li>Enforcement data is derived from manifest permissions: method + path templates (optional <code>params</code> shapes like <code>uuid</code>); compiled to safe regex after path normalization; evaluated per request in memory.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bff-serving-logic">BFF serving logic<a href="#bff-serving-logic" class="hash-link" aria-label="Direct link to BFF serving logic" title="Direct link to BFF serving logic">​</a></h3>
<ul>
<li>For each request to <code>/api/plugins/bundle?...</code> the BFF:<!-- -->
<ul>
<li>Checks quarantine ⇒ 403 with <code>X-Plugin-Quarantined: 1</code> if blocked.</li>
<li>Resolves <code>id</code> to the configured <code>bundle.file</code> (from <code>plugins.yaml</code>).</li>
<li>Root‑jails: only serves files under <code>/app/plugins</code> (prevents traversal).</li>
<li>Integrity (optional): if <code>integrity</code> is set, verify the sha256 of file content; on mismatch, return 409 with <code>X-Integrity-Error: 1</code>.</li>
<li>Serves via file streaming with headers:<!-- -->
<ul>
<li><code>Content-Type: text/javascript; charset=utf-8</code></li>
<li><code>ETag: sha256-&lt;hex&gt;</code></li>
<li><code>Cache-Control: public, max-age=31536000, immutable</code></li>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>Cross-Origin-Resource-Policy: same-origin</code></li>
</ul>
</li>
</ul>
</li>
<li>Authentication: the bundle route is <code>auth: session</code> in <code>routes.yaml</code>; an authenticated session is required to fetch bundles.</li>
<li>Security: Same‑origin ESM means no CSP relaxation.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-formats">Response formats<a href="#response-formats" class="hash-link" aria-label="Direct link to Response formats" title="Direct link to Response formats">​</a></h3>
<ul>
<li><code>/api/plugins/manifests</code> → <code>application/json</code> → <code>PluginManifest[]</code></li>
<li><code>/api/plugins/bundle</code> → <code>text/javascript</code> → ESM module with <code>routes</code>/<code>widgets</code> exports</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="operations-endpoints">Operations endpoints<a href="#operations-endpoints" class="hash-link" aria-label="Direct link to Operations endpoints" title="Direct link to Operations endpoints">​</a></h3>
<ul>
<li><code>POST /api/plugins/refresh</code> — reload manifests from config (<code>plugins.yaml</code>)</li>
<li><code>POST /api/plugins/quarantine/{id}</code> — immediate block of serving and enforcement for a plugin</li>
<li><code>POST /api/plugins/unquarantine/{id}</code> — unblock a quarantined plugin</li>
</ul>
<p><strong>Related deep dives</strong>: <code>experience_plugins.md</code>, <code>../ms_bff_spike/ms_bff/docs/bff_config.md</code>, <code>e2e.md</code>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="19-security-details-headers--auth-flow">19. Security Details (Headers &amp; Auth Flow)<a href="#19-security-details-headers--auth-flow" class="hash-link" aria-label="Direct link to 19. Security Details (Headers &amp; Auth Flow)" title="Direct link to 19. Security Details (Headers &amp; Auth Flow)">​</a></h2>
<p><strong>Baseline headers</strong></p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Security-Policy: default-src &#x27;self&#x27;; script-src &#x27;self&#x27;; style-src &#x27;self&#x27;; img-src &#x27;self&#x27; data:; font-src &#x27;self&#x27;; connect-src &#x27;self&#x27;; frame-ancestors &#x27;none&#x27;; base-uri &#x27;none&#x27;; object-src &#x27;none&#x27;; require-trusted-types-for &#x27;script&#x27;; trusted-types react empowernow-sdk;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Permissions-Policy: accelerometer=(), autoplay=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Vary: Cookie, X-Plugin-Id</span><br></span></code></pre></div></div>
<p><strong>Auth flow</strong></p>
<ol>
<li>User logs into Experience; session cookie is <strong>httpOnly + secure</strong>.</li>
<li>All plugin requests include cookie; SDK stamps <code>X‑Plugin‑Id</code>.</li>
<li>BFF validates session and allow‑lists; forwards PDP checks; no browser tokens.</li>
</ol>
<p><strong>Edge hardening</strong>: Permissions‑Policy deny‑by‑default; Trusted Types in <strong>report‑only</strong> to surface unexpected sinks.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20-business-benefits-guidance--placeholders">20. Business Benefits (Guidance &amp; Placeholders)<a href="#20-business-benefits-guidance--placeholders" class="hash-link" aria-label="Direct link to 20. Business Benefits (Guidance &amp; Placeholders)" title="Direct link to 20. Business Benefits (Guidance &amp; Placeholders)">​</a></h2>
<blockquote>
<p><strong>Important:</strong> The section below is a template. Replace every placeholder with <strong>measured data</strong> from your deployments. We intentionally avoid unverified claims.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cost--speed">Cost &amp; Speed<a href="#cost--speed" class="hash-link" aria-label="Direct link to Cost &amp; Speed" title="Direct link to Cost &amp; Speed">​</a></h3>
<ul>
<li>Summarize <em>actual</em> time-to-value deltas (e.g., prototype → production) from specific projects/tenants.</li>
<li>Note any reduction in change requests or maintenance incidents attributable to plugins.</li>
<li>Document instances where plugins were upgraded independently of the host (date, scope, outcome).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="potential-revenue-levers-if-applicable">Potential Revenue Levers (If Applicable)<a href="#potential-revenue-levers-if-applicable" class="hash-link" aria-label="Direct link to Potential Revenue Levers (If Applicable)" title="Direct link to Potential Revenue Levers (If Applicable)">​</a></h3>
<ul>
<li>List monetized plugins or add-ons and the pricing model.</li>
<li>Describe partner ecosystem or onboarding improvements <strong>with sourced metrics</strong>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="case-studies-insert-real-data">Case Studies (Insert Real Data)<a href="#case-studies-insert-real-data" class="hash-link" aria-label="Direct link to Case Studies (Insert Real Data)" title="Direct link to Case Studies (Insert Real Data)">​</a></h3>
<ul>
<li><strong>Case #1 — &lt;tenant/project&gt;</strong>: objectives, plugin scope, measured outcomes, dates, and a link to the source (dashboard, ticket, or doc).</li>
<li><strong>Case #2 — &lt;tenant/project&gt;</strong>: objectives, plugin scope, measured outcomes, dates, and source link.</li>
<li><strong>Case #3 — &lt;tenant/project&gt;</strong>: …</li>
</ul>
<blockquote>
<p>Tip: Cite dashboards or reports (e.g., RUM, APM, data warehouse) beside each metric to ensure auditability.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="21-operational-excellence-slos--dr-framework">21. Operational Excellence (SLOs &amp; DR Framework)<a href="#21-operational-excellence-slos--dr-framework" class="hash-link" aria-label="Direct link to 21. Operational Excellence (SLOs &amp; DR Framework)" title="Direct link to 21. Operational Excellence (SLOs &amp; DR Framework)">​</a></h2>
<blockquote>
<p><strong>Important:</strong> The figures here are <em>templates</em>. Set targets with Ops/SRE after establishing baselines. Do not publish numeric targets without a source.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="slo-framework">SLO Framework<a href="#slo-framework" class="hash-link" aria-label="Direct link to SLO Framework" title="Direct link to SLO Framework">​</a></h3>
<p>Define and track the following (per tenant and per <code>plugin_id</code> where relevant):</p>
<ul>
<li><strong>Plugin load time</strong> (p95)</li>
<li><strong>BFF API latency</strong> (p50/p95)</li>
<li><strong>Availability</strong> (host + BFF)</li>
<li><strong>Error rate</strong> (by <code>plugin_id</code>)</li>
</ul>
<p>Provide a baseline + target table with owners and data sources:</p>
<table><thead><tr><th>Metric</th><th>Baseline</th><th>Target</th><th>Owner</th><th>Source</th></tr></thead><tbody><tr><td>Plugin load time (p95)</td><td>[TBD]</td><td>[TBD]</td><td>Web Perf</td><td>RUM dashboard</td></tr><tr><td>BFF API latency (p50/p95)</td><td>[TBD]</td><td>[TBD]</td><td>Platform</td><td>APM</td></tr><tr><td>Availability</td><td>[TBD]</td><td>[TBD]</td><td>SRE</td><td>Status/SLI service</td></tr><tr><td>Error rate</td><td>[TBD]</td><td>[TBD]</td><td>SRE</td><td>Logs/metrics</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring--alerting-minimum-set">Monitoring &amp; Alerting (Minimum Set)<a href="#monitoring--alerting-minimum-set" class="hash-link" aria-label="Direct link to Monitoring &amp; Alerting (Minimum Set)" title="Direct link to Monitoring &amp; Alerting (Minimum Set)">​</a></h3>
<p>Track: plugin load failures, PDP denials, allow‑list violations, API error rates/latency by <code>plugin_id</code>.</p>
<p>Alerting examples (customize to your baselines):</p>
<ul>
<li>Error rate thresholds (warning/critical)</li>
<li>Load time thresholds</li>
<li>Any <strong>security violation</strong> ⇒ page on‑call</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disaster-recovery">Disaster Recovery<a href="#disaster-recovery" class="hash-link" aria-label="Direct link to Disaster Recovery" title="Direct link to Disaster Recovery">​</a></h3>
<p>Document your organization’s DR parameters and procedures here:</p>
<ul>
<li><strong>RTO</strong>: [TBD]</li>
<li><strong>RPO</strong>: [TBD]</li>
<li><strong>Backup cadence/retention</strong>: [TBD]</li>
<li><strong>Quarantine procedure</strong>: supported via <code>/api/plugins/quarantine/{id}</code> (immediate); include runbook link.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="22-competitive-context">22. Competitive Context<a href="#22-competitive-context" class="hash-link" aria-label="Direct link to 22. Competitive Context" title="Direct link to 22. Competitive Context">​</a></h2>
<table><thead><tr><th>Feature</th><th>EmpowerNow</th><th>Salesforce</th><th>ServiceNow</th><th>Microsoft Teams</th></tr></thead><tbody><tr><td>Technology</td><td>Standard React/ESM</td><td>Proprietary</td><td>Proprietary</td><td>iFrames</td></tr><tr><td>Security</td><td>Multi‑layer (CSP+PDP+BFF)</td><td>Platform‑confined</td><td>Platform‑confined</td><td>Cross‑origin seams</td></tr><tr><td>Performance</td><td>Native import()</td><td>Good</td><td>Good</td><td>Iframe overhead</td></tr><tr><td>Dev speed</td><td>Days</td><td>Weeks</td><td>Weeks</td><td>Days</td></tr><tr><td>Customization</td><td>Strong</td><td>Limited</td><td>Limited</td><td>Strong (iframe)</td></tr><tr><td>Upgrade path</td><td>Independent</td><td>Platform‑tied</td><td>Platform‑tied</td><td>Complex</td></tr></tbody></table>
<p><strong>Our advantages</strong>: no vendor lock‑in; better UX (no iframe seams); stronger centralized enforcement; familiar tools.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="23-roadmap-forward-look">23. Roadmap (Forward Look)<a href="#23-roadmap-forward-look" class="hash-link" aria-label="Direct link to 23. Roadmap (Forward Look)" title="Direct link to 23. Roadmap (Forward Look)">​</a></h2>
<p><strong>Near‑term</strong>: import‑map rollout for peers, enhanced analytics, gradual marketplace, A/B testing hooks.
<strong>Mid‑term</strong>: visual plugin builder, AI‑assisted scaffolds, cross‑tenant sharing options, richer permission templates.
<strong>Long‑term</strong>: ML integrations, NL interfaces, predictive customization, collaborative features.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-a--glossary">Appendix A — Glossary<a href="#appendix-a--glossary" class="hash-link" aria-label="Direct link to Appendix A — Glossary" title="Direct link to Appendix A — Glossary">​</a></h2>
<p>Allow‑list • AuthZEN • BFF • Bundle • CSP • ESM • Manifest • PDP • Plugin • SDK • Tenant • Widget.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-b--quick-reference">Appendix B — Quick Reference<a href="#appendix-b--quick-reference" class="hash-link" aria-label="Direct link to Appendix B — Quick Reference" title="Direct link to Appendix B — Quick Reference">​</a></h2>
<p><strong>Important URLs</strong></p>
<ul>
<li>Manifests: <code>/api/plugins/manifests</code></li>
<li>Bundles: <code>/api/plugins/bundle</code></li>
<li>Authorization: <code>/access/v1/evaluations</code></li>
<li>Quarantine: <code>/api/plugins/quarantine/{id}</code></li>
<li>Unquarantine: <code>/api/plugins/unquarantine/{id}</code></li>
<li>Refresh manifests: <code>/api/plugins/refresh</code></li>
</ul>
<p><strong>Key headers</strong></p>
<ul>
<li><code>X‑Plugin‑Id</code> — identifies calling plugin</li>
<li><code>X‑Plugin‑Quarantined</code> — present when blocked</li>
<li><code>X‑Allowlist‑Violation</code> — permission denied marker</li>
<li><code>X‑Integrity‑Error</code> — integrity hash mismatch on bundle serve</li>
</ul>
<p>Bundle response headers:</p>
<ul>
<li><code>Content-Type: text/javascript; charset=utf-8</code></li>
<li><code>ETag: sha256-&lt;hex&gt;</code></li>
<li><code>Cache-Control: public, max-age=31536000, immutable</code></li>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>Cross-Origin-Resource-Policy: same-origin</code></li>
</ul>
<p><strong>Contacts</strong></p>
<ul>
<li>Dev Support: <code>dev-support@empowernow</code></li>
<li>Operations: <code>ops-team@empowernow</code></li>
<li>Security: <code>security@empowernow</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/experience_plugins.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/empowernow_docs/docs/services/experience/executive-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Executive Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/empowernow_docs/docs/services/experience"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EmpowerNow Experience (End‑User App)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-navigation-by-role" class="table-of-contents__link toc-highlight">Quick Navigation (by Role)</a></li><li><a href="#1-executive-summary" class="table-of-contents__link toc-highlight">1. Executive Summary</a><ul><li><a href="#business-impact" class="table-of-contents__link toc-highlight">Business Impact</a></li><li><a href="#technical-excellence" class="table-of-contents__link toc-highlight">Technical Excellence</a></li><li><a href="#whats-distinct" class="table-of-contents__link toc-highlight">What’s distinct</a></li></ul></li><li><a href="#2-key-concepts-plain-language" class="table-of-contents__link toc-highlight">2. Key Concepts (Plain Language)</a></li><li><a href="#3-the-problem-were-solving" class="table-of-contents__link toc-highlight">3. The Problem We’re Solving</a></li><li><a href="#4-highlevel-howitworks" class="table-of-contents__link toc-highlight">4. High‑Level How‑It‑Works</a></li><li><a href="#5-system-architecture" class="table-of-contents__link toc-highlight">5. System Architecture</a></li><li><a href="#6-lifecycle-discovery--pregating--load--mount" class="table-of-contents__link toc-highlight">6. Lifecycle (Discovery → Pre‑gating → Load → Mount)</a><ul><li><a href="#loader-url-pattern-current" class="table-of-contents__link toc-highlight">Loader URL pattern (current)</a></li></ul></li><li><a href="#7-security-model-defenseindepth" class="table-of-contents__link toc-highlight">7. Security Model (Defense‑in‑Depth)</a></li><li><a href="#8-authorization-openid-authzen" class="table-of-contents__link toc-highlight">8. Authorization (OpenID AuthZEN)</a></li><li><a href="#9-runtime-enforcement-calls" class="table-of-contents__link toc-highlight">9. Runtime Enforcement (Calls)</a></li><li><a href="#10-plugin-development-guide" class="table-of-contents__link toc-highlight">10. Plugin Development Guide</a></li><li><a href="#11-component-library-empowernowui" class="table-of-contents__link toc-highlight">11. Component Library (<code>@empowernow/ui</code>)</a></li><li><a href="#12-development-best-practices" class="table-of-contents__link toc-highlight">12. Development Best Practices</a></li><li><a href="#13-theming--branding-neon-flux" class="table-of-contents__link toc-highlight">13. Theming &amp; Branding (Neon Flux)</a></li><li><a href="#14-version-management-compatibility" class="table-of-contents__link toc-highlight">14. Version Management (Compatibility)</a></li><li><a href="#15-testing--quality-assurance" class="table-of-contents__link toc-highlight">15. Testing &amp; Quality Assurance</a></li><li><a href="#16-deployment-process" class="table-of-contents__link toc-highlight">16. Deployment Process</a><ul><li><a href="#developer-workflow-build--place--configure--deploy--verify" class="table-of-contents__link toc-highlight">Developer workflow (Build → Place → Configure → Deploy → Verify)</a></li></ul></li><li><a href="#17-operations-guide" class="table-of-contents__link toc-highlight">17. Operations Guide</a><ul><li><a href="#operational-procedures" class="table-of-contents__link toc-highlight">Operational procedures</a></li></ul></li><li><a href="#18-configuration-management-bff-stores--serves" class="table-of-contents__link toc-highlight">18. Configuration Management (BFF Stores &amp; Serves)</a><ul><li><a href="#storage-layout-source-of-truth" class="table-of-contents__link toc-highlight">Storage layout (source of truth)</a></li><li><a href="#plugin-config-serviceconfigsbffconfigpluginsyaml" class="table-of-contents__link toc-highlight">Plugin config (<code>ServiceConfigs/BFF/config/plugins.yaml</code>)</a></li><li><a href="#runtime-view" class="table-of-contents__link toc-highlight">Runtime view</a></li><li><a href="#bff-serving-logic" class="table-of-contents__link toc-highlight">BFF serving logic</a></li><li><a href="#response-formats" class="table-of-contents__link toc-highlight">Response formats</a></li><li><a href="#operations-endpoints" class="table-of-contents__link toc-highlight">Operations endpoints</a></li></ul></li><li><a href="#19-security-details-headers--auth-flow" class="table-of-contents__link toc-highlight">19. Security Details (Headers &amp; Auth Flow)</a></li><li><a href="#20-business-benefits-guidance--placeholders" class="table-of-contents__link toc-highlight">20. Business Benefits (Guidance &amp; Placeholders)</a><ul><li><a href="#cost--speed" class="table-of-contents__link toc-highlight">Cost &amp; Speed</a></li><li><a href="#potential-revenue-levers-if-applicable" class="table-of-contents__link toc-highlight">Potential Revenue Levers (If Applicable)</a></li><li><a href="#case-studies-insert-real-data" class="table-of-contents__link toc-highlight">Case Studies (Insert Real Data)</a></li></ul></li><li><a href="#21-operational-excellence-slos--dr-framework" class="table-of-contents__link toc-highlight">21. Operational Excellence (SLOs &amp; DR Framework)</a><ul><li><a href="#slo-framework" class="table-of-contents__link toc-highlight">SLO Framework</a></li><li><a href="#monitoring--alerting-minimum-set" class="table-of-contents__link toc-highlight">Monitoring &amp; Alerting (Minimum Set)</a></li><li><a href="#disaster-recovery" class="table-of-contents__link toc-highlight">Disaster Recovery</a></li></ul></li><li><a href="#22-competitive-context" class="table-of-contents__link toc-highlight">22. Competitive Context</a></li><li><a href="#23-roadmap-forward-look" class="table-of-contents__link toc-highlight">23. Roadmap (Forward Look)</a></li><li><a href="#appendix-a--glossary" class="table-of-contents__link toc-highlight">Appendix A — Glossary</a></li><li><a href="#appendix-b--quick-reference" class="table-of-contents__link toc-highlight">Appendix B — Quick Reference</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/intro">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Marketing</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/solutions">Solutions</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/pricing">Pricing</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/products">Products</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/trust">Trust</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/resources">Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/empowernow_docs/docs/website_copy/company">Company</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/empowerID/empowernow_docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 EmpowerNow. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>