"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2249],{1145:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"personas/security/intro","title":"Security Officers & Auditors","description":"Security model, controls, evidence, and reports \u2014 what to review, how to verify, and where to find artifacts.","source":"@site/docs/personas/security/intro.md","sourceDirName":"personas/security","slug":"/personas/security/intro","permalink":"/empowernow_docs/docs/personas/security/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/personas/security/intro.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Admins","permalink":"/empowernow_docs/docs/personas/admins"},"next":{"title":"DevOps","permalink":"/empowernow_docs/docs/personas/devops"}}');var i=s(74848),t=s(28453);const o={},c="Security Officers & Auditors",d={},l=[{value:"What you\u2019ll learn",id:"what-youll-learn",level:2},{value:"System overview (at a glance)",id:"system-overview-at-a-glance",level:2},{value:"Controls you can verify",id:"controls-you-can-verify",level:2},{value:"Evidence and where to find it",id:"evidence-and-where-to-find-it",level:2},{value:"Compliance posture (summarized)",id:"compliance-posture-summarized",level:2},{value:"Frequently asked (security)",id:"frequently-asked-security",level:2},{value:"Deep\u2011dives and artifacts",id:"deepdives-and-artifacts",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"security-officers--auditors",children:"Security Officers & Auditors"})}),"\n",(0,i.jsx)(n.p,{children:"Security model, controls, evidence, and reports \u2014 what to review, how to verify, and where to find artifacts."}),"\n",(0,i.jsx)(n.h2,{id:"what-youll-learn",children:"What you\u2019ll learn"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"How identity, sessions, and authorization work end\u2011to\u2011end (no browser tokens)"}),"\n",(0,i.jsx)(n.li,{children:"The concrete controls enforced at the edge and in the BFF"}),"\n",(0,i.jsx)(n.li,{children:"Where to find evidence (logs, metrics, events) and how to verify them"}),"\n",(0,i.jsx)(n.li,{children:"Our compliance posture (FAPI/FIPS) and operational safeguards"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"system-overview-at-a-glance",children:"System overview (at a glance)"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart LR\r\n  subgraph Client[Browser / API Client]\r\n    UI[SPA]\r\n  end\r\n  subgraph Edge[Ingress / Traefik]\r\n    FWD[ForwardAuth / security headers]\r\n  end\r\n  subgraph BFF[Backend\u2011for\u2011Frontend]\r\n    AUTH[/auth/*\\n(login, callback, verify, csrf, logout)/]\r\n    API[/api/**\\n(proxy + PDP)/]\r\n  end\r\n  subgraph Control[Control Plane]\r\n    IDP[IdP (OIDC/OAuth 2.1)]\r\n    PDP[PDP (AuthZ)]\r\n    REDIS[(Redis: sessions + PDP cache)]\r\n  end\r\n  subgraph Backends[Backend Services]\r\n    SVC[CRUD/PDP/other APIs]\r\n  end\r\n\r\n  UI --\x3e|cookie| Edge --\x3e BFF\r\n  FWD -.->|/auth/verify| AUTH\r\n  AUTH --\x3e|code exchange| IDP\r\n  API --\x3e|subject, resource, action| PDP\r\n  BFF --\x3e|Bearer (server\u2011side)| SVC"}),"\n",(0,i.jsx)(n.p,{children:"Key points:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["End\u2011user identity comes from the OIDC ID token (or UserInfo). The BFF stores ",(0,i.jsx)(n.code,{children:"user_id = id_token.sub"})," in the session. Service tokens used by the BFF to call backends are not user identity and never reach the browser."]}),"\n",(0,i.jsx)(n.li,{children:"All SPA API calls are cookie\u2011based to the BFF; the BFF performs authZ per request via the PDP and injects server\u2011held Bearer tokens on upstream hops only when needed."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"controls-you-can-verify",children:"Controls you can verify"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Session confidentiality and integrity","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"HttpOnly"}),", ",(0,i.jsx)(n.code,{children:"Secure"}),", ",(0,i.jsx)(n.code,{children:"SameSite=Lax"})," session cookie; session rotation at login"]}),"\n",(0,i.jsx)(n.li,{children:"Session binding (IP/User\u2011Agent hashing); rejects mismatches; metrics on failures"}),"\n",(0,i.jsxs)(n.li,{children:["CSRF protection: double\u2011submit token (",(0,i.jsx)(n.code,{children:"_eid_csrf_v1"})," + ",(0,i.jsx)(n.code,{children:"X\u2011CSRF\u2011Token"}),") for state\u2011changing methods"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Edge protections","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["ForwardAuth (",(0,i.jsx)(n.code,{children:"/auth/verify"}),") to gate protected routers (optional per route)"]}),"\n",(0,i.jsx)(n.li,{children:"Strict security headers, rate limiting per router, request size limits"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Authorization","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Path\u2192resource/action mapping, PDP decision cache with separate TTLs for allow/deny"}),"\n",(0,i.jsx)(n.li,{children:"Correlated audit ID across edge\u2192BFF\u2192services"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Token handling","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OAuth/OIDC terminated in the BFF only; no access tokens in the browser"}),"\n",(0,i.jsx)(n.li,{children:"Per\u2011service audience tokens held and refreshed by the BFF (client\u2011credential or token\u2011exchange)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"See: BFF Security Model, ForwardAuth, Session binding & CSRF, FAPI/FIPS."}),"\n",(0,i.jsx)(n.h2,{id:"evidence-and-where-to-find-it",children:"Evidence and where to find it"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Metrics (Prometheus)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["BFF: ",(0,i.jsx)(n.code,{children:"bff_verify_duration_seconds"}),", ",(0,i.jsx)(n.code,{children:"bff_session_binding_failures_total"}),", PDP latency/decision counters"]}),"\n",(0,i.jsxs)(n.li,{children:["Edge: ",(0,i.jsx)(n.code,{children:"traefik_forwardauth_success_total"}),", ",(0,i.jsx)(n.code,{children:"traefik_forwardauth_rejected_total"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Logs (structured, correlation\u2011id based)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Login/logout, session lifecycle, PDP calls, upstream proxying with status codes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Events (Kafka)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Security/audit topics for login/logout, session, and API access envelopes (PII\u2011safe)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"How to verify quickly"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Attempt a state\u2011changing request without ",(0,i.jsx)(n.code,{children:"X\u2011CSRF\u2011Token"})," \u2192 expect 403 CSRF"]}),"\n",(0,i.jsx)(n.li,{children:"Force session binding mismatch (spoof User\u2011Agent) \u2192 expect session re\u2011auth and counter increment"}),"\n",(0,i.jsx)(n.li,{children:"Call a protected route directly (no session) \u2192 401 at edge/BFF"}),"\n",(0,i.jsx)(n.li,{children:"Check PDP deny path \u2192 403 with decision evidence"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"compliance-posture-summarized",children:"Compliance posture (summarized)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FAPI: Authorization Code with PKCE/PAR, JARM when enabled, DPoP optional; private_key_jwt recommended for token endpoint auth"}),"\n",(0,i.jsx)(n.li,{children:"FIPS: 140\u20113 alignment where applicable; hardened OAuth client path; TLS 1.2+ (prefer 1.3), AES\u2011GCM suites"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"frequently-asked-security",children:"Frequently asked (security)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Where does identity come from? From the OIDC ID token; ",(0,i.jsx)(n.code,{children:"sub"})," is the person\u2019s subject. The BFF stores it in the session as ",(0,i.jsx)(n.code,{children:"user_id"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Why is a backend service token\u2019s ",(0,i.jsx)(n.code,{children:"sub"})," not the user? Those tokens often have ",(0,i.jsx)(n.code,{children:"sub = client_id"})," (for example, ",(0,i.jsx)(n.code,{children:"bff-server"}),"). They authenticate the BFF to backends and never reach the browser."]}),"\n",(0,i.jsx)(n.li,{children:"Can the browser ever see tokens? No \u2014 only cookies. This prevents token exfiltration and simplifies zero\u2011trust enforcement."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"deepdives-and-artifacts",children:"Deep\u2011dives and artifacts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"BFF \u2192 Security Model: ../../services/bff/explanation/security-model.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 Session binding & CSRF: ../../services/bff/reference/session-binding-csrf.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 ForwardAuth at the edge: ../../services/bff/reference/traefik-forwardauth.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 FAPI support: ../../services/bff/reference/fapi-support.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 FIPS 140\u20113 posture: ../../services/bff/reference/fips-140-3.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 Observability: ../../services/bff/reference/observability.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 Logging & events: ../../services/bff/reference/logging-events.md"}),"\n",(0,i.jsx)(n.li,{children:"BFF \u2192 Health & metrics: ../../services/bff/reference/health-metrics.md"}),"\n",(0,i.jsx)(n.li,{children:"CRUD Service \u2192 mTLS (Design & Guide): ../../services/crud-service/reference/mtls_design.md"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u2014 For a visual walkthrough of the BFF, see: ../../services/bff/explanation/bff-visual-guide.md"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(96540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);