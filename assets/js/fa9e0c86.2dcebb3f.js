"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[5915],{28453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>c});var o=n(96540);const s={},i=o.createContext(s);function t(e){const r=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(i.Provider,{value:r},e.children)}},87944:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>p,contentTitle:()=>c,default:()=>l,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"services/bff/reference/pdp-mapping","title":"PDP endpoint mapping","description":"Purpose: map API paths/methods to resource/action with optional id extraction to build PDP context.","source":"@site/docs/services/bff/reference/pdp-mapping.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/pdp-mapping","permalink":"/empowernow_docs/docs/services/bff/reference/pdp-mapping","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/pdp-mapping.md","tags":[{"inline":true,"label":"service:bff","permalink":"/empowernow_docs/docs/tags/service-bff"},{"inline":true,"label":"type:reference","permalink":"/empowernow_docs/docs/tags/type-reference"},{"inline":true,"label":"roles:developer","permalink":"/empowernow_docs/docs/tags/roles-developer"},{"inline":true,"label":"roles:auditors","permalink":"/empowernow_docs/docs/tags/roles-auditors"}],"version":"current","frontMatter":{"id":"pdp-mapping","title":"PDP endpoint mapping","sidebar_label":"PDP mapping (pdp.yaml)","tags":["service:bff","type:reference","roles:developer","roles:auditors"]},"sidebar":"tutorialSidebar","previous":{"title":"Observability (Metrics, Tracing, Health)","permalink":"/empowernow_docs/docs/services/bff/reference/observability"},"next":{"title":"pdp.yaml Reference","permalink":"/empowernow_docs/docs/services/bff/reference/pdp-reference"}}');var s=n(74848),i=n(28453);const t={id:"pdp-mapping",title:"PDP endpoint mapping",sidebar_label:"PDP mapping (pdp.yaml)",tags:["service:bff","type:reference","roles:developer","roles:auditors"]},c=void 0,p={},d=[];function a(e){const r={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["Purpose: map API paths/methods to ",(0,s.jsx)(r.code,{children:"resource"}),"/",(0,s.jsx)(r.code,{children:"action"})," with optional id extraction to build PDP context."]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Config: ",(0,s.jsx)(r.code,{children:"ServiceConfigs/BFF/config/pdp.yaml"})," \u2192 ",(0,s.jsx)(r.code,{children:"endpoint_map"})]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Structure example"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:'endpoint_map:\r\n  /api/crud/workflow/start:\r\n    POST:\r\n      resource: "workflow"\r\n      action: "execute"\r\n      props:\r\n        workflow_name: "$.workflow_name"\r\n\r\n  /api/crud/workflow/status/{execution_id}:\r\n    GET:\r\n      resource: "workflow_execution"\r\n      id_from: "{execution_id}"\r\n      action: "read"\n'})}),"\n",(0,s.jsx)(r.p,{children:"Checklist"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Path must match exactly (with placeholders) and method must be present"}),"\n",(0,s.jsxs)(r.li,{children:["Use ",(0,s.jsx)(r.code,{children:"id_from"})," for ",(0,s.jsx)(r.code,{children:"{path}"})," params; use ",(0,s.jsx)(r.code,{children:"props"})," with JSONPath (",(0,s.jsx)(r.code,{children:"$.field"}),") for body extracts"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Validation quick-test"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Send a request and confirm PDP decision logs and metrics increment; 403 means mapping missing or deny"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["See also: ",(0,s.jsx)(r.code,{children:"../how-to/pdp-mapping-for-apis"}),", ",(0,s.jsx)(r.code,{children:"./routes-reference"})]})]})}function l(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);