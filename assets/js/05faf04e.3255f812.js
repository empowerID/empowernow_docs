"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[4198],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(96540);const r={},c=i.createContext(r);function l(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:n},e.children)}},66868:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"services/bff/reference/environment-index","title":"Environment Variables Index","description":"Sources","source":"@site/docs/services/bff/reference/environment-index.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/environment-index","permalink":"/empowernow_docs/docs/services/bff/reference/environment-index","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/environment-index.md","tags":[],"version":"current","frontMatter":{"title":"Environment Variables Index"},"sidebar":"tutorialSidebar","previous":{"title":"empowerid_endpoints.yaml Reference","permalink":"/empowernow_docs/docs/services/bff/reference/empowerid-endpoints-reference"},"next":{"title":"FAPI 2.0 Features \u2014 Verified Support and Configuration","permalink":"/empowernow_docs/docs/services/bff/reference/fapi-support"}}');var r=s(74848),c=s(28453);const l={title:"Environment Variables Index"},o=void 0,d={},t=[];function h(e){const n={code:"code",li:"li",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Sources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Docker Compose (",(0,r.jsx)(n.code,{children:"CRUDService/docker-compose-authzen4.yml"})," bff service)"]}),"\n",(0,r.jsx)(n.li,{children:"K8s manifests (if present)"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".env"})," for local development"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Highlights"}),"\n",(0,r.jsx)(n.p,{children:"OAuth / IdP"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_ISSUER"})," (URL): OIDC issuer base (public). Example: ",(0,r.jsx)(n.code,{children:"https://idp.ocg.../api/oidc"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_AUTHORIZATION_URL"})," (URL): Authorization endpoint for code flow."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_TOKEN_URL"})," (URL): Token endpoint (internal URL allowed in compose)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AUTH_CLIENT_ID"})," (string): OAuth client ID used by the BFF."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AUTH_CLIENT_SECRET"})," (secret): OAuth client secret; rotate via secrets manager."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_SCOPES"})," (string): Space\u2011delimited scopes; include ",(0,r.jsx)(n.code,{children:"offline_access"})," for refresh tokens."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"PAR / DPoP"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MS_BFF_PAR_ENABLED"})," (bool): Enable Pushed Authorization Requests. Default: ",(0,r.jsx)(n.code,{children:"true"})," in compose."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MS_BFF_DPOP_ENABLED"})," (bool): Enable DPoP sender\u2011constrained tokens. Default: ",(0,r.jsx)(n.code,{children:"true"})," in compose."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MS_BFF_TOKEN_AUTH_METHOD"})," (enum): Client auth at token endpoint: ",(0,r.jsx)(n.code,{children:"client_secret_post"})," | ",(0,r.jsx)(n.code,{children:"client_secret_basic"})," | ",(0,r.jsx)(n.code,{children:"private_key_jwt"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Cookie / Session"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_COOKIE_DOMAIN"})," (string): Cookie domain (e.g., ",(0,r.jsx)(n.code,{children:".ocg.labs.empowernow.ai"}),") for SSO across SPAs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_COOKIE_SECURE"})," (bool): Send cookies only over HTTPS. Default: ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_COOKIE_SAMESITE"})," (enum): ",(0,r.jsx)(n.code,{children:"Lax"})," | ",(0,r.jsx)(n.code,{children:"Strict"})," | ",(0,r.jsx)(n.code,{children:"None"}),". Default: ",(0,r.jsx)(n.code,{children:"Lax"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SESSION_LIFETIME"})," (seconds): Session TTL. Example: ",(0,r.jsx)(n.code,{children:"3600"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Callback / Redirects"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_DYNAMIC_CALLBACK"})," (bool): Use incoming origin for callback when same\u2011origin. Default: ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_CALLBACK_URL"})," (URL): Static fallback callback URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_DEFAULT_HOST"}),", ",(0,r.jsx)(n.code,{children:"BFF_DEFAULT_SCHEME"})," (string): Default host/scheme used in redirects."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_ALLOWED_REDIRECT_HOSTS"})," (CSV): Allowed redirect hosts to prevent open redirects."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ALLOWED_REDIRECT_ORIGINS"}),", ",(0,r.jsx)(n.code,{children:"ALLOWED_FRONTEND_ORIGINS"})," (CSV): Additional allowlists."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"CORS"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CORS__ALLOW_ORIGINS"})," (JSON array): List of allowed origins for CORS responses."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Keys / JWKS"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_JWT_SIGNING_KEY"})," (path): Path to PEM private key for private_key_jwt."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"KEYS_DIR"}),", ",(0,r.jsx)(n.code,{children:"BFF_KEYS_DIR"})," (path): Directory where PEM and JWKS are stored/served."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Security toggles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_JWT_VERIFY_SIGNATURE"})," (bool): Verify JWT signatures where applicable."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_JWT_VERIFY_AUDIENCE"})," (bool): Enforce ",(0,r.jsx)(n.code,{children:"aud"})," checks."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_JWT_VERIFY_ISSUER"})," (bool): Enforce ",(0,r.jsx)(n.code,{children:"iss"})," checks."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_JWT_VERIFY_EXPIRY"})," (bool): Enforce ",(0,r.jsx)(n.code,{children:"exp"})," checks."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_REDIS_ENCRYPT_SECRETS"})," (bool): Encrypt sensitive values before Redis storage."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_TOKEN_MANAGER_CONCURRENCY_SAFE"})," (bool): Enable stricter singleflight/concurrency guards."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Secrets / Salts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TOKEN_HASH_SALT"})," (secret or file pointer): Required at startup; used for hashing tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UA_HASH_SALT"})," (secret or file pointer): Hashing salt for user\u2011agent analytics."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CSRF_SECRET_KEY"})," (secret): HMAC key for CSRF tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"STATE_TOKEN_KEY"})," (secret): HMAC key for login state tokens."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Service discovery / URLs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_BASE_URL"})," (URL): External base URL for the BFF."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IDP_PUBLIC_BASE"})," (URL): Public base URL for IdP."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"REDIS_URL"})," (URL): Redis connection string."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Observability"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TELEMETRY_ENABLED"})," (bool): Enable OTEL tracing/metrics if libraries present."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OTLP_ENDPOINT"})," or ",(0,r.jsx)(n.code,{children:"OTEL_EXPORTER_OTLP_ENDPOINT"})," (URL): OTLP collector endpoint."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Kafka"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"KAFKA_*"}),": See service configs; BFF reads bootstrap servers and topic overrides."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Values syntax"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Booleans: ",(0,r.jsx)(n.code,{children:'"true" | "false"'})," (strings in compose). Numbers as plain integers."]}),"\n",(0,r.jsx)(n.li,{children:"CSV: comma\u2011separated list without spaces unless quoted."}),"\n",(0,r.jsxs)(n.li,{children:["JSON arrays: valid JSON string (e.g., ",(0,r.jsx)(n.code,{children:'\'["https://a","https://b"]\''}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"How\u2011to \u2192 Configure IdPs, Configure PDP, OpenTelemetry, Secret Rotation"}),"\n",(0,r.jsx)(n.li,{children:"Reference \u2192 Settings Reference, Observability (Metrics, Tracing, Health)"}),"\n",(0,r.jsx)(n.li,{children:"How\u2011to \u2192 Upstream TLS/mTLS to CRUD: ../how-to/enable-upstream-tls-to-crud.md"}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);