"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[1561],{28453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>o});var c=r(96540);const i={},n=c.createContext(i);function t(e){const s=c.useContext(n);return c.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),c.createElement(n.Provider,{value:s},e.children)}},52259:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"services/crud-service/secrets/observability","title":"Observability","description":"Audits, metrics, and traces for secrets flows","source":"@site/docs/services/crud-service/secrets/06-observability.md","sourceDirName":"services/crud-service/secrets","slug":"/services/crud-service/secrets/observability","permalink":"/empowernow_docs/docs/services/crud-service/secrets/observability","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/secrets/06-observability.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Observability","description":"Audits, metrics, and traces for secrets flows"},"sidebar":"tutorialSidebar","previous":{"title":"Security model","permalink":"/empowernow_docs/docs/services/crud-service/secrets/security-model"},"next":{"title":"Admin how\u2011to","permalink":"/empowernow_docs/docs/services/crud-service/secrets/admin-howto"}}');var i=r(74848),n=r(28453);const t={title:"Observability",description:"Audits, metrics, and traces for secrets flows"},o=void 0,d={},l=[];function a(e){const s={code:"code",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"Auditing"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Kafka topics: ",(0,i.jsx)(s.code,{children:"crud.secrets"}),", ",(0,i.jsx)(s.code,{children:"crud.secrets.audit"})]}),"\n",(0,i.jsxs)(s.li,{children:["Records include ",(0,i.jsx)(s.code,{children:"resource_ref"})," HMAC (non\u2011leaky) when ",(0,i.jsx)(s.code,{children:"TENANT_SALT"})," set"]}),"\n",(0,i.jsx)(s.li,{children:"Access controls: restrict topics to audit processors; retention policy documented"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Metrics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Prometheus counters/histograms for decisions, provider calls, errors"}),"\n",(0,i.jsxs)(s.li,{children:["Example metrics table:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"secrets_decisions_total{effect}"})," \u2014 count of PDP decisions"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"provider_request_latency_seconds{provider,op}"})," \u2014 histogram"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"secrets_errors_total{code}"})," \u2014 error counter"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Traces"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"OTel spans across PEP \u2192 PDP \u2192 provider; correlation IDs in logs and events"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Dashboards and alerts (Admin)"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Provide dashboard JSON and alert thresholds (p95 latency, error rate > 1%)"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"QA generation"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Use dev SSE and API to synthesize events; verify trace stitching via ",(0,i.jsx)(s.code,{children:"trace_id"})]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);