"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[4496],{28453:(e,r,s)=>{s.d(r,{R:()=>c,x:()=>t});var n=s(96540);const i={},o=n.createContext(i);function c(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(o.Provider,{value:r},e.children)}},58744:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"services/experience/security-reference","title":"Plugins Security Reference","description":"CSP, Permissions-Policy, Trusted Types (report-only), Vary headers, and same-origin ESM model for Experience plugins.","source":"@site/docs/services/experience/security-reference.md","sourceDirName":"services/experience","slug":"/services/experience/security-reference","permalink":"/empowernow_docs/docs/services/experience/security-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/security-reference.md","tags":[],"version":"current","frontMatter":{"title":"Plugins Security Reference","sidebar_label":"Plugins Security Reference","description":"CSP, Permissions-Policy, Trusted Types (report-only), Vary headers, and same-origin ESM model for Experience plugins."},"sidebar":"tutorialSidebar","previous":{"title":"Security & Compliance","permalink":"/empowernow_docs/docs/services/experience/security-compliance"},"next":{"title":"Plugins Versioning & Compatibility","permalink":"/empowernow_docs/docs/services/experience/versioning-compatibility"}}');var i=s(74848),o=s(28453);const c={title:"Plugins Security Reference",sidebar_label:"Plugins Security Reference",description:"CSP, Permissions-Policy, Trusted Types (report-only), Vary headers, and same-origin ESM model for Experience plugins."},t=void 0,l={},d=[{value:"CSP (strict)",id:"csp-strict",level:2},{value:"Permissions-Policy (deny-by-default)",id:"permissions-policy-deny-by-default",level:2},{value:"Trusted Types (report-only)",id:"trusted-types-report-only",level:2},{value:"Vary headers",id:"vary-headers",level:2},{value:"Same-origin ESM",id:"same-origin-esm",level:2}];function a(e){const r={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h2,{id:"csp-strict",children:"CSP (strict)"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; font-src 'self'; connect-src 'self'; frame-ancestors 'none'; base-uri 'none'; object-src 'none'; require-trusted-types-for 'script'; trusted-types react empowernow-sdk;"})}),"\n",(0,i.jsx)(r.h2,{id:"permissions-policy-deny-by-default",children:"Permissions-Policy (deny-by-default)"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"accelerometer=(), autoplay=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()"})}),"\n",(0,i.jsx)(r.h2,{id:"trusted-types-report-only",children:"Trusted Types (report-only)"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Enabled in report-only mode to surface unexpected sinks early without break risk"}),"\n",(0,i.jsx)(r.li,{children:"Configure report endpoint when ready; track and remediate violations"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"vary-headers",children:"Vary headers"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"Vary: Cookie, X-Plugin-Id"})," on manifests and bundles ensures correct caching per session/plugin"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"same-origin-esm",children:"Same-origin ESM"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Bundles imported from ",(0,i.jsx)(r.code,{children:"/api/plugins/bundle"})," keep CSP intact; no external scripts or globals"]}),"\n",(0,i.jsxs)(r.li,{children:["Root-jail for bundles at ",(0,i.jsx)(r.code,{children:"/app/plugins"}),"; optional integrity hash (",(0,i.jsx)(r.code,{children:"sha256"}),") enforced by BFF"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["See also: Canonical plugin reference ",(0,i.jsx)(r.code,{children:"./experience_plugins"}),", Ops Runbook ",(0,i.jsx)(r.code,{children:"./ops-runbook"}),"."]})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);