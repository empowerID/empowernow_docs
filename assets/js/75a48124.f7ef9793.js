"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[203],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(96540);const c={},s=r.createContext(c);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},65062:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"services/experience/overview","title":"Experience React App \u2014 Overview & Spec","description":"This page consolidates the EmpowerNow React App specifications for the Experience end\u2011user portal and adapts them for operational reference.","source":"@site/docs/services/experience/overview.md","sourceDirName":"services/experience","slug":"/services/experience/overview","permalink":"/empowernow_docs/docs/services/experience/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/overview.md","tags":[],"version":"current","frontMatter":{"title":"Experience React App \u2014 Overview & Spec","sidebar_label":"React App (Spec)"},"sidebar":"tutorialSidebar","previous":{"title":"Plugins Ops Runbook","permalink":"/empowernow_docs/docs/services/experience/ops-runbook"},"next":{"title":"Performance Budgets","permalink":"/empowernow_docs/docs/services/experience/performance-budgets"}}');var c=i(74848),s=i(28453);const o={title:"Experience React App \u2014 Overview & Spec",sidebar_label:"React App (Spec)"},t=void 0,d={},l=[{value:"Architecture",id:"architecture",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Configuration (Vite)",id:"configuration-vite",level:2},{value:"Authentication &amp; Session",id:"authentication--session",level:2},{value:"API access pattern",id:"api-access-pattern",level:2},{value:"Build &amp; Deployment",id:"build--deployment",level:2},{value:"Security &amp; PDP",id:"security--pdp",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"This page consolidates the EmpowerNow React App specifications for the Experience end\u2011user portal and adapts them for operational reference."}),"\n",(0,c.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"React 18 + TypeScript 5, Vite build, Nginx static hosting"}),"\n",(0,c.jsxs)(n.li,{children:["Design system: ",(0,c.jsx)(n.code,{children:"@empowernow/ui"})," (Neon Flux)"]}),"\n",(0,c.jsxs)(n.li,{children:["Auth: ",(0,c.jsx)(n.code,{children:"@empowernow/bff-auth-react"}),"; OAuth/OIDC flows terminate at the BFF"]}),"\n",(0,c.jsxs)(n.li,{children:["Transport: all requests via BFF ",(0,c.jsx)(n.code,{children:"/api/**"}),"; SSE for realtime"]}),"\n"]}),"\n",(0,c.jsx)(n.mermaid,{value:"flowchart LR\r\n  UI[Experience SPA] --\x3e|/api (cookie)| BFF[BFF]\r\n  UI --\x3e|/auth| BFF\r\n  BFF --\x3e|/access/v1| PDP[PDP]\r\n  BFF --\x3e|Bearer server| SVC[Services]\r\n  BFF --\x3e|/oidc| IDP[IdP]"}),"\n",(0,c.jsx)(n.p,{children:"Key guidance:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Same\u2011origin preferred; set ",(0,c.jsx)(n.code,{children:"VITE_BFF_BASE_URL"})," empty and use relative ",(0,c.jsx)(n.code,{children:"/api"})]}),"\n",(0,c.jsx)(n.li,{children:"Never call services directly; route through BFF for authZ and policy"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Required: ",(0,c.jsx)(n.code,{children:"react"}),", ",(0,c.jsx)(n.code,{children:"react-dom"}),", ",(0,c.jsx)(n.code,{children:"react-router-dom@7"}),", ",(0,c.jsx)(n.code,{children:"@empowernow/ui"}),", ",(0,c.jsx)(n.code,{children:"@empowernow/bff-auth-react"}),", ",(0,c.jsx)(n.code,{children:"@tanstack/react-query"}),", ",(0,c.jsx)(n.code,{children:"axios"})]}),"\n",(0,c.jsxs)(n.li,{children:["Optional: ",(0,c.jsx)(n.code,{children:"@empowernow/common"}),", ",(0,c.jsx)(n.code,{children:"monaco-editor"}),", ",(0,c.jsx)(n.code,{children:"zod"}),"/",(0,c.jsx)(n.code,{children:"ajv"})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"configuration-vite",children:"Configuration (Vite)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"VITE_OIDC_AUTHORITY"}),", ",(0,c.jsx)(n.code,{children:"VITE_OIDC_CLIENT_ID"}),", ",(0,c.jsx)(n.code,{children:"VITE_OIDC_SCOPE"}),", optional ",(0,c.jsx)(n.code,{children:"VITE_OIDC_RESOURCE"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"VITE_BFF_BASE_URL"})," (empty for same\u2011origin)"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"authentication--session",children:"Authentication & Session"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Wrap app with ",(0,c.jsx)(n.code,{children:"BffAuthProvider"})]}),"\n",(0,c.jsx)(n.li,{children:"BFF manages session cookie; browser never sees tokens"}),"\n",(0,c.jsxs)(n.li,{children:["Check ",(0,c.jsx)(n.code,{children:"/api/auth/session"})," on load/focus; login via BFF"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"api-access-pattern",children:"API access pattern"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Axios instance with ",(0,c.jsx)(n.code,{children:"withCredentials: true"}),", base ",(0,c.jsx)(n.code,{children:"/api"})]}),"\n",(0,c.jsx)(n.li,{children:"TanStack Query for caching/invalidation"}),"\n",(0,c.jsx)(n.li,{children:"Prefer SSE for live counters/events"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"build--deployment",children:"Build & Deployment"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Build to ",(0,c.jsx)(n.code,{children:"dist/"}),"; Nginx SPA fallback (",(0,c.jsx)(n.code,{children:"try_files"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:["Traefik routes exclude ",(0,c.jsx)(n.code,{children:"/api/"}),", ",(0,c.jsx)(n.code,{children:"/auth/"}),", streaming paths from SPA router"]}),"\n",(0,c.jsxs)(n.li,{children:["BFF owns ",(0,c.jsx)(n.code,{children:"/api/**"})," and ",(0,c.jsx)(n.code,{children:"/auth/**"})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"security--pdp",children:"Security & PDP"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"No direct service URLs; cookie\u2011only"}),"\n",(0,c.jsx)(n.li,{children:"PDP everywhere: route/menu/widgets/actions gated via BFF PDP endpoints"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"See also: Experience Plugins, Handover checklist."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);