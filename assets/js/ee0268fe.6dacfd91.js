"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[6482],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(96540);const i={},c=r.createContext(i);function l(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(c.Provider,{value:n},e.children)}},92527:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"services/crud-service/secrets/SECRETS_MIGRATION_GUIDE","title":"SECRETS_MIGRATION_GUIDE","description":"Secrets Migration Guide: Canonical URIs and Pointers (OpenBao, File/CSI, DB)","source":"@site/docs/services/crud-service/secrets/SECRETS_MIGRATION_GUIDE.md","sourceDirName":"services/crud-service/secrets","slug":"/services/crud-service/secrets/SECRETS_MIGRATION_GUIDE","permalink":"/empowernow_docs/docs/services/crud-service/secrets/SECRETS_MIGRATION_GUIDE","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/secrets/SECRETS_MIGRATION_GUIDE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"OpenBao to Production \u2014 HA, Load Balancing, and Integration","permalink":"/empowernow_docs/docs/services/crud-service/secrets/SECRETS_HA_OPENBAO"},"next":{"title":"Secrets PDP enrichment","permalink":"/empowernow_docs/docs/services/crud-service/secrets/pdp-enrichment"}}');var i=s(74848),c=s(28453);const l={},d=void 0,t={},o=[{value:"Secrets Migration Guide: Canonical URIs and Pointers (OpenBao, File/CSI, DB)",id:"secrets-migration-guide-canonical-uris-and-pointers-openbao-filecsi-db",level:2},{value:"TL;DR \u2014 What to use where",id:"tldr--what-to-use-where",level:3},{value:"Canonical Secret URIs \u2014 quick grammar",id:"canonical-secret-uris--quick-grammar",level:3},{value:"How resolution works (overview)",id:"how-resolution-works-overview",level:3},{value:"Compose/K8s prerequisites",id:"composek8s-prerequisites",level:3},{value:"Migration steps (from .env to pointers)",id:"migration-steps-from-env-to-pointers",level:3},{value:"Concrete mappings (examples)",id:"concrete-mappings-examples",level:3},{value:"Seeding and verification (dev)",id:"seeding-and-verification-dev",level:3},{value:"Creating app\u2011managed credentials",id:"creating-appmanaged-credentials",level:3},{value:"Kubernetes CSI notes",id:"kubernetes-csi-notes",level:3},{value:"Security hardening (prod)",id:"security-hardening-prod",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"Optional enhancement",id:"optional-enhancement",level:3},{value:"Team checklist (copy/paste)",id:"team-checklist-copypaste",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"secrets-migration-guide-canonical-uris-and-pointers-openbao-filecsi-db",children:"Secrets Migration Guide: Canonical URIs and Pointers (OpenBao, File/CSI, DB)"}),"\n",(0,i.jsxs)(n.p,{children:["Audience: Developers and DevOps. Purpose: replace plain .env secrets with secure pointers and canonical Secret URIs that resolve at runtime through the service\u2019s ",(0,i.jsx)(n.code,{children:"VaultService"})," PEP."]}),"\n",(0,i.jsx)(n.h3,{id:"tldr--what-to-use-where",children:"TL;DR \u2014 What to use where"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Platform/service secrets (rotatable, centralized)"})," \u2192 ",(0,i.jsx)(n.strong,{children:"OpenBao KVv2"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pointer: ",(0,i.jsx)(n.code,{children:"openbao+kv2://secret/<path>#<KEY>[?version=N]"})]}),"\n",(0,i.jsx)(n.li,{children:"Examples: encryption keys, third\u2011party API keys, service bus connection strings."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Bootstrap secrets (must exist before app can call Vault)"})," \u2192 ",(0,i.jsx)(n.strong,{children:"File (Docker Secret / K8s CSI)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pointer: ",(0,i.jsx)(n.code,{children:"file:primary:<name>"})," (defaults to ",(0,i.jsx)(n.code,{children:"/run/secrets/<name>"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Examples: DB connection string for Alembic, early SMTP password in dev."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"App\u2011managed OAuth/API credentials (user\u2011created in UI/API)"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Encrypted DB credential"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pointer: ",(0,i.jsx)(n.code,{children:"db:credentials:<uuid>"})]}),"\n",(0,i.jsxs)(n.li,{children:["Examples: Jira/ServiceNow OAuth clients created via ",(0,i.jsx)(n.code,{children:"/api/crud/credentials"})," (Connections page)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Local\u2011only prototyping"})," \u2192 ",(0,i.jsx)(n.strong,{children:"YAML (dev)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pointer: ",(0,i.jsx)(n.code,{children:"yaml://secret/<path>#<KEY>"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"canonical-secret-uris--quick-grammar",children:"Canonical Secret URIs \u2014 quick grammar"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Format: ",(0,i.jsx)(n.code,{children:"provider[+engine]://mount/path#fragment?params"})]}),"\n",(0,i.jsxs)(n.li,{children:["Lowercase provider/engine; ",(0,i.jsx)(n.code,{children:"mount"})," is first path segment; case\u2011sensitive path."]}),"\n",(0,i.jsxs)(n.li,{children:["KVv2 version pin: ",(0,i.jsx)(n.code,{children:"...?version=N"})," (never auto\u2011forward when pinned)."]}),"\n",(0,i.jsxs)(n.li,{children:["Examples:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"openbao+kv2://secret/crud#CREDENTIAL_ENCRYPTION_KEY"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"openbao+kv2://secret/azure/msgraph#CLIENT_SECRET?version=3"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"file:primary:db-conn-string"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"db:credentials:0c1c2a22-1b71-44a2-8b2a-1b4d4a8f8d06"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-resolution-works-overview",children:"How resolution works (overview)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All pointers flow through ",(0,i.jsx)(n.code,{children:"VaultService"})," (PEP) for parse/normalize, tenant\u2011guard checks, PDP grant enforcement, provider fetch, and audits."]}),"\n",(0,i.jsxs)(n.li,{children:["Providers included: ",(0,i.jsx)(n.code,{children:"openbao"})," (KVv2), ",(0,i.jsx)(n.code,{children:"hashicorp"})," (KVv2), ",(0,i.jsx)(n.code,{children:"file"}),", ",(0,i.jsx)(n.code,{children:"db"}),", ",(0,i.jsx)(n.code,{children:"yaml"})," (dev)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"composek8s-prerequisites",children:"Compose/K8s prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Set once (already present in ",(0,i.jsx)(n.code,{children:"docker-compose-authzen4.yml"})," for ",(0,i.jsx)(n.code,{children:"crud-service"}),"):","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"VAULT_URL"}),", ",(0,i.jsx)(n.code,{children:"VAULT_TOKEN"}),", ",(0,i.jsx)(n.code,{children:"FILE_MOUNT_PATH=/run/secrets"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TENANT_ID=dev"}),", ",(0,i.jsx)(n.code,{children:"TENANT_ALLOWED_MOUNTS=secret"})]}),"\n",(0,i.jsxs)(n.li,{children:["Provide a non\u2011leaky salt: ",(0,i.jsx)(n.code,{children:"SECRET_TENANT_SALT=..."})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Kubernetes CSI: mount secrets under a path (e.g., ",(0,i.jsx)(n.code,{children:"/mnt/secrets-store"}),") and set ",(0,i.jsx)(n.code,{children:"FILE_MOUNT_PATH=/mnt/secrets-store"})," in the workload."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"migration-steps-from-env-to-pointers",children:"Migration steps (from .env to pointers)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Inventory all secret\u2011bearing variables in your ",(0,i.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Classify each as one of:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Bootstrap (needed before the app can reach Vault)"}),"\n",(0,i.jsx)(n.li,{children:"Platform/service (rotatable, centralized)"}),"\n",(0,i.jsx)(n.li,{children:"App\u2011managed OAuth/API credential (created by users)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bootstrap \u2192 Docker Secret / K8s CSI (File provider)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Place secret material in ",(0,i.jsx)(n.code,{children:"CRUDService/config_secrets/<name>.txt"})," (Compose) or mount via CSI."]}),"\n",(0,i.jsxs)(n.li,{children:["Declare/mount under ",(0,i.jsx)(n.code,{children:"secrets:"})," in Compose (or CSI volume in K8s)."]}),"\n",(0,i.jsxs)(n.li,{children:["Reference with ",(0,i.jsx)(n.code,{children:"file:primary:<name>"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Platform/service \u2192 OpenBao KVv2"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Seed values via the Secrets API (below) or OpenBao UI/CLI."}),"\n",(0,i.jsxs)(n.li,{children:["Reference with ",(0,i.jsx)(n.code,{children:"openbao+kv2://secret/<path>#<KEY>[?version=N]"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"App\u2011managed OAuth/API \u2192 DB credential"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create via Visual Designer or API ",(0,i.jsx)(n.code,{children:"POST /api/crud/credentials"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Reference with ",(0,i.jsx)(n.code,{children:"db:credentials:<uuid>"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Replace literals in your ",(0,i.jsx)(n.code,{children:".env"}),"/compose env with the new pointers."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"concrete-mappings-examples",children:"Concrete mappings (examples)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PostgreSQL (bootstrap)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"POSTGRES_USER=file:primary:db-user\r\nPOSTGRES_PASSWORD=file:primary:db-password\r\nDATABASE_URL=file:primary:db-conn-string\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Encryption key (platform)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"CREDENTIAL_ENCRYPTION_KEY_POINTER=openbao+kv2://secret/crud#CREDENTIAL_ENCRYPTION_KEY\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OpenAI (platform)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"OPENAI_API_KEY=openbao+kv2://secret/ai/openai#API_KEY\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Service Bus (platform)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"SERVICE_BUS_CONNECTION_STRING=openbao+kv2://secret/azure/servicebus#CONNECTION_STRING\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SMTP (choose one)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"# Bootstrap via file (good for bring\u2011up)\r\nSMTP_PASSWORD=file:primary:smtp-password\r\n# Or centralized in OpenBao\r\n# SMTP_PASSWORD=openbao+kv2://secret/email/smtp#PASSWORD\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"App\u2011managed OAuth credential (created in UI/API)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"MY_SYSTEM_CREDENTIAL_POINTER=db:credentials:<uuid>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"seeding-and-verification-dev",children:"Seeding and verification (dev)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create/Update a KVv2 secret via the CRUDService Secrets API:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -s -X POST "http://localhost:8000/api/secrets" \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"uri":"openbao+kv2://secret/crud#CREDENTIAL_ENCRYPTION_KEY","value":"<base64-or-random>"}\'\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Read a value to verify pointer resolution (dev\u2011mode guards relaxed):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -s "http://localhost:8000/api/secrets/value?uri=openbao+kv2://secret/crud#CREDENTIAL_ENCRYPTION_KEY"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Watch live secret events during testing (SSE):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -N "http://localhost:8000/api/secrets/events"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"creating-appmanaged-credentials",children:"Creating app\u2011managed credentials"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a credential via API:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -s -X POST "http://localhost:8000/api/crud/credentials" \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{\r\n    "name":"jira-api",\r\n    "type":"oauth2",\r\n    "data":{\r\n      "client_id":"...",\r\n      "client_secret":"...",\r\n      "auth_url":"...",\r\n      "token_url":"...",\r\n      "redirect_url":"https://automate.ocg.labs.empowernow.ai/auth/callback",\r\n      "scope":"read write"\r\n    }\r\n  }\'\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The response contains ",(0,i.jsx)(n.code,{children:"id"}),". Reference it as: ",(0,i.jsx)(n.code,{children:"db:credentials:<id>"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Frontend helper (Visual Designer):"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"credentialPointer(id) // \u2192 db:credentials:<id>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"kubernetes-csi-notes",children:"Kubernetes CSI notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Mount secrets with Secrets Store CSI to a path such as ",(0,i.jsx)(n.code,{children:"/mnt/secrets-store"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"FILE_MOUNT_PATH=/mnt/secrets-store"})," in the workload env."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"file:primary:<name>"})," to reference mounted keys/files."]}),"\n",(0,i.jsxs)(n.li,{children:["Prefer ",(0,i.jsx)(n.code,{children:"openbao+kv2://..."})," for platform secrets when you want versioning/rotation and central management."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"security-hardening-prod",children:"Security hardening (prod)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable API guards in ",(0,i.jsx)(n.code,{children:"crud-service"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SECRETS_API_REQUIRE_AUTH=true"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SECRETS_ENFORCE_SCOPES=true"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ENABLE_AUTHORIZATION=true"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Keep ",(0,i.jsx)(n.code,{children:"TENANT_ALLOWED_MOUNTS=secret"}),"; set a strong ",(0,i.jsx)(n.code,{children:"SECRET_TENANT_SALT"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Prefer OpenBao over YAML/file for long\u2011term storage (file is best for bootstrap only)."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TENANT_MOUNT_MISMATCH"}),"/400 \u2192 your URI ",(0,i.jsx)(n.code,{children:"mount"})," isn\u2019t allowed; check ",(0,i.jsx)(n.code,{children:"TENANT_ALLOWED_MOUNTS"})," and tenant id."]}),"\n",(0,i.jsxs)(n.li,{children:["KVv2 ",(0,i.jsx)(n.code,{children:"?version=N"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Soft\u2011deleted \u2192 typed error (HTTP 409) in provider tests."}),"\n",(0,i.jsx)(n.li,{children:"Hard\u2011destroyed \u2192 typed error (HTTP 409) in provider tests."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"file:"})," pointers:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure the file exists under ",(0,i.jsx)(n.code,{children:"FILE_MOUNT_PATH"})," (",(0,i.jsx)(n.code,{children:"/run/secrets"})," in Compose; your CSI mount in K8s)."]}),"\n",(0,i.jsx)(n.li,{children:"For Windows dev, ensure path mappings do not interfere with container mount."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"optional-enhancement",children:"Optional enhancement"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SSE payloads from ",(0,i.jsx)(n.code,{children:"/api/secrets/events"})," can be enriched with ",(0,i.jsx)(n.code,{children:"kv_version"})," and ",(0,i.jsx)(n.code,{children:"resource_ref"})," for richer live views in UIs. Not required for analytics queries, but helpful for observability."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"team-checklist-copypaste",children:"Team checklist (copy/paste)"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Inventory .env secrets and classify (bootstrap / platform / app\u2011managed)."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Bootstrap \u2192 Docker Secret / K8s CSI; reference with ",(0,i.jsx)(n.code,{children:"file:primary:<name>"}),"; set ",(0,i.jsx)(n.code,{children:"FILE_MOUNT_PATH"}),"."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Platform \u2192 OpenBao KVv2; seed via Secrets API; reference with ",(0,i.jsx)(n.code,{children:"openbao+kv2://..."}),"."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","App\u2011managed \u2192 create via ",(0,i.jsx)(n.code,{children:"/api/crud/credentials"}),"; reference ",(0,i.jsx)(n.code,{children:"db:credentials:<uuid>"}),"."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Replace literals in ",(0,i.jsx)(n.code,{children:".env"}),"/compose env with pointers."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify with ",(0,i.jsx)(n.code,{children:"/api/secrets/value?uri=..."})," and application flows; monitor ",(0,i.jsx)(n.code,{children:"/api/secrets/events"})," during testing."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","In prod, enable secrets API auth/scope enforcement and PDP PEP gate."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"CRUDService/docker-compose-authzen4.yml"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CRUDService/src/services/vault_service.py"})," (PEP)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CRUDService/src/vault_strategies/openbao_vault_strategy.py"}),", ",(0,i.jsx)(n.code,{children:".../db_vault_strategy.py"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CRUDService/src/api/secrets_routes.py"})," (Secrets API)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CRUDService/docs/secrets_v4_design.md"})," (design rationale, canonicalization, audits, grants)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);