"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[505],{14084:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"services/bff/how-to/prometheus-grafana","title":"Prometheus & Grafana for the BFF/PDP","description":"Metrics (verified)","source":"@site/docs/services/bff/how-to/prometheus-grafana.md","sourceDirName":"services/bff/how-to","slug":"/services/bff/how-to/prometheus-grafana","permalink":"/empowernow_docs/docs/services/bff/how-to/prometheus-grafana","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/how-to/prometheus-grafana.md","tags":[],"version":"current","frontMatter":{"title":"Prometheus & Grafana for the BFF/PDP"},"sidebar":"tutorialSidebar","previous":{"title":"PKCE/Redis health","permalink":"/empowernow_docs/docs/services/bff/how-to/pkce-redis-health"},"next":{"title":"Protect Endpoints (dependencies and decorators)","permalink":"/empowernow_docs/docs/services/bff/how-to/protect-endpoints"}}');var o=t(74848),n=t(28453);const c={title:"Prometheus & Grafana for the BFF/PDP"},i=void 0,a={},d=[];function l(e){const s={code:"code",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.p,{children:"Metrics (verified)"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["BFF exposes Prometheus counters and histograms in ",(0,o.jsx)(s.code,{children:"ms_bff_spike/ms_bff/src/metrics/__init__.py"})," (e.g., ",(0,o.jsx)(s.code,{children:"par_requests_total"}),", ",(0,o.jsx)(s.code,{children:"dpop_validation_failures_total"}),", OAuth flow timings)."]}),"\n",(0,o.jsxs)(s.li,{children:["PDP client logs service call success/error with elapsed times (",(0,o.jsx)(s.code,{children:"src/services/pdp_client.py"}),")."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Scraping"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Expose the BFF metrics endpoint (e.g., ",(0,o.jsx)(s.code,{children:"/metrics"}),") and point Prometheus at the service."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Dashboards"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Include panels for: auth success/error rates, ForwardAuth rejections, token refresh outcomes, PDP latency, cache hit/miss when enabled."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>i});var r=t(96540);const o={},n=r.createContext(o);function c(e){const s=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(n.Provider,{value:s},e.children)}}}]);