"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[1665],{4789:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>n,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"services/bff/how-to/llm-routing-observability","title":"Observe and Troubleshoot LLM Routing","description":"Observability","source":"@site/docs/services/bff/how-to/llm-routing-observability.md","sourceDirName":"services/bff/how-to","slug":"/services/bff/how-to/llm-routing-observability","permalink":"/empowernow_docs/docs/services/bff/how-to/llm-routing-observability","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/how-to/llm-routing-observability.md","tags":[{"inline":true,"label":"service:bff","permalink":"/empowernow_docs/docs/tags/service-bff"},{"inline":true,"label":"area:llm","permalink":"/empowernow_docs/docs/tags/area-llm"},{"inline":true,"label":"feature:dynamic-model-routing","permalink":"/empowernow_docs/docs/tags/feature-dynamic-model-routing"}],"version":"current","frontMatter":{"title":"Observe and Troubleshoot LLM Routing","tags":["service:bff","area:llm","feature:dynamic-model-routing"]},"sidebar":"tutorialSidebar","previous":{"title":"Enable Dynamic Model Routing","permalink":"/empowernow_docs/docs/services/bff/how-to/llm-routing-enable"},"next":{"title":"Override Model Pricing","permalink":"/empowernow_docs/docs/services/bff/how-to/llm-routing-pricing"}}');var s=r(74848),i=r(28453);const n={title:"Observe and Troubleshoot LLM Routing",tags:["service:bff","area:llm","feature:dynamic-model-routing"]},l=void 0,c={},a=[{value:"Observability",id:"observability",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const o={code:"code",h2:"h2",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h2,{id:"observability",children:"Observability"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["Headers: ",(0,s.jsx)(o.code,{children:"x-aria-decision-id"}),", ",(0,s.jsx)(o.code,{children:"x-aria-model-selected"}),", ",(0,s.jsx)(o.code,{children:"x-aria-model-rerouted"})]}),"\n",(0,s.jsxs)(o.li,{children:["Suggested metrics: ",(0,s.jsx)(o.code,{children:"bff_llm_model_downgrades_total{reason}"})]}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["403 with ",(0,s.jsx)(o.code,{children:"deny"}),": check PDP allowlists (",(0,s.jsx)(o.code,{children:"constraints.model.allow"}),", ",(0,s.jsx)(o.code,{children:"constraints.egress.allow"}),")"]}),"\n",(0,s.jsxs)(o.li,{children:["402 budget: all candidates unaffordable; lower ",(0,s.jsx)(o.code,{children:"max_tokens"})," or adjust pricing/budget"]}),"\n",(0,s.jsx)(o.li,{children:"No reroute header: requested model was allowed within budget (no reroute)"}),"\n"]})]})}function u(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,o,r)=>{r.d(o,{R:()=>n,x:()=>l});var t=r(96540);const s={},i=t.createContext(s);function n(e){const o=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);