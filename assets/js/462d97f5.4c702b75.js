"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[5820],{6025:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"services/pdp/explanation/application_boundary_enforcement","title":"Application Boundary Enforcement \u2014 Prevent Cross-App Leakage","description":"Canonical reference: scopedpolicydesign.md. This doc explains how we enforce application boundaries during policy authoring and loading.","source":"@site/docs/services/pdp/explanation/application_boundary_enforcement.md","sourceDirName":"services/pdp/explanation","slug":"/services/pdp/explanation/application_boundary_enforcement","permalink":"/empowernow_docs/docs/services/pdp/explanation/application_boundary_enforcement","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/pdp/explanation/application_boundary_enforcement.md","tags":[],"version":"current","frontMatter":{}}');var o=i(74848),a=i(28453);const s={},t="Application Boundary Enforcement \u2014 Prevent Cross-App Leakage",c={},l=[{value:"Responsibilities",id:"responsibilities",level:2},{value:"Components &amp; relations",id:"components--relations",level:2},{value:"Validation flow",id:"validation-flow",level:2},{value:"Best practices for authors",id:"best-practices-for-authors",level:2},{value:"Typical validation errors (and how to fix)",id:"typical-validation-errors-and-how-to-fix",level:2}];function p(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"application-boundary-enforcement--prevent-cross-app-leakage",children:"Application Boundary Enforcement \u2014 Prevent Cross-App Leakage"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Canonical reference: ",(0,o.jsx)(n.code,{children:"scoped_policy_design.md"}),". This doc explains how we enforce application boundaries during policy authoring and loading."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"responsibilities",children:"Responsibilities"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Validate resources/actions belong to the application schema"}),"\n",(0,o.jsx)(n.li,{children:"Detect suspicious cross-application references in expressions"}),"\n",(0,o.jsx)(n.li,{children:"Produce actionable errors/warnings for authors"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"components--relations",children:"Components & relations"}),"\n",(0,o.jsx)(n.mermaid,{value:"classDiagram\r\n  class ApplicationBoundaryEnforcer {\r\n    +validate_policy_boundaries(policy, app_id) : ValidationResult\r\n    -_validate_rule_boundaries(rule, app_id, schema) : List[str]\r\n    -_validate_expression_boundaries(policy, app_id) : List[str]\r\n  }\r\n  class ValidationResult {\r\n    +valid: bool\r\n    +errors: string[]\r\n    +warnings: string[]\r\n  }\r\n  class ApplicationRegistry {\r\n    +load_application_schema(app_id) : ApplicationSchema\r\n  }\r\n  class ApplicationSchema {\r\n    +resource_types: string[]\r\n    +actions: string[]\r\n  }\r\n\r\n  ApplicationBoundaryEnforcer --\x3e ApplicationRegistry\r\n  ApplicationBoundaryEnforcer --\x3e ValidationResult\r\n  ApplicationRegistry --\x3e ApplicationSchema"}),"\n",(0,o.jsx)(n.h2,{id:"validation-flow",children:"Validation flow"}),"\n",(0,o.jsx)(n.mermaid,{value:"flowchart LR\r\n  A[Policy YAML] --\x3e B[Load for app_id]\r\n  B --\x3e C[BoundaryEnforcer.validate]\r\n  C --\x3e D{Resources in schema?}\r\n  D -- no --\x3e E[Error: unknown resource]\r\n  D -- yes --\x3e F{Actions in schema?}\r\n  F -- no --\x3e G[Error: unknown action]\r\n  F -- yes --\x3e H[Scan expressions for cross-app refs]\r\n  H --\x3e I{Suspicious pattern?}\r\n  I -- yes --\x3e J[Error/Warning with location]\r\n  I -- no --\x3e K[ValidationResult: valid]"}),"\n",(0,o.jsx)(n.h2,{id:"best-practices-for-authors",children:"Best practices for authors"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Keep application schemas accurate and minimal"}),"\n",(0,o.jsx)(n.li,{children:"Avoid hardcoding IDs from other applications in expressions"}),"\n",(0,o.jsxs)(n.li,{children:["Prefer ",(0,o.jsx)(n.code,{children:"MATCHES"})," with path attributes over ad-hoc path checks"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"typical-validation-errors-and-how-to-fix",children:"Typical validation errors (and how to fix)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Resource not in schema:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Error: ",(0,o.jsx)(n.code,{children:"Resource 'hr_salary_data' not defined in application 'sharepoint-prod'"})]}),"\n",(0,o.jsx)(n.li,{children:"Fix: add to app schema if legitimate, or move rule to correct application."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Action not in schema:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Error: ",(0,o.jsx)(n.code,{children:"Action 'purge' not defined in application 'sharepoint-prod'"})]}),"\n",(0,o.jsx)(n.li,{children:"Fix: add action to schema or rename to an allowed action."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Suspicious cross-app reference:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Error: ",(0,o.jsx)(n.code,{children:"Expression may contain cross-application reference: 'resource.properties.hr_ssn ...'"})]}),"\n",(0,o.jsx)(n.li,{children:"Fix: remove cross-app attribute or route through an approved PIP that exposes allowed data."}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var r=i(96540);const o={},a=r.createContext(o);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);