"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[1574],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(96540);const r={},c=i.createContext(r);function o(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(c.Provider,{value:n},e.children)}},66203:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"services/crud-service/reference/loopback_mcp_release_notes","title":"loopback_mcp_release_notes","description":"Loopback MCP in CRUDService \u2013 Release Notes and Deep Dive","source":"@site/docs/services/crud-service/reference/loopback_mcp_release_notes.md","sourceDirName":"services/crud-service/reference","slug":"/services/crud-service/reference/loopback_mcp_release_notes","permalink":"/empowernow_docs/docs/services/crud-service/reference/loopback_mcp_release_notes","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/reference/loopback_mcp_release_notes.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"loopback_mcp_persona_guide","permalink":"/empowernow_docs/docs/services/crud-service/reference/loopback_mcp_persona_guide"},"next":{"title":"mcp_api_reference","permalink":"/empowernow_docs/docs/services/crud-service/reference/mcp_api_reference"}}');var r=s(74848),c=s(28453);const o={},l=void 0,t={},d=[{value:"Loopback MCP in CRUDService \u2013 Release Notes and Deep Dive",id:"loopback-mcp-in-crudservice--release-notes-and-deep-dive",level:2},{value:"What\u2019s done",id:"whats-done",level:3},{value:"Scenarios that work now",id:"scenarios-that-work-now",level:3},{value:"External MCP client support (e.g., Cursor)",id:"external-mcp-client-support-eg-cursor",level:3},{value:"Cursor compatibility",id:"cursor-compatibility",level:4},{value:"Configuration checklist",id:"configuration-checklist",level:3},{value:"Real-world problems solved (and why these changes)",id:"real-world-problems-solved-and-why-these-changes",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"loopback-mcp-in-crudservice--release-notes-and-deep-dive",children:"Loopback MCP in CRUDService \u2013 Release Notes and Deep Dive"}),"\n",(0,r.jsxs)(n.p,{children:["Note: A versioned release notes page is now available. See ",(0,r.jsx)(n.code,{children:"releases/loopback_mcp_1_0.md"})," for the current canonical record. This page remains for historical context and deep\u2011dive details."]}),"\n",(0,r.jsx)(n.h3,{id:"whats-done",children:"What\u2019s done"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Loopback MCP server in CRUDService"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Endpoints: ",(0,r.jsx)(n.code,{children:"GET /mcp/tools/list"})," and ",(0,r.jsx)(n.code,{children:"POST /mcp/jsonrpc"})," (tools/list, tools/invoke)."]}),"\n",(0,r.jsxs)(n.li,{children:["Virtual servers: ",(0,r.jsx)(n.code,{children:"GET /mcp/{view}/tools/list"})," and ",(0,r.jsx)(n.code,{children:"POST /mcp/{view}/jsonrpc"})," with pagination (",(0,r.jsx)(n.code,{children:"limit"}),", ",(0,r.jsx)(n.code,{children:"cursor"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Auth scopes enforced: ",(0,r.jsx)(n.code,{children:"mcp.tools.discovery"}),", ",(0,r.jsx)(n.code,{children:"mcp.tools.invoke"})," with 403 on missing scopes."]}),"\n",(0,r.jsx)(n.li,{children:"Structured logging with durations and correlation IDs."}),"\n",(0,r.jsxs)(n.li,{children:["CSRF and OriginValidation exemptions for ",(0,r.jsx)(n.code,{children:"/mcp/*"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tool generation and catalogue"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"LoopbackToolGenerator"})," builds tools from systems and workflows (resilient to partial YAML)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ToolCatalogue"})," auto-includes loopback MCP tools and merges with built-ins and any external MCP."]}),"\n",(0,r.jsx)(n.li,{children:"Auto-refresh after system/workflow create/update/delete."}),"\n",(0,r.jsxs)(n.li,{children:["Deterministic naming + identity:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default strategy: namespaced ",(0,r.jsx)(n.code,{children:"provider.instance.base"})," (e.g., ",(0,r.jsx)(n.code,{children:"entra.cont.account.get_by_id"}),", ",(0,r.jsx)(n.code,{children:"auth0.core.account.get_by_id"}),", ",(0,r.jsx)(n.code,{children:"ldap.av.account.get_by_dn"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Per-system identity via ",(0,r.jsx)(n.code,{children:"mcpInstance"})," in system YAML: ",(0,r.jsx)(n.code,{children:"{ provider, instance, instance_label, env }"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"50-char cap with stable hash; pre-cap and final name collision checks (fail-fast with owners)."}),"\n",(0,r.jsxs)(n.li,{children:["Optional Router surface (off by default) publishes short names with ",(0,r.jsx)(n.code,{children:"oneOf"})," schema per provider."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"BFF routing"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Proxies added:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /api/crud/mcp/tools/list"})," \u2192 CRUD ",(0,r.jsx)(n.code,{children:"/mcp/tools/list"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/crud/mcp/jsonrpc"})," \u2192 CRUD ",(0,r.jsx)(n.code,{children:"/mcp/jsonrpc"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET|POST /api/crud/mcp/*"})," \u2192 CRUD ",(0,r.jsx)(n.code,{children:"/mcp/{path}"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Frontend (Visual Designer)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Tool Picker modal improved for scale: All/Built-in/MCP filter, debounced search, dedupe with ",(0,r.jsx)(n.code,{children:"alreadySelected"}),", larger page size."]}),"\n",(0,r.jsxs)(n.li,{children:["Hooks (",(0,r.jsx)(n.code,{children:"useToolList"}),", ",(0,r.jsx)(n.code,{children:"useToolSearch"}),") and service wired to ToolCatalogue endpoints."]}),"\n",(0,r.jsx)(n.li,{children:"Agent console streaming UI: strips control JSON, concise final status, improved awaiting-input form; helpers configurable via YAML."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Stability and tests"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tests passing for: MCP list/invoke (unit + integration), ToolCatalogue merge, tool routes, and agent suites."}),"\n",(0,r.jsx)(n.li,{children:"Safer imports (plugin fallback), OTEL off in tests, FIPS bypass knob for test env."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Persona-focused guide and loopback MCP how-to added."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"scenarios-that-work-now",children:"Scenarios that work now"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discover tools"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Via CRUDService: ",(0,r.jsx)(n.code,{children:"GET /mcp/tools/list"})]}),"\n",(0,r.jsxs)(n.li,{children:["Via CRUDService (virtual): ",(0,r.jsx)(n.code,{children:"GET /mcp/{view}/tools/list?limit=50&cursor=<t>"})]}),"\n",(0,r.jsxs)(n.li,{children:["Via BFF: ",(0,r.jsx)(n.code,{children:"GET /api/crud/mcp/tools/list"})]}),"\n",(0,r.jsxs)(n.li,{children:["Via BFF (virtual): ",(0,r.jsx)(n.code,{children:"GET /api/crud/mcp/{view}/tools/list"})]}),"\n",(0,r.jsxs)(n.li,{children:["Via ToolCatalogue: ",(0,r.jsx)(n.code,{children:"GET /tools/list"}),", ",(0,r.jsx)(n.code,{children:"GET /tools/search"})," (returns built-ins + loopback MCP)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Invoke tools"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["JSON-RPC ",(0,r.jsx)(n.code,{children:"tools/invoke"})," for system commands: executes via ",(0,r.jsx)(n.code,{children:"CommandExecutor"})," with schema validation. Use namespaced names:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Entra ID: ",(0,r.jsx)(n.code,{children:"entra.cont.account.get_by_id"})," (args: ",(0,r.jsx)(n.code,{children:"SystemIdentifier"}),"), ",(0,r.jsx)(n.code,{children:"entra.cont.group.get_by_id"}),", ",(0,r.jsx)(n.code,{children:"entra.cont.device.get_by_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Active Directory (on-prem LDAP): ",(0,r.jsx)(n.code,{children:"ad.devdomain1.account.get_by_id"}),", ",(0,r.jsx)(n.code,{children:"ad.devdomain1.group.get_by_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Auth0: ",(0,r.jsx)(n.code,{children:"auth0.core.account.get_by_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["LDAP (OpenLDAP): ",(0,r.jsx)(n.code,{children:"ldap.av.account.get_by_dn"}),", ",(0,r.jsx)(n.code,{children:"ldap.av.account.get_by_email"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["JSON-RPC ",(0,r.jsx)(n.code,{children:"tools/invoke"})," for workflows: returns \u201caccepted\u201d stub by default; direct start available when ",(0,r.jsx)(n.code,{children:"MCP_LOOPBACK_WORKFLOW_DIRECT_INVOKE=true"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"UI selection at scale"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Agent editor can open the Tool Picker modal, search/filter hundreds+ of built-ins and MCP tools, and select without duplicates."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Agent run UX"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Streamed output renders cleanly (no raw control JSON), clear completion status, and server-driven helpers/actions."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Security and governance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Missing discovery/invoke scopes \u2192 403 (tested). Same PDP/auth path as CRUDService."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"external-mcp-client-support-eg-cursor",children:"External MCP client support (e.g., Cursor)"}),"\n",(0,r.jsxs)(n.p,{children:["External MCP clients can use REST for discovery or JSON-RPC 2.0 over HTTP for discovery and invoke to connect directly to CRUDService (or via BFF) and use its tools. Names are stable and globally unique by default (",(0,r.jsx)(n.code,{children:"provider.instance.base"}),")."]}),"\n",(0,r.jsxs)(n.ol,{start:"0",children:["\n",(0,r.jsx)(n.li,{children:"REST tools discovery (read-only)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Via BFF:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -s -H "Authorization: Bearer $TOKEN" \\\r\n  https://<bff-host>/api/crud/mcp/tools/list\n'})}),"\n",(0,r.jsx)(n.p,{children:"Direct to CRUDService (in-cluster/local):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -s -H "Authorization: Bearer $TOKEN" \\\r\n  http://crud-service:8000/mcp/tools/list\n'})}),"\n",(0,r.jsx)(n.p,{children:"Response (shape):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"tools":[{"name":"system.my_obj.my_action","description":"...","inputSchema":{...},"source":"system","metadata":{...}}]}\n'})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Tools discovery (JSON-RPC)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Request:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -s -H "Authorization: Bearer $TOKEN" \\\r\n  https://<bff-host>/api/crud/mcp/jsonrpc \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"jsonrpc":"2.0","id":"1","method":"tools/list"}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"Response (shape):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"jsonrpc":"2.0","id":"1","result":{"tools":[{"name":"system.my_obj.my_action","description":"...","inputSchema":{...},"source":"system","metadata":{...}}]}}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Tool invocation (system command)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -s -H "Authorization: Bearer $TOKEN" \\\r\n  https://<bff-host>/api/crud/mcp/jsonrpc \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{\r\n    "jsonrpc":"2.0",\r\n    "id":"2",\r\n    "method":"tools/invoke",\r\n    "params":{"name":"system.my_obj.my_action","arguments":{"k":"v"}}\r\n  }\'\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Tool invocation (workflow)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Default (accepted stub):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -s -H "Authorization: Bearer $TOKEN" \\\r\n  https://<bff-host>/api/crud/mcp/jsonrpc \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{\r\n    "jsonrpc":"2.0",\r\n    "id":"3",\r\n    "method":"tools/invoke",\r\n    "params":{"name":"workflow_onboard_user","arguments":{"userId":"abc"}}\r\n  }\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Direct start (enable): set ",(0,r.jsx)(n.code,{children:"MCP_LOOPBACK_WORKFLOW_DIRECT_INVOKE=true"})," on CRUDService."]}),"\n",(0,r.jsx)(n.h4,{id:"cursor-compatibility",children:"Cursor compatibility"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If Cursor (or any MCP-capable client) supports HTTP JSON-RPC endpoints, it can:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Call ",(0,r.jsx)(n.code,{children:"tools/list"})," and ",(0,r.jsx)(n.code,{children:"tools/invoke"})," via ",(0,r.jsx)(n.code,{children:"https://<bff-host>/api/crud/mcp/jsonrpc"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Use view\u2011scoped endpoints when catalog caps apply: ",(0,r.jsx)(n.code,{children:"https://<bff-host>/api/crud/mcp/{view}/jsonrpc"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Requirements:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The client must include ",(0,r.jsx)(n.code,{children:"Authorization: Bearer <token>"})," with scopes: ",(0,r.jsx)(n.code,{children:"mcp.tools.discovery"})," for list, ",(0,r.jsx)(n.code,{children:"mcp.tools.invoke"})," for invoke."]}),"\n",(0,r.jsx)(n.li,{children:"JSON-RPC 2.0 payloads as shown above."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If Cursor requires WebSocket transport for MCP, use the BFF proxy when WS-to-HTTP translation is available; otherwise, HTTP JSON-RPC mode is supported today."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"configuration-checklist",children:"Configuration checklist"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["CRUDService","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.code,{children:"ConfigLoader"})," points to ServiceConfigs dirs."]}),"\n",(0,r.jsxs)(n.li,{children:["Naming/identity:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default: ",(0,r.jsx)(n.code,{children:"MCP_NAMING_STRATEGY=global_namespace"})," (namespaced). Fallback suffix mode if ",(0,r.jsx)(n.code,{children:"provider/instance"})," missing."]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"mcpInstance"})," to each system to set ",(0,r.jsx)(n.code,{children:"{ provider, instance, instance_label, env }"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Limits and safety:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MCP_MAX_TOOLS"})," to cap publication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MCP_DUPLICATE_POLICY=fail"})," to fail-fast on collisions (pre-cap and final)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Workflows: optionally set ",(0,r.jsx)(n.code,{children:"MCP_LOOPBACK_WORKFLOW_DIRECT_INVOKE=true"})," to start workflows on invoke."]}),"\n",(0,r.jsx)(n.li,{children:"OTEL envs optional; disabled in tests."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"real-world-problems-solved-and-why-these-changes",children:"Real-world problems solved (and why these changes)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Host flattening and collisions: Some clients flatten catalogs or cap tool name length. Namespaced ",(0,r.jsx)(n.code,{children:"provider.instance.base"})," avoids cross-tenant collisions; a 50-char cap with deterministic hash preserves stability."]}),"\n",(0,r.jsxs)(n.li,{children:["Different parameter shapes under same concept: Entra vs AD vs LDAP all have \u201cget_by_id\u201d but require different arguments. Namespaced surface keeps schemas distinct; optional Router surface offers a single short name with ",(0,r.jsx)(n.code,{children:"oneOf"})," branches and strict validation."]}),"\n",(0,r.jsxs)(n.li,{children:["Per-instance labeling and search: ",(0,r.jsx)(n.code,{children:"mcpInstance.instance_label"})," and allowlisted annotations (",(0,r.jsx)(n.code,{children:"provider"}),", ",(0,r.jsx)(n.code,{children:"instance"}),", ",(0,r.jsx)(n.code,{children:"env"}),") enable clear UI titles and filters."]}),"\n",(0,r.jsx)(n.li,{children:"Deterministic catalogs at scale: Sorted iteration and fail-fast duplicate checks remove jitter and prevent ambiguous names."}),"\n"]}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart LR\r\n  A[System YAML<br/>+ mcpInstance] --\x3e B[Generator]\r\n  B --\x3e|namespaced| C[Tools: provider.instance.base]\r\n  B --\x3e|router (opt)| D[Short-name Router Tools]\r\n  C --\x3e E[tools/list]\r\n  D --\x3e E\r\n  style D stroke-dasharray: 3 3"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"BFF"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Routes present for MCP: ",(0,r.jsx)(n.code,{children:"/api/crud/mcp/tools/list"}),", ",(0,r.jsx)(n.code,{children:"/api/crud/mcp/jsonrpc"}),", ",(0,r.jsx)(n.code,{children:"/api/crud/mcp/*"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Frontend"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Tool Picker uses ",(0,r.jsx)(n.code,{children:"/api/crud/tools/*"})," (ToolCatalogue) for merged built-ins + MCP."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"403 on tools/list or invoke \u2192 check scopes on the Bearer token."}),"\n",(0,r.jsxs)(n.li,{children:["No workflow direct run \u2192 ensure ",(0,r.jsx)(n.code,{children:"MCP_LOOPBACK_WORKFLOW_DIRECT_INVOKE=true"})," and ",(0,r.jsx)(n.code,{children:"/workflow/start"})," is enabled."]}),"\n",(0,r.jsx)(n.li,{children:"Missing tools \u2192 check ServiceConfigs YAML and refresh; ToolCatalogue auto-refreshes after CRUD changes."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);