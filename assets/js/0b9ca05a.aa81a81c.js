"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[6156],{4681:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"services/bff/reference/spa-pdp-usage","title":"SPA PDP Authorization Inventory","description":"This page inventories how each SPA uses the PDP (AuthZEN) via the BFF. It clarifies that auth: \\"session\\" on BFF routes enforces authentication only; PDP is invoked explicitly by SPAs through preserved AuthZEN endpoints or by backends internally.","source":"@site/docs/services/bff/reference/spa-pdp-usage.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/spa-pdp-usage","permalink":"/empowernow_docs/docs/services/bff/reference/spa-pdp-usage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/spa-pdp-usage.md","tags":[],"version":"current","frontMatter":{"title":"SPA PDP Authorization Inventory","sidebar_label":"SPA PDP usage"},"sidebar":"tutorialSidebar","previous":{"title":"settings.yaml Reference","permalink":"/empowernow_docs/docs/services/bff/reference/settings-reference"},"next":{"title":"Streaming / SSE","permalink":"/empowernow_docs/docs/services/bff/reference/streaming"}}');var r=s(74848),t=s(28453);const o={title:"SPA PDP Authorization Inventory",sidebar_label:"SPA PDP usage"},a=void 0,c={},l=[{value:"Key points",id:"key-points",level:2},{value:"Automation Studio (Visual Designer)",id:"automation-studio-visual-designer",level:2},{value:"IdP UI",id:"idp-ui",level:2},{value:"PDP UI",id:"pdp-ui",level:2},{value:"Routing and config",id:"routing-and-config",level:2},{value:"See also",id:"see-also",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["This page inventories how each SPA uses the PDP (AuthZEN) via the BFF. It clarifies that ",(0,r.jsx)(n.code,{children:'auth: "session"'})," on BFF routes enforces authentication only; PDP is invoked explicitly by SPAs through preserved AuthZEN endpoints or by backends internally."]}),"\n",(0,r.jsx)(n.h2,{id:"key-points",children:"Key points"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["BFF session: ",(0,r.jsx)(n.code,{children:'auth: "session"'})," validates the user and CSRF but does not auto\u2011call the PDP."]}),"\n",(0,r.jsxs)(n.li,{children:["PDP calls from SPAs: use preserved paths ",(0,r.jsx)(n.code,{children:"/access/v1/evaluation"})," and ",(0,r.jsx)(n.code,{children:"/access/v1/evaluations"})," (proxied by the BFF to ",(0,r.jsx)(n.code,{children:"pdp_service"}),"). The BFF does not rewrite payloads; minimal normalization only (e.g., default ",(0,r.jsx)(n.code,{children:"resource.id"})," for collection checks when omitted)."]}),"\n",(0,r.jsx)(n.li,{children:"Subject: inferred by the BFF from the session cookie; SPAs do not send tokens."}),"\n",(0,r.jsxs)(n.li,{children:["Cookies: include credentials in the browser (fetch ",(0,r.jsx)(n.code,{children:"credentials: 'include'"}),", axios ",(0,r.jsx)(n.code,{children:"{ withCredentials: true }"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"automation-studio-visual-designer",children:"Automation Studio (Visual Designer)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uses PDP for UI access control across many features."}),"\n",(0,r.jsxs)(n.li,{children:["Where it calls PDP","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Programmatic checks (single and batch): posts to ",(0,r.jsx)(n.code,{children:"/access/v1/evaluation"})," and ",(0,r.jsx)(n.code,{children:"/access/v1/evaluations"})," from frontend authz utilities."]}),"\n",(0,r.jsx)(n.li,{children:"Hook\u2011based checks used in navigation/components to gate pages and controls."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Examples of gated areas (representative)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Workflows, Forms, Pages, Integrations, Connections, Tasks, Agents, Executions, Visualizer, Journeys, Admin Config."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Payload shapes","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Single evaluation:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "resource": { "type": "<resourceType>", "id": "<optionalId>", "properties": { /* optional attrs */ } },\r\n  "action": { "name": "<action>" },\r\n  "context": { /* optional */ }\r\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Batch evaluation:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "evaluations": {\r\n    "<key>": {\r\n      "resource": { "type": "<resourceType>", "id": "<optionalId>", "properties": { } },\r\n      "action": { "name": "<action>" },\r\n      "context": { }\r\n    }\r\n  }\r\n}\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"idp-ui",children:"IdP UI"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No direct PDP calls from the frontend."}),"\n",(0,r.jsx)(n.li,{children:"Relies on BFF session authentication and backend\u2011side authorization in the IdP service."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pdp-ui",children:"PDP UI"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uses PDP for evaluations, batches, and visualization/testing flows."}),"\n",(0,r.jsxs)(n.li,{children:["Where it calls PDP","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Typed client helpers post to ",(0,r.jsx)(n.code,{children:"/access/v1/evaluation"})," and ",(0,r.jsx)(n.code,{children:"/access/v1/evaluations"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Visualization flows add ",(0,r.jsx)(n.code,{children:"x-include-visualization: true"})," to requests for diagrams/artifacts."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Payload shapes","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Follows the same AuthZEN schema as above (single and batch), with optional visualization header."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"routing-and-config",children:"Routing and config"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AuthZEN paths are preserved and proxied by the BFF (session required):"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'- id: "authzen-evaluation"\r\n  path: "/access/v1/evaluation"\r\n  target_service: "pdp_service"\r\n  upstream_path: "/access/v1/evaluation"\r\n  methods: ["POST", "OPTIONS"]\r\n  auth: "session"\r\n  preserve_path: true\r\n\r\n- id: "authzen-evaluations"\r\n  path: "/access/v1/evaluations"\r\n  target_service: "pdp_service"\r\n  upstream_path: "/access/v1/evaluations"\r\n  methods: ["POST", "OPTIONS"]\r\n  auth: "session"\r\n  preserve_path: true\n'})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Reference \u2192 ",(0,r.jsx)(n.code,{children:"routes.yaml Reference"})]}),"\n",(0,r.jsxs)(n.li,{children:["Reference \u2192 ",(0,r.jsx)(n.code,{children:"YAML proxy (routes.yaml)"})]}),"\n",(0,r.jsxs)(n.li,{children:["How\u2011to \u2192 ",(0,r.jsx)(n.code,{children:"Integrate a React SPA with the BFF"})]}),"\n",(0,r.jsxs)(n.li,{children:["Tutorial \u2192 ",(0,r.jsx)(n.code,{children:"React SPA + BFF \u2014 Golden Path"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);