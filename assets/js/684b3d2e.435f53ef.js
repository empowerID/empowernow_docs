"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[6125],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(96540);const o={},i=r.createContext(o);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(i.Provider,{value:n},e.children)}},43244:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"services/crud-service/how-to/logging-in-production","title":"CRUD Service logging in production (where to look and what you\'ll see)","description":"How to find CRUD Service logs, events, traces, and metrics in production; default log levels; masking; and relevant runtime controls.","source":"@site/docs/services/crud-service/how-to/logging-in-production.md","sourceDirName":"services/crud-service/how-to","slug":"/services/crud-service/how-to/logging-in-production","permalink":"/empowernow_docs/docs/services/crud-service/how-to/logging-in-production","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/how-to/logging-in-production.md","tags":[],"version":"current","frontMatter":{"id":"logging-in-production","title":"CRUD Service logging in production (where to look and what you\'ll see)","description":"How to find CRUD Service logs, events, traces, and metrics in production; default log levels; masking; and relevant runtime controls.","sidebar_label":"Logging in production"}}');var o=s(74848),i=s(28453);const c={id:"logging-in-production",title:"CRUD Service logging in production (where to look and what you'll see)",description:"How to find CRUD Service logs, events, traces, and metrics in production; default log levels; masking; and relevant runtime controls.",sidebar_label:"Logging in production"},l=void 0,d={},t=[{value:"Where to look in production",id:"where-to-look-in-production",level:2},{value:"What you&#39;ll see at production log levels (default INFO)",id:"what-youll-see-at-production-log-levels-default-info",level:2},{value:"Masking and sensitivity",id:"masking-and-sensitivity",level:2},{value:"Controls to know",id:"controls-to-know",level:2},{value:"Summary",id:"summary",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"where-to-look-in-production",children:"Where to look in production"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Container logs (primary)"}),": ",(0,o.jsx)(n.code,{children:"stdout"}),"/",(0,o.jsx)(n.code,{children:"stderr"}),"."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Docker (host):","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["PowerShell: ",(0,o.jsx)(n.code,{children:"docker logs crud_service"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Kubernetes:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"kubectl logs deploy/crud-service -n <namespace>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Optional file logs"}),": if enabled and writable, under ",(0,o.jsx)(n.code,{children:"/app/logs/app.log"}),"."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Controlled by ",(0,o.jsx)(n.code,{children:"LOG_TO_FILE"})," and ",(0,o.jsx)(n.code,{children:"WORKFLOW_LOG_DIR"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"In many production runs the container filesystem is read\u2011only; expect stdout instead of files."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Kafka business/error events"}),": topics use the ",(0,o.jsx)(n.code,{children:"KAFKA_TOPIC_PREFIX"})," (default ",(0,o.jsx)(n.code,{children:"crud"}),"). Common topics:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"crud.errors"}),", ",(0,o.jsx)(n.code,{children:"crud.operations"}),", ",(0,o.jsx)(n.code,{children:"crud.workflows"}),", ",(0,o.jsx)(n.code,{children:"crud.secrets"}),", ",(0,o.jsx)(n.code,{children:"crud.secrets.audit"}),", ",(0,o.jsx)(n.code,{children:"crud.metrics"})]}),"\n",(0,o.jsxs)(n.li,{children:["Example (host with kcat):","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"kcat -b <broker> -t crud.errors -C -o -10"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Traces"}),": exported to OTLP at ",(0,o.jsx)(n.code,{children:"OTEL_EXPORTER_ENDPOINT"})," (default ",(0,o.jsx)(n.code,{children:"http://otel-collector:4317"}),"). View in your tracing UI (Jaeger/Tempo/Grafana)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Metrics"}),": scrape the service ",(0,o.jsx)(n.code,{children:"/metrics"})," endpoint (Prometheus format)."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"what-youll-see-at-production-log-levels-default-info",children:"What you'll see at production log levels (default INFO)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Structured JSON lines with masking, correlation IDs, and exceptions when present. Examples:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{"timestamp":"2025-01-01T12:00:00Z","service":"my_service","environment":"prod","name":"app","level":"INFO","message":"Received execute request","correlation_id":"b1e...","system":"entraid_contractors","object_type":"user","action":"create","params":{"Password":"****MASKED****","Email":"john@example.com"},"user":"auth:account:..."}\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{"timestamp":"2025-01-01T12:00:02Z","service":"my_service","environment":"prod","name":"app","level":"ERROR","message":"HTTPException occurred: Validation failed","correlation_id":"b1e...","exception":"Traceback (most recent call last): ..."}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Typical signals:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Startup/shutdown INFO logs (DB check, Redis/Kafka init)"}),"\n",(0,o.jsx)(n.li,{children:"Per\u2011request INFO logs on success"}),"\n",(0,o.jsxs)(n.li,{children:["ERROR logs on ",(0,o.jsx)(n.code,{children:"HTTPException"}),"/unexpected exceptions (with ",(0,o.jsx)(n.code,{children:"exc_info"})," stack)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"422"})," validation errors logged by the global handler"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"masking-and-sensitivity",children:"Masking and sensitivity"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["All log entries pass through masking; common secrets like passwords, tokens, ",(0,o.jsx)(n.code,{children:"Authorization"})," headers are redacted."]}),"\n",(0,o.jsx)(n.li,{children:"Route code also pre\u2011masks request params/headers before logging."}),"\n",(0,o.jsxs)(n.li,{children:["Admin\u2011only \u201cunmasked\u201d logging is gated by ",(0,o.jsx)(n.code,{children:"ADMIN_UNMASKED_LOGGING"}),". Ensure it\u2019s ",(0,o.jsx)(n.code,{children:"false"})," in production."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"controls-to-know",children:"Controls to know"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"LOG_LEVEL"})," (default ",(0,o.jsx)(n.code,{children:"INFO"})," in prod), ",(0,o.jsx)(n.code,{children:"FILE_LOG_LEVEL"}),", ",(0,o.jsx)(n.code,{children:"LOG_TO_FILE"}),", ",(0,o.jsx)(n.code,{children:"WORKFLOW_LOG_DIR"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"KAFKA_*"})," (bootstrap servers, topic prefix), ",(0,o.jsx)(n.code,{children:"OTEL_*"})," (collector endpoint, console debug opt\u2011in)"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Check container ",(0,o.jsx)(n.code,{children:"stdout"})," (",(0,o.jsx)(n.code,{children:"docker logs"}),"/",(0,o.jsx)(n.code,{children:"kubectl logs"}),"). Optional file: ",(0,o.jsx)(n.code,{children:"/app/logs/app.log"})," if enabled and writable."]}),"\n",(0,o.jsxs)(n.li,{children:["For business/error events, read Kafka topics like ",(0,o.jsx)(n.code,{children:"crud.errors"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Traces go to your OTEL backend; metrics are on ",(0,o.jsx)(n.code,{children:"/metrics"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["At prod (",(0,o.jsx)(n.code,{children:"INFO"}),") you\u2019ll see masked, JSON\u2011structured request/response and error logs with correlation IDs and stack traces on errors."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["See also: ",(0,o.jsx)(n.code,{children:"services/crud-service/reference/kafka-events"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);