"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[3816],{4108:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"services/experience/quickstart","title":"Plugins Quickstart (Build \u2192 Place \u2192 Configure \u2192 Deploy \u2192 Verify)","description":"Step-by-step process to build a plugin, place the bundle, configure the manifest, deploy via BFF mounts, and verify.","source":"@site/docs/services/experience/quickstart.md","sourceDirName":"services/experience","slug":"/services/experience/quickstart","permalink":"/empowernow_docs/docs/services/experience/quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/quickstart.md","tags":[],"version":"current","frontMatter":{"title":"Plugins Quickstart (Build \u2192 Place \u2192 Configure \u2192 Deploy \u2192 Verify)","sidebar_label":"Plugins Quickstart","description":"Step-by-step process to build a plugin, place the bundle, configure the manifest, deploy via BFF mounts, and verify."},"sidebar":"tutorialSidebar","previous":{"title":"QA Test Plan","permalink":"/empowernow_docs/docs/services/experience/qa-test-plan"},"next":{"title":"Security & Compliance","permalink":"/empowernow_docs/docs/services/experience/security-compliance"}}');var s=i(74848),l=i(28453);const o={title:"Plugins Quickstart (Build \u2192 Place \u2192 Configure \u2192 Deploy \u2192 Verify)",sidebar_label:"Plugins Quickstart",description:"Step-by-step process to build a plugin, place the bundle, configure the manifest, deploy via BFF mounts, and verify."},c=void 0,t={},d=[{value:"1) Build",id:"1-build",level:2},{value:"2) Place",id:"2-place",level:2},{value:"3) Configure",id:"3-configure",level:2},{value:"4) Deploy",id:"4-deploy",level:2},{value:"5) Verify",id:"5-verify",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["This quickstart condenses \xa716 (Development Process) from the canonical reference ",(0,s.jsx)(n.code,{children:"./experience_plugins"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"1-build",children:"1) Build"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Author routes and/or widgets and export as ESM"}),"\n",(0,s.jsxs)(n.li,{children:["Externalize ",(0,s.jsx)(n.code,{children:"react"}),", ",(0,s.jsx)(n.code,{children:"react-dom"}),", and ",(0,s.jsx)(n.code,{children:"@empowernow/ui"})]}),"\n",(0,s.jsxs)(n.li,{children:["Produce a single file bundle (e.g., ",(0,s.jsx)(n.code,{children:"dist/index.esm.js"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"esbuild (CLI):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx esbuild src/index.tsx --bundle --format=esm --platform=browser --target=es2020 \\\r\n  --outfile=dist/index.esm.js \\\r\n  --external:react --external:react-dom --external:@empowernow/ui\n"})}),"\n",(0,s.jsx)(n.p,{children:"rollup (config):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// rollup.config.mjs\r\nimport resolve from '@rollup/plugin-node-resolve';\r\nimport commonjs from '@rollup/plugin-commonjs';\r\nimport esbuild from 'rollup-plugin-esbuild';\r\n\r\nexport default {\r\n  input: 'src/index.tsx',\r\n  external: ['react', 'react-dom', '@empowernow/ui'],\r\n  output: { file: 'dist/index.esm.js', format: 'esm' },\r\n  plugins: [resolve({ browser: true }), commonjs(), esbuild({ jsx: 'automatic', target: 'es2020' })],\r\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-place",children:"2) Place"}),"\n",(0,s.jsx)(n.p,{children:"Copy the bundle to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ServiceConfigs/BFF/plugins/<pluginId>/<version>/index.esm.js\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-configure",children:"3) Configure"}),"\n",(0,s.jsxs)(n.p,{children:["Add an entry in ",(0,s.jsx)(n.code,{children:"ServiceConfigs/BFF/config/plugins.yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'tenants:\r\n  experience.ocg.labs.empowernow.ai:\r\n    - id: hello\r\n      version: "1.0.0"\r\n      engine: { experience: ">=1.0.0" }\r\n      bundle: { file: "/app/plugins/hello/1.0.0/index.esm.js" }\r\n      permissions:\r\n        api:\r\n          - { method: GET, path: /api/plugins/secure-echo }\r\n        sse: []\r\n      contributions:\r\n        routes:\r\n          - { path: /hello, component: Hello, resource: plugin.route, action: view }\n'})}),"\n",(0,s.jsx)(n.h2,{id:"4-deploy",children:"4) Deploy"}),"\n",(0,s.jsx)(n.p,{children:"Ensure BFF mounts in compose:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"../ServiceConfigs/BFF/plugins:/app/plugins:ro\r\n../ServiceConfigs/BFF/config:/app/config:ro\n"})}),"\n",(0,s.jsx)(n.p,{children:"Restart/reload the BFF."}),"\n",(0,s.jsx)(n.h2,{id:"5-verify",children:"5) Verify"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/plugins/manifests"})," lists your plugin"]}),"\n",(0,s.jsxs)(n.li,{children:["SPA imports ",(0,s.jsx)(n.code,{children:"/api/plugins/bundle?entry=hello&id=hello"})," with 200 and caching headers"]}),"\n",(0,s.jsx)(n.li,{children:"Contributions render when PDP allows"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See also: Storage & Deployment ",(0,s.jsx)(n.code,{children:"./plugins-storage-deployment"}),", canonical reference ",(0,s.jsx)(n.code,{children:"./experience_plugins"}),", and BFF routing ",(0,s.jsx)(n.code,{children:"../bff/devops/experience_routing"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var r=i(96540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);