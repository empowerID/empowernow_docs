"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[6164],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}},31563:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"services/experience/experience_plugins","title":"EmpowerNow Experience \u2014 Plugin Architecture","description":"30\u2011second pitch","source":"@site/docs/services/experience/experience_plugins.md","sourceDirName":"services/experience","slug":"/services/experience/experience_plugins","permalink":"/empowernow_docs/docs/services/experience/experience_plugins","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/experience_plugins.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Executive Overview","permalink":"/empowernow_docs/docs/services/experience/executive-overview"},"next":{"title":"EmpowerNow Experience (End\u2011User App)","permalink":"/empowernow_docs/docs/services/experience/"}}');var r=i(74848),l=i(28453);const t={},d="EmpowerNow Experience \u2014 Plugin Architecture",c={},o=[{value:"Quick Navigation (by Role)",id:"quick-navigation-by-role",level:2},{value:"1. Executive Summary",id:"1-executive-summary",level:2},{value:"Business Impact",id:"business-impact",level:3},{value:"Technical Excellence",id:"technical-excellence",level:3},{value:"What\u2019s distinct",id:"whats-distinct",level:3},{value:"2. Key Concepts (Plain Language)",id:"2-key-concepts-plain-language",level:2},{value:"3. The Problem We\u2019re Solving",id:"3-the-problem-were-solving",level:2},{value:"4. High\u2011Level How\u2011It\u2011Works",id:"4-highlevel-howitworks",level:2},{value:"5. System Architecture",id:"5-system-architecture",level:2},{value:"6. Lifecycle (Discovery \u2192 Pre\u2011gating \u2192 Load \u2192 Mount)",id:"6-lifecycle-discovery--pregating--load--mount",level:2},{value:"Loader URL pattern (current)",id:"loader-url-pattern-current",level:3},{value:"7. Security Model (Defense\u2011in\u2011Depth)",id:"7-security-model-defenseindepth",level:2},{value:"8. Authorization (OpenID AuthZEN)",id:"8-authorization-openid-authzen",level:2},{value:"9. Runtime Enforcement (Calls)",id:"9-runtime-enforcement-calls",level:2},{value:"10. Plugin Development Guide",id:"10-plugin-development-guide",level:2},{value:"11. Component Library (<code>@empowernow/ui</code>)",id:"11-component-library-empowernowui",level:2},{value:"12. Development Best Practices",id:"12-development-best-practices",level:2},{value:"13. Theming &amp; Branding (Neon Flux)",id:"13-theming--branding-neon-flux",level:2},{value:"14. Version Management (Compatibility)",id:"14-version-management-compatibility",level:2},{value:"15. Testing &amp; Quality Assurance",id:"15-testing--quality-assurance",level:2},{value:"16. Deployment Process",id:"16-deployment-process",level:2},{value:"Developer workflow (Build \u2192 Place \u2192 Configure \u2192 Deploy \u2192 Verify)",id:"developer-workflow-build--place--configure--deploy--verify",level:3},{value:"17. Operations Guide",id:"17-operations-guide",level:2},{value:"Operational procedures",id:"operational-procedures",level:3},{value:"18. Configuration Management (BFF Stores &amp; Serves)",id:"18-configuration-management-bff-stores--serves",level:2},{value:"Storage layout (source of truth)",id:"storage-layout-source-of-truth",level:3},{value:"Compose mounts (BFF)",id:"compose-mounts-bff",level:4},{value:"Plugin config (<code>ServiceConfigs/BFF/config/plugins.yaml</code>)",id:"plugin-config-serviceconfigsbffconfigpluginsyaml",level:3},{value:"Runtime view",id:"runtime-view",level:3},{value:"BFF serving logic",id:"bff-serving-logic",level:3},{value:"Response formats",id:"response-formats",level:3},{value:"Operations endpoints",id:"operations-endpoints",level:3},{value:"19. Security Details (Headers &amp; Auth Flow)",id:"19-security-details-headers--auth-flow",level:2},{value:"20. Business Benefits (Guidance &amp; Placeholders)",id:"20-business-benefits-guidance--placeholders",level:2},{value:"Cost &amp; Speed",id:"cost--speed",level:3},{value:"Potential Revenue Levers (If Applicable)",id:"potential-revenue-levers-if-applicable",level:3},{value:"Case Studies (Insert Real Data)",id:"case-studies-insert-real-data",level:3},{value:"21. Operational Excellence (SLOs &amp; DR Framework)",id:"21-operational-excellence-slos--dr-framework",level:2},{value:"SLO Framework",id:"slo-framework",level:3},{value:"Monitoring &amp; Alerting (Minimum Set)",id:"monitoring--alerting-minimum-set",level:3},{value:"Disaster Recovery",id:"disaster-recovery",level:3},{value:"22. Competitive Context",id:"22-competitive-context",level:2},{value:"23. Roadmap (Forward Look)",id:"23-roadmap-forward-look",level:2},{value:"Appendix A \u2014 Glossary",id:"appendix-a--glossary",level:2},{value:"Appendix B \u2014 Quick Reference",id:"appendix-b--quick-reference",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"empowernow-experience--plugin-architecture",children:"EmpowerNow Experience \u2014 Plugin Architecture"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"30\u2011second pitch"}),"\r\nEnterprises need tenant\u2011specific features without forks, risky redeploys, or brittle iframes. Our plugins are lightweight, same\u2011origin ESM UI modules the host loads on demand\u2014pre\u2011authorized by policy and enforced at runtime by a BFF (no browser tokens, strict CSP) with instant quarantine rollback. Developer workflow fits existing CI/CD: build once, place a file under ",(0,r.jsx)(n.code,{children:"ServiceConfigs"}),", register in ",(0,r.jsx)(n.code,{children:"plugins.yaml"}),", and roll out per tenant\u2014no host redeploy. Outcome: faster delivery and safer upgrades with centralized governance, auditability, and lower TCO, on standard web tech."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"quick-navigation-by-role",children:"Quick Navigation (by Role)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Executives & PMs"})," \u2192 \xa7\xa71\u20134, 20, 22\r\n",(0,r.jsx)(n.strong,{children:"Architects & Tech Leads"})," \u2192 Full doc; focus on \xa7\xa75\u20139, 18\u201323\r\n",(0,r.jsx)(n.strong,{children:"Plugin Developers"})," \u2192 \xa7\xa75\u201317 (esp. \xa7\xa710\u201312)\r\n",(0,r.jsx)(n.strong,{children:"QA Engineers"})," \u2192 \xa7\xa76\u20139, 14\u201315\r\n",(0,r.jsx)(n.strong,{children:"Operations Teams"})," \u2192 \xa7\xa716\u201318, 21"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-executive-summary",children:"1. Executive Summary"}),"\n",(0,r.jsxs)(n.p,{children:["The EmpowerNow Experience plugin system enables customers to extend the platform with custom UI components ",(0,r.jsx)(n.strong,{children:"without modifying the core app"}),". Plugins are small, independently deliverable ESM modules declared by a manifest and loaded by the host SPA ",(0,r.jsx)(n.strong,{children:"only after"})," authorization."]}),"\n",(0,r.jsx)(n.h3,{id:"business-impact",children:"Business Impact"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Faster delivery"}),": Customer\u2011specific features in days instead of quarters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Zero\u2011downtime customization"}),": Enable/disable per tenant via manifests; no SPA redeploy."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Risk containment"}),": Isolated, pre\u2011gated UI; instant quarantine if issues arise."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi\u2011tenant fit"}),": Different tenants enable different plugins without code branches."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"technical-excellence",children:"Technical Excellence"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Defense\u2011in\u2011depth"}),": Same\u2011origin ESM + strict CSP + PDP pre\u2011gating + BFF allow\u2011lists."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Future\u2011proof"}),": Independent versioning; semver guard via ",(0,r.jsx)(n.code,{children:"engine.experience"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AI\u2011ready"}),": Bounded surface (manifest + ",(0,r.jsx)(n.code,{children:"routes"}),"/",(0,r.jsx)(n.code,{children:"widgets"})," + SDK) for safe codegen."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance\u2011oriented"}),": Native ",(0,r.jsx)(n.code,{children:"import()"})," with caching and no iframe overhead."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"whats-distinct",children:"What\u2019s distinct"}),"\n",(0,r.jsxs)(n.p,{children:["Unlike iframe\u2011centric models (e.g., many app ecosystems) or proprietary stacks, we use ",(0,r.jsx)(n.strong,{children:"standard web technologies"})," with enterprise\u2011grade security controls\u2014yielding faster development, better UX, and lower TCO."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-key-concepts-plain-language",children:"2. Key Concepts (Plain Language)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Plugin"})," \u2014 A small UI extension (widget/page/mini\u2011app) that can be added without changing the core app."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tenant"})," \u2014 A customer org using our platform; each tenant can enable different plugins."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Manifest"})," \u2014 A plugin\u2019s \u201cpassport\u201d: declares contributions (routes/widgets) and permissions (API/SSE allow\u2011lists), plus compatibility and PDP hints."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Same\u2011origin"})," \u2014 Plugin code ships from the ",(0,r.jsx)(n.strong,{children:"same domain"})," as the app; existing cookies work and CSP remains tight."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ESM (ECMAScript Modules)"})," \u2014 Modern JS module format the browser can ",(0,r.jsx)(n.code,{children:"import()"})," natively; no globals; tree\u2011shakable."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CSP (Content\u2011Security\u2011Policy)"})," \u2014 Browser rules limiting executable sources (we keep ",(0,r.jsx)(n.code,{children:"script-src 'self'"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PDP (Policy Decision Point)"})," \u2014 AuthZEN service answering, \u201cIs subject S allowed to do action A on resource R?\u201d"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"BFF (Backend for Frontend)"})," \u2014 Same\u2011origin gateway that serves manifests/bundles and ",(0,r.jsx)(n.strong,{children:"enforces"})," plugin calls."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Allow\u2011lists"})," \u2014 Per\u2011plugin allowed ",(0,r.jsx)(n.strong,{children:"method + path templates"})," (and SSE topics). If not on the list \u2192 403."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-the-problem-were-solving",children:"3. The Problem We\u2019re Solving"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before plugins"}),": every customization meant core\u2011app changes, risky updates, and tangled branching logic; time\u2011to\u2011market 3\u20136 months."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"With plugins"}),": isolated, independently deployable extensions; core upgrades remain safe; each tenant gets exactly what they need; time\u2011to\u2011market 3\u20137 days."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Real\u2011world scenarios"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Healthcare"}),": HIPAA\u2011aligned widget with specific data views, enabled only for that tenant."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Financial services"}),": Multi\u2011level approval routes as a plugin, not impacting other tenants."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Retail"}),": Inventory integration mini\u2011app targeting their backend via allow\u2011listed endpoints."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-highlevel-howitworks",children:"4. High\u2011Level How\u2011It\u2011Works"}),"\n",(0,r.jsxs)(n.p,{children:["Think of a secure building: the ",(0,r.jsx)(n.strong,{children:"directory"})," (BFF) lists apartments (plugins), ",(0,r.jsx)(n.strong,{children:"security"})," (PDP) checks access ",(0,r.jsx)(n.strong,{children:"before doors open"}),", and all movement is logged; access can be revoked immediately."]}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart LR\r\n  Browser["User\'s Browser"] --\x3e App["Experience App"]\r\n\r\n  App --\x3e|"Mount if permitted"| PlugA["Plugin A"]\r\n  App --\x3e PlugB["Plugin B"]\r\n\r\n  %% Use a dotted edge + label instead of the invalid \'.X.\' syntax\r\n  App -. "Denied" .-> PlugC[("Plugin C")]\r\n\r\n  App --\x3e|"Same-origin, cookies"| BFF["BFF (Gateway & Enforcer)"]\r\n  BFF --\x3e|"Lists"| Manifests[("Manifests")]\r\n  BFF --\x3e|"Serves"| Bundles[("Bundles")]\r\n  BFF --\x3e|"Eval batch"| PDP["PDP (AuthZEN)"]\r\n\r\n  %% Optional styling for the denied plugin\r\n  classDef denied fill:#fee,stroke:#e66,stroke-width:2px,stroke-dasharray:3 3;\r\n  class PlugC denied;'}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-system-architecture",children:"5. System Architecture"}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TB\r\n  subgraph Browser["Experience SPA (Host)"]\r\n    UI["Shell & Router"]\r\n    SDK["Host SDK<br/>(api.fetch / sse / authz)"]\r\n    MOUNTS["Plugin Mount Points"]\r\n  end\r\n\r\n  BFF["BFF (Session, Proxy, Enforcement)"]\r\n  PDP["PDP (AuthZEN)"]\r\n  SVC["Identity Fabric Services"]\r\n  MANI[("GET /api/plugins/manifests")]\r\n  BUND[("GET /api/plugins/bundle")]\r\n\r\n  UI --\x3e MOUNTS\r\n  MOUNTS --\x3e SDK\r\n  SDK --\x3e|"same-origin http-only cookies"| BFF\r\n  BFF --\x3e|"serve"| MANI\r\n  BFF --\x3e|"serve"| BUND\r\n  BFF --\x3e|"batch evaluations"| PDP\r\n  BFF <--\x3e|"proxied API/SSE"| SVC'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Roles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Experience SPA (host)"})," \u2014 discovers manifests, pre\u2011gates with PDP, imports ESM bundles, mounts contributions, uses SDK for all I/O."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin"})," \u2014 bundle + manifest; exports ",(0,r.jsx)(n.code,{children:"routes"}),"/",(0,r.jsx)(n.code,{children:"widgets"}),", declares allow\u2011lists."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"BFF"})," \u2014 validates session, serves manifests/bundles, enforces allow\u2011lists using ",(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"}),", forwards PDP calls, enriches context."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PDP (AuthZEN)"})," \u2014 returns authorization decisions used pre\u2011mount and during interactions."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-lifecycle-discovery--pregating--load--mount",children:"6. Lifecycle (Discovery \u2192 Pre\u2011gating \u2192 Load \u2192 Mount)"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\r\n  autonumber\r\n  participant SPA as Experience SPA\r\n  participant BFF as BFF\r\n  participant PDP as PDP\r\n\r\n  SPA->>BFF: GET /api/plugins/manifests (cookies)\r\n  BFF--\x3e>SPA: manifests [{ id, contributions, permissions, engine }]\r\n  note over SPA: Build batch from manifest PDP hints\r\n  SPA->>BFF: POST /access/v1/evaluations (evaluations[])\r\n  BFF->>PDP: Forward AuthZEN batch\r\n  PDP--\x3e>BFF: decisions[]\r\n  BFF--\x3e>SPA: decisions[]\r\n  note over SPA: Filter contributions (Permit only)\r\n  SPA->>BFF: GET /api/plugins/bundle?entry=<id>&id=<id>\r\n  BFF--\x3e>SPA: ESM module { routes, widgets }\r\n  SPA->>SPA: Mount allowed routes/widgets"}),"\n",(0,r.jsx)(n.h3,{id:"loader-url-pattern-current",children:"Loader URL pattern (current)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The host imports plugin bundles from:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/plugins/bundle?entry=<pluginId>&id=<pluginId>"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Examples:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/plugins/bundle?entry=hello-page&id=hello-page"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/plugins/bundle?entry=hello-widget&id=hello-widget"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note: The BFF maps ",(0,r.jsx)(n.code,{children:"id"})," to the configured ",(0,r.jsx)(n.code,{children:"bundle.file"})," on disk and streams the file back as ",(0,r.jsx)(n.code,{children:"text/javascript"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Compatibility note: The SPA loader currently uses query params. If needed later, a path form (e.g., ",(0,r.jsx)(n.code,{children:"/api/plugins/bundle/{pluginId}/{version}"}),") can run in parallel and migrate when convenient."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Outcome"}),": ",(0,r.jsx)(n.strong,{children:"Permit"})," \u21d2 contribution mounts; ",(0,r.jsx)(n.strong,{children:"Deny/error"})," \u21d2 omitted (no flicker)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-security-model-defenseindepth",children:"7. Security Model (Defense\u2011in\u2011Depth)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Front door \u2014 CSP"}),": only same\u2011origin scripts; no external script tags or ",(0,r.jsx)(n.code,{children:"unsafe-eval"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security desk \u2014 PDP pre\u2011gating"}),": authorize routes/widgets ",(0,r.jsx)(n.strong,{children:"before"})," they render."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access control \u2014 BFF enforcement"}),": every call carries ",(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"}),"; method + path\u2011template allow\u2011lists checked per request; SSE prefixes gated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring \u2014 Observability & kill\u2011switch"}),": labeled metrics (",(0,r.jsx)(n.code,{children:"{tenant, plugin_id}"}),"); quarantine blocks bundle serving and API/SSE."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prevents"}),": data overreach (only allow\u2011listed endpoints), code injection (strict CSP), privilege escalation (AuthZEN checks), cross\u2011tenant bleed (per\u2011tenant filtering), and unsafe updates (quarantine & semver guard)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-authorization-openid-authzen",children:"8. Authorization (OpenID AuthZEN)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why it matters"}),": standard request/response shapes, auditability, and consistency across routes, widgets, and actions."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Endpoints (via BFF, cookies+CSRF)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /access/v1/evaluation"})," (single)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /access/v1/evaluations"})," (batch)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Subject (canonical)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"type":"account","id":"auth:account:{provider}:{user_id}"}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Resources"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Route: ",(0,r.jsx)(n.code,{children:'{"type":"plugin.route","id":"/hello"}'})]}),"\n",(0,r.jsxs)(n.li,{children:["Widget: ",(0,r.jsx)(n.code,{children:'{"type":"plugin.widget","id":"hello:HelloWidget"}'})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Single evaluation (example)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "subject": { "type": "account", "id": "auth:account:empowernow:test" },\r\n  "resource": { "type": "plugin.route", "id": "/hello" },\r\n  "action": { "name": "view" },\r\n  "context": {}\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "decision": "Permit" }\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Batch (pre\u2011gating) example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "evaluations": [\r\n    { "subject": { "type": "account", "id": "auth:account:empowernow:test" }, "resource": { "type": "plugin.route", "id": "/hello" }, "action": { "name": "view" }, "context": {} },\r\n    { "subject": { "type": "account", "id": "auth:account:empowernow:test" }, "resource": { "type": "plugin.widget", "id": "hello:HelloWidget" }, "action": { "name": "view" }, "context": {} }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Batch response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "decisions": [ { "decision": "Permit" }, { "decision": "Deny" } ] }\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Notes: The BFF enriches context (",(0,r.jsx)(n.code,{children:"context.client.ip"}),", ",(0,r.jsx)(n.code,{children:"context.client.user_agent"}),") when absent. Deny/error \u21d2 fail\u2011closed; contributions aren\u2019t mounted."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-runtime-enforcement-calls",children:"9. Runtime Enforcement (Calls)"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\r\n  autonumber\r\n  participant Plugin as Plugin (in SPA)\r\n  participant SDK as Host SDK\r\n  participant BFF as BFF (enforcer)\r\n  participant SVC as Upstream Services\r\n\r\n  Plugin->>SDK: sdk.api.fetch('/api/crud/items/:id')\r\n  SDK->>BFF: GET /api/crud/items/123\r\n  note over SDK,BFF: Headers: X-Plugin-Id: <id> (cookies)\r\n  note over BFF: Match method + path template for plugin id\r\n  alt Not allowed\r\n    BFF--\x3e>SDK: 403 (X-Allowlist-Violation: 1)\r\n  else Allowed\r\n    BFF->>SVC: Forward request\r\n    SVC--\x3e>BFF: 200/...\r\n    BFF--\x3e>SDK: 200/...\r\n    SDK--\x3e>Plugin: data\r\n  end"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Model"}),": Allow\u2011lists are ",(0,r.jsx)(n.strong,{children:"method + path templates"})," (e.g., ",(0,r.jsx)(n.code,{children:"/api/crud/items/:id"}),") with optional param shapes (e.g., ",(0,r.jsx)(n.code,{children:"uuid"}),"), compiled to safe regex after ",(0,r.jsx)(n.strong,{children:"path normalization"}),". SSE topics are gated by declared prefixes."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-plugin-development-guide",children:"10. Plugin Development Guide"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What can a plugin be?"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Widgets"})," \u2014 PDP\u2011gated components in dashboard slots (e.g., ",(0,r.jsx)(n.code,{children:"dashboard.main"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pages (routes)"})," \u2014 full screens mounted at declared paths."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mini\u2011apps"})," \u2014 multiple routes forming a cohesive feature (list \u2192 detail \u2192 settings)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Structure"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Manifest"})," \u2014 declares contributions and permissions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bundle (ESM)"})," \u2014 exports React components in ",(0,r.jsx)(n.code,{children:"routes"})," and/or ",(0,r.jsx)(n.code,{children:"widgets"})," records."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Simple manifest"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'id: "sales-analytics"\r\nversion: "1.0.0"\r\ncontributions:\r\n  widgets:\r\n    - slot: "dashboard.main"\r\n      component: "SalesWidget"\r\npermissions:\r\n  api:\r\n    - method: "GET"\r\n      path: "/api/sales/*"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Simple bundle"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export const widgets = {\r\n  SalesWidget: () => <div>Sales data visualization here</div>\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Constraints & best practices:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Do ",(0,r.jsx)(n.strong,{children:"not"})," create a top\u2011level Router; the host owns routing (use ",(0,r.jsx)(n.code,{children:"/plugins/{pluginId}/\u2026"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["All HTTP/SSE/AuthZ via ",(0,r.jsx)(n.strong,{children:"Host SDK"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Follow Neon Flux via ",(0,r.jsx)(n.code,{children:"@empowernow/ui"}),"; no global CSS; no external scripts/styles."]}),"\n",(0,r.jsx)(n.li,{children:"Gate sensitive actions with PDP at render time and rely on BFF enforcement at request time."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"11-component-library-empowernowui",children:["11. Component Library (",(0,r.jsx)(n.code,{children:"@empowernow/ui"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why"}),": Consistency, accessibility, theming, and security."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Categories"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Layout: Container, Grid, Stack"}),"\n",(0,r.jsx)(n.li,{children:"Input: TextField, Select, DatePicker"}),"\n",(0,r.jsx)(n.li,{children:"Display: Table, Card, Chart"}),"\n",(0,r.jsx)(n.li,{children:"Feedback: Alert, Toast, Modal"}),"\n",(0,r.jsx)(n.li,{children:"Navigation: Tabs, Breadcrumb, Menu"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Requesting new components"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request"})," with use case & UX (screens), accessibility needs, tokens, and any PDP/security considerations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Design review"})," for Neon Flux fit and API ergonomics."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implementation"})," with tokens/docs/stories; no CSP relaxations; semver."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Adoption"})," by updating plugin dependency (host imports global CSS once)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Support"})," via tracked bugs/enhancements and documented deprecations."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Temporary gaps & workarounds"}),": Prefer composing existing primitives. Narrow ESM utilities (e.g., ",(0,r.jsx)(n.code,{children:"zod"}),", lightweight charts) are fine if CSP\u2011safe and tree\u2011shakable, with ",(0,r.jsx)(n.strong,{children:"no global CSS"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"12-development-best-practices",children:"12. Development Best Practices"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"DO"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"@empowernow/ui"})," components."]}),"\n",(0,r.jsx)(n.li,{children:"Use the SDK for all calls; implement error boundaries and loading states."}),"\n",(0,r.jsx)(n.li,{children:"Test with varied permissions (Permit/Deny)."}),"\n",(0,r.jsx)(n.li,{children:"Keep bundles small and focused; treat peers as externals."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"DON\u2019T"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Import third\u2011party UI kits directly (MUI/Chakra/AntD/Tailwind runtime frameworks)."}),"\n",(0,r.jsx)(n.li,{children:"Create your own top\u2011level Router or inject global CSS."}),"\n",(0,r.jsx)(n.li,{children:"Make direct API calls or store sensitive data in the browser."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Checklist"})}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All API calls use the SDK"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No external UI kits; ",(0,r.jsx)(n.code,{children:"@empowernow/ui"})," only"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Error boundaries present"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Loading/empty states handled"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Permissions respected (pre\u2011gating + actions)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"13-theming--branding-neon-flux",children:"13. Theming & Branding (Neon Flux)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Host loads customer theme from ",(0,r.jsx)(n.code,{children:"/api/configs/ui"})," (live via ",(0,r.jsx)(n.code,{children:"/api/configs/stream"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@empowernow/ui"})," applies tokens/props and theme classes."]}),"\n",(0,r.jsx)(n.li,{children:"Plugins inherit branding automatically\u2014no per\u2011tenant CSS in plugins."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Not supported: CSP overrides, external styles/scripts, or injected global CSS."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"14-version-management-compatibility",children:"14. Version Management (Compatibility)"}),"\n",(0,r.jsxs)(n.p,{children:["Plugins declare a host compatibility range via ",(0,r.jsx)(n.code,{children:"engine.experience"})," (semver); the host enforces it at runtime."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Stable contract"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Manifest keys/types: ",(0,r.jsx)(n.code,{children:"id"}),", ",(0,r.jsx)(n.code,{children:"version"}),", ",(0,r.jsx)(n.code,{children:"engine.experience"}),", ",(0,r.jsx)(n.code,{children:"contributions.routes/widgets"}),", ",(0,r.jsx)(n.code,{children:"permissions.api/sse"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Bundle exports: ",(0,r.jsx)(n.code,{children:"routes"})," & ",(0,r.jsx)(n.code,{children:"widgets"})," records of React components."]}),"\n",(0,r.jsxs)(n.li,{children:["SDK surface: ",(0,r.jsx)(n.code,{children:"sdk.api.fetch"}),", ",(0,r.jsx)(n.code,{children:"sdk.sse.subscribe"}),", ",(0,r.jsx)(n.code,{children:"sdk.authz.evaluate"})," (same\u2011origin, credentials, ",(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["PDP naming: ",(0,r.jsx)(n.code,{children:"plugin.route:view"}),", ",(0,r.jsx)(n.code,{children:"plugin.widget:view"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Guard behavior"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Not satisfied \u21d2 skip import, omit contributions, log diagnostic (optional dev banner off\u2011prod)."}),"\n",(0,r.jsx)(n.li,{children:"Near boundary/pre\u2011release \u21d2 allow with warning."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Breaking vs. additive"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Additive: new optional manifest fields, optional SDK methods, new contribution slots."}),"\n",(0,r.jsx)(n.li,{children:"Breaking: removing/renaming manifest keys, changing required types/semantics, removing SDK methods, changing PDP semantics."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "engine": { "experience": ">=1.2.0 <2.0.0" } }\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"15-testing--quality-assurance",children:"15. Testing & Quality Assurance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Functional"}),": loads without errors; features work as specified; data correct; forms submit."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": cannot access unauthorized APIs; no sensitive data exposed; CSP clean; permission boundaries respected."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": acceptable load times; no memory leaks; UI smoothness; handles large data."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Integration"}),": plays well with other plugins; theming applies; navigation/session correct."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"16-deployment-process",children:"16. Deployment Process"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Development \u2192 Testing \u2192 Staging \u2192 Production\n"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Development"}),": build locally; mock data; validate requirements."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testing"}),": deploy to test; QA verification; security scan."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Staging"}),": deploy; customer UAT; performance validation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production"}),": enable per tenant; monitor metrics; allow gradual rollout."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rollback"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Immediate: ",(0,r.jsx)(n.strong,{children:"Quarantine"})," (blocks bundle and API/SSE; 403 with ",(0,r.jsx)(n.code,{children:"X-Plugin-Quarantined: 1"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Fast: disable in manifest."}),"\n",(0,r.jsx)(n.li,{children:"Complete: remove plugin entry."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Import maps & peers (host\u2011provided)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script type="importmap">\r\n{\r\n  "imports": {\r\n    "react": "/vendor/react@18.esm.js",\r\n    "react-dom": "/vendor/react-dom@18.esm.js",\r\n    "@empowernow/ui": "/vendor/empowernow-ui@x.y.esm.js"\r\n  }\r\n}\r\n<\/script>\n'})}),"\n",(0,r.jsx)(n.p,{children:"Benefits: React dedupe, smaller bundles, fewer runtime mismatches, strict CSP. Treat peers as externals."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SBOM"}),": CI can emit CycloneDX (",(0,r.jsx)(n.code,{children:"npm run sbom"}),"); publish as artifact (no runtime coupling)."]}),"\n",(0,r.jsx)(n.h3,{id:"developer-workflow-build--place--configure--deploy--verify",children:"Developer workflow (Build \u2192 Place \u2192 Configure \u2192 Deploy \u2192 Verify)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Build"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Author routes and/or widgets and export as ESM."}),"\n",(0,r.jsxs)(n.li,{children:["Externalize ",(0,r.jsx)(n.code,{children:"react"}),", ",(0,r.jsx)(n.code,{children:"react-dom"}),", and ",(0,r.jsx)(n.code,{children:"@empowernow/ui"})," (host provides peers via import maps)."]}),"\n",(0,r.jsxs)(n.li,{children:["Produce a single file bundle, for example ",(0,r.jsx)(n.code,{children:"index.esm.js"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Build examples (turnkey):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"esbuild (CLI one\u2011liner):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx esbuild src/index.tsx --bundle --format=esm --platform=browser --target=es2020 \\\r\n  --outfile=dist/index.esm.js \\\r\n  --external:react --external:react-dom --external:@empowernow/ui\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["esbuild (Node script ",(0,r.jsx)(n.code,{children:"build.mjs"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { build } from 'esbuild';\r\n\r\nawait build({\r\n  entryPoints: ['src/index.tsx'],\r\n  bundle: true,\r\n  format: 'esm',\r\n  platform: 'browser',\r\n  target: 'es2020',\r\n  outfile: 'dist/index.esm.js',\r\n  external: ['react', 'react-dom', '@empowernow/ui'],\r\n  jsx: 'automatic',\r\n});\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Rollup (",(0,r.jsx)(n.code,{children:"rollup.config.mjs"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import resolve from '@rollup/plugin-node-resolve';\r\nimport commonjs from '@rollup/plugin-commonjs';\r\nimport esbuild from 'rollup-plugin-esbuild';\r\n\r\nexport default {\r\n  input: 'src/index.tsx',\r\n  external: ['react', 'react-dom', '@empowernow/ui'],\r\n  output: { file: 'dist/index.esm.js', format: 'esm' },\r\n  plugins: [\r\n    resolve({ browser: true }),\r\n    commonjs(),\r\n    esbuild({ jsx: 'automatic', target: 'es2020' }),\r\n  ],\r\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Place the resulting ",(0,r.jsx)(n.code,{children:"dist/index.esm.js"})," at ",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/plugins/<pluginId>/<version>/index.esm.js"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Place"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Copy the built bundle to ",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/plugins/<pluginId>/<version>/index.esm.js"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add or update the entry under ",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/config/plugins.yaml"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"id"}),", ",(0,r.jsx)(n.code,{children:"version"}),", ",(0,r.jsx)(n.code,{children:"engine.experience"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"bundle.file"})," to ",(0,r.jsx)(n.code,{children:"/app/plugins/<pluginId>/<version>/index.esm.js"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"contributions"})," and ",(0,r.jsx)(n.code,{children:"permissions"})," (method+path allow\u2011lists and optional SSE prefixes)."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Deploy"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["BFF containers mount:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/plugins:/app/plugins:ro"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/config:/app/config:ro"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Restart/reload the BFF to pick up config changes and bundles."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /api/plugins/manifests"})," shows your plugin."]}),"\n",(0,r.jsxs)(n.li,{children:["SPA loads ",(0,r.jsx)(n.code,{children:"/api/plugins/bundle?..."})," with 200 and strong caching headers."]}),"\n",(0,r.jsx)(n.li,{children:"PDP pre\u2011gating permits your contributions; widgets/routes render."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"17-operations-guide",children:"17. Operations Guide"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Monitoring dashboard"})," (labels: ",(0,r.jsx)(n.code,{children:"{tenant, plugin_id}"}),"): active plugins per tenant, error rates, load times, authorization denials."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common tasks"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Task"}),(0,r.jsx)(n.th,{children:"How"}),(0,r.jsx)(n.th,{children:"Time"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Enable/disable plugin"}),(0,r.jsx)(n.td,{children:"Update manifest"}),(0,r.jsx)(n.td,{children:"~1 min"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Quarantine/unquarantine"}),(0,r.jsx)(n.td,{children:"API call"}),(0,r.jsx)(n.td,{children:"Instant"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Check plugin health"}),(0,r.jsx)(n.td,{children:"View dashboard"}),(0,r.jsx)(n.td,{children:"Instant"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Update permissions"}),(0,r.jsx)(n.td,{children:"Adjust PDP/allow\u2011lists"}),(0,r.jsx)(n.td,{children:"~5 min"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Troubleshooting"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin won\u2019t load"}),": check ",(0,r.jsx)(n.code,{children:"/api/plugins/manifests"}),"; verify PDP; check console; confirm version guard."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"403s"}),": ensure ",(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"})," header; review allow\u2011list templates; confirm PDP rules; look for ",(0,r.jsx)(n.code,{children:"X-Allowlist-Violation: 1"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": inspect bundle size; API call frequency; backend latency; memory leaks."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"operational-procedures",children:"Operational procedures"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Atomic rollout (recommended)"}),": stage new bundles under ",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/plugins/.staged/..."})," and flip to ",(0,r.jsx)(n.code,{children:"/app/plugins/<id>/<version>"})," in one step to avoid broken references."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integrity management (optional, recommended)"}),": compute sha256 of the final ESM and set ",(0,r.jsx)(n.code,{children:'bundle.integrity: "sha256:<hex>"'}),"; on mismatch the BFF fails closed with 409 and ",(0,r.jsx)(n.code,{children:"X-Integrity-Error: 1"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quarantine"}),": immediate kill switch to block serving and use.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"POST /api/plugins/quarantine/{plugin_id}"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"POST /api/plugins/unquarantine/{plugin_id}"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hot reload of manifests"}),": ",(0,r.jsx)(n.code,{children:"POST /api/plugins/refresh"})," reloads ",(0,r.jsx)(n.code,{children:"plugins.yaml"})," without container rebuilds."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring (minimum)"}),": track bundle serve outcomes/latencies and allow\u2011list denials by ",(0,r.jsx)(n.code,{children:"{tenant, plugin_id, version}"}),"; alert on quarantine/integrity errors."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backups"}),": treat ",(0,r.jsx)(n.code,{children:"ServiceConfigs"})," as configuration SoT; ensure your normal config backup processes include the plugins folder and ",(0,r.jsx)(n.code,{children:"plugins.yaml"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"18-configuration-management-bff-stores--serves",children:"18. Configuration Management (BFF Stores & Serves)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source\u2011of\u2011truth config"})," (",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/config"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"routes.yaml"})," \u2014 public/internal endpoints and service targets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"settings.yaml"})," \u2014 CORS/dev origins, redirect origins, security toggles"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"plugins.yaml"})," \u2014 plugin manifest entries (YAML)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"storage-layout-source-of-truth",children:"Storage layout (source of truth)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Host filesystem (checked into your configuration repo):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/plugins/<pluginId>/<version>/index.esm.js"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Container mount (BFF):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/app/plugins"})," (read\u2011only)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration (BFF):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/config/plugins.yaml"})," declares each plugin plus its bundle file path"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Storage & mounts (visual)"}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart LR\r\n  subgraph HOST["Host Filesystem (ServiceConfigs)"]\r\n    FS_PLUG["ServiceConfigs/BFF/plugins/<id>/<version>/index.esm.js"]\r\n    FS_CFG["ServiceConfigs/BFF/config/plugins.yaml"]\r\n  end\r\n\r\n  subgraph BFF_CNT["BFF Container"]\r\n    APP_PLUG["/app/plugins (ro)"]\r\n    APP_CFG["/app/config (ro)"]\r\n    REG["Plugin Registry"]\r\n  end\r\n\r\n  FS_PLUG -- docker\u2011compose mount --\x3e APP_PLUG\r\n  FS_CFG -- docker\u2011compose mount --\x3e APP_CFG\r\n  APP_CFG -- load manifests --\x3e REG\r\n  REG -- serve --\x3e API_MAN["GET /api/plugins/manifests"]\r\n  REG -- serve (file) --\x3e API_BUND["GET /api/plugins/bundle"]'}),"\n",(0,r.jsx)(n.h4,{id:"compose-mounts-bff",children:"Compose mounts (BFF)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"docker-compose-authzen4.yml"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/plugins:/app/plugins:ro"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/config:/app/config:ro"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"docker-compose-nowconnect.yml"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/plugins:/app/plugins:ro"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"../ServiceConfigs/BFF/config:/app/config:ro"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"plugin-config-serviceconfigsbffconfigpluginsyaml",children:["Plugin config (",(0,r.jsx)(n.code,{children:"ServiceConfigs/BFF/config/plugins.yaml"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Example (hello, page, and widget plugins):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'tenants:\r\n  experience.ocg.labs.empowernow.ai:\r\n    - id: hello\r\n      version: "1.0.0"\r\n      engine:\r\n        experience: ">=1.0.0"\r\n      bundle:\r\n        file: "/app/plugins/hello/1.0.0/index.esm.js"\r\n        # integrity: "sha256:<optional_hex_hash>"\r\n      permissions:\r\n        api:\r\n          - method: GET\r\n            path: /api/plugins/secure-echo\r\n          - method: POST\r\n            path: /api/plugins/telemetry\r\n        sse: []\r\n      contributions:\r\n        routes:\r\n          - path: /hello\r\n            component: Hello\r\n            resource: plugin.route\r\n            action: view\r\n        widgets:\r\n          - slot: dashboard.main\r\n            component: HelloWidget\r\n            resource: plugin.widget\r\n            action: view\r\n\r\n    - id: hello-page\r\n      version: "1.0.0"\r\n      engine:\r\n        experience: ">=1.0.0"\r\n      bundle:\r\n        file: "/app/plugins/hello-page/1.0.0/index.esm.js"\r\n      permissions:\r\n        api:\r\n          - method: GET\r\n            path: /api/plugins/secure-echo\r\n        sse: []\r\n      contributions:\r\n        routes:\r\n          - path: /hello-page\r\n            component: HelloPage\r\n            resource: plugin.route\r\n            action: view\r\n\r\n    - id: hello-widget\r\n      version: "1.0.0"\r\n      engine:\r\n        experience: ">=1.0.0"\r\n      bundle:\r\n        file: "/app/plugins/hello-widget/1.0.0/index.esm.js"\r\n      permissions:\r\n        api:\r\n          - method: POST\r\n            path: /api/plugins/telemetry\r\n        sse: []\r\n      contributions:\r\n        widgets:\r\n          - slot: dashboard.main\r\n            component: HelloWidget\r\n            resource: plugin.widget\r\n            action: view\n'})}),"\n",(0,r.jsx)(n.p,{children:"Key fields:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"/",(0,r.jsx)(n.code,{children:"version"}),"/",(0,r.jsx)(n.code,{children:"engine.experience"})," \u2014 identity and compatibility range"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bundle.file"})," \u2014 absolute file path inside the container under ",(0,r.jsx)(n.code,{children:"/app/plugins"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bundle.integrity"})," (optional) \u2014 content hash enforced at serve time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"permissions"})," \u2014 allow\u2011list of method+path templates and SSE prefixes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"contributions"})," \u2014 routes and/or widgets with PDP hints"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"runtime-view",children:"Runtime view"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Manifests are served as JSON from ",(0,r.jsx)(n.code,{children:"GET /api/plugins/manifests"})," (",(0,r.jsx)(n.code,{children:"PluginManifest[]"}),"), scoped by tenant host."]}),"\n",(0,r.jsxs)(n.li,{children:["Bundles are served same\u2011origin from ",(0,r.jsx)(n.code,{children:"GET /api/plugins/bundle?entry=<id>&id=<id>"})," as ESM (",(0,r.jsx)(n.code,{children:"text/javascript"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Enforcement data is derived from manifest permissions: method + path templates (optional ",(0,r.jsx)(n.code,{children:"params"})," shapes like ",(0,r.jsx)(n.code,{children:"uuid"}),"); compiled to safe regex after path normalization; evaluated per request in memory."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bff-serving-logic",children:"BFF serving logic"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For each request to ",(0,r.jsx)(n.code,{children:"/api/plugins/bundle?..."})," the BFF:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Checks quarantine \u21d2 403 with ",(0,r.jsx)(n.code,{children:"X-Plugin-Quarantined: 1"})," if blocked."]}),"\n",(0,r.jsxs)(n.li,{children:["Resolves ",(0,r.jsx)(n.code,{children:"id"})," to the configured ",(0,r.jsx)(n.code,{children:"bundle.file"})," (from ",(0,r.jsx)(n.code,{children:"plugins.yaml"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Root\u2011jails: only serves files under ",(0,r.jsx)(n.code,{children:"/app/plugins"})," (prevents traversal)."]}),"\n",(0,r.jsxs)(n.li,{children:["Integrity (optional): if ",(0,r.jsx)(n.code,{children:"integrity"})," is set, verify the sha256 of file content; on mismatch, return 409 with ",(0,r.jsx)(n.code,{children:"X-Integrity-Error: 1"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Serves via file streaming with headers:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Content-Type: text/javascript; charset=utf-8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ETag: sha256-<hex>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cache-Control: public, max-age=31536000, immutable"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"X-Content-Type-Options: nosniff"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cross-Origin-Resource-Policy: same-origin"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Authentication: the bundle route is ",(0,r.jsx)(n.code,{children:"auth: session"})," in ",(0,r.jsx)(n.code,{children:"routes.yaml"}),"; an authenticated session is required to fetch bundles."]}),"\n",(0,r.jsx)(n.li,{children:"Security: Same\u2011origin ESM means no CSP relaxation."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"response-formats",children:"Response formats"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/plugins/manifests"})," \u2192 ",(0,r.jsx)(n.code,{children:"application/json"})," \u2192 ",(0,r.jsx)(n.code,{children:"PluginManifest[]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/plugins/bundle"})," \u2192 ",(0,r.jsx)(n.code,{children:"text/javascript"})," \u2192 ESM module with ",(0,r.jsx)(n.code,{children:"routes"}),"/",(0,r.jsx)(n.code,{children:"widgets"})," exports"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"operations-endpoints",children:"Operations endpoints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/refresh"})," \u2014 reload manifests from config (",(0,r.jsx)(n.code,{children:"plugins.yaml"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/quarantine/{id}"})," \u2014 immediate block of serving and enforcement for a plugin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/unquarantine/{id}"})," \u2014 unblock a quarantined plugin"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Related deep dives"}),": ",(0,r.jsx)(n.code,{children:"experience_plugins.md"}),", ",(0,r.jsx)(n.code,{children:"../ms_bff_spike/ms_bff/docs/bff_config.md"}),", ",(0,r.jsx)(n.code,{children:"e2e.md"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"19-security-details-headers--auth-flow",children:"19. Security Details (Headers & Auth Flow)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Baseline headers"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Security-Policy: default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; font-src 'self'; connect-src 'self'; frame-ancestors 'none'; base-uri 'none'; object-src 'none'; require-trusted-types-for 'script'; trusted-types react empowernow-sdk;\r\nPermissions-Policy: accelerometer=(), autoplay=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()\r\nVary: Cookie, X-Plugin-Id\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Auth flow"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["User logs into Experience; session cookie is ",(0,r.jsx)(n.strong,{children:"httpOnly + secure"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["All plugin requests include cookie; SDK stamps ",(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"BFF validates session and allow\u2011lists; forwards PDP checks; no browser tokens."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Edge hardening"}),": Permissions\u2011Policy deny\u2011by\u2011default; Trusted Types in ",(0,r.jsx)(n.strong,{children:"report\u2011only"})," to surface unexpected sinks."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"20-business-benefits-guidance--placeholders",children:"20. Business Benefits (Guidance & Placeholders)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," The section below is a template. Replace every placeholder with ",(0,r.jsx)(n.strong,{children:"measured data"})," from your deployments. We intentionally avoid unverified claims."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cost--speed",children:"Cost & Speed"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Summarize ",(0,r.jsx)(n.em,{children:"actual"})," time-to-value deltas (e.g., prototype \u2192 production) from specific projects/tenants."]}),"\n",(0,r.jsx)(n.li,{children:"Note any reduction in change requests or maintenance incidents attributable to plugins."}),"\n",(0,r.jsx)(n.li,{children:"Document instances where plugins were upgraded independently of the host (date, scope, outcome)."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"potential-revenue-levers-if-applicable",children:"Potential Revenue Levers (If Applicable)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"List monetized plugins or add-ons and the pricing model."}),"\n",(0,r.jsxs)(n.li,{children:["Describe partner ecosystem or onboarding improvements ",(0,r.jsx)(n.strong,{children:"with sourced metrics"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"case-studies-insert-real-data",children:"Case Studies (Insert Real Data)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Case #1 \u2014 <tenant/project>"}),": objectives, plugin scope, measured outcomes, dates, and a link to the source (dashboard, ticket, or doc)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Case #2 \u2014 <tenant/project>"}),": objectives, plugin scope, measured outcomes, dates, and source link."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Case #3 \u2014 <tenant/project>"}),": \u2026"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Tip: Cite dashboards or reports (e.g., RUM, APM, data warehouse) beside each metric to ensure auditability."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"21-operational-excellence-slos--dr-framework",children:"21. Operational Excellence (SLOs & DR Framework)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," The figures here are ",(0,r.jsx)(n.em,{children:"templates"}),". Set targets with Ops/SRE after establishing baselines. Do not publish numeric targets without a source."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"slo-framework",children:"SLO Framework"}),"\n",(0,r.jsxs)(n.p,{children:["Define and track the following (per tenant and per ",(0,r.jsx)(n.code,{children:"plugin_id"})," where relevant):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin load time"})," (p95)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"BFF API latency"})," (p50/p95)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Availability"})," (host + BFF)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error rate"})," (by ",(0,r.jsx)(n.code,{children:"plugin_id"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Provide a baseline + target table with owners and data sources:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric"}),(0,r.jsx)(n.th,{children:"Baseline"}),(0,r.jsx)(n.th,{children:"Target"}),(0,r.jsx)(n.th,{children:"Owner"}),(0,r.jsx)(n.th,{children:"Source"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Plugin load time (p95)"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"Web Perf"}),(0,r.jsx)(n.td,{children:"RUM dashboard"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"BFF API latency (p50/p95)"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"Platform"}),(0,r.jsx)(n.td,{children:"APM"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Availability"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"SRE"}),(0,r.jsx)(n.td,{children:"Status/SLI service"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Error rate"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"[TBD]"}),(0,r.jsx)(n.td,{children:"SRE"}),(0,r.jsx)(n.td,{children:"Logs/metrics"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring--alerting-minimum-set",children:"Monitoring & Alerting (Minimum Set)"}),"\n",(0,r.jsxs)(n.p,{children:["Track: plugin load failures, PDP denials, allow\u2011list violations, API error rates/latency by ",(0,r.jsx)(n.code,{children:"plugin_id"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Alerting examples (customize to your baselines):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Error rate thresholds (warning/critical)"}),"\n",(0,r.jsx)(n.li,{children:"Load time thresholds"}),"\n",(0,r.jsxs)(n.li,{children:["Any ",(0,r.jsx)(n.strong,{children:"security violation"})," \u21d2 page on\u2011call"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"disaster-recovery",children:"Disaster Recovery"}),"\n",(0,r.jsx)(n.p,{children:"Document your organization\u2019s DR parameters and procedures here:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RTO"}),": [TBD]"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RPO"}),": [TBD]"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backup cadence/retention"}),": [TBD]"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quarantine procedure"}),": supported via ",(0,r.jsx)(n.code,{children:"/api/plugins/quarantine/{id}"})," (immediate); include runbook link."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"22-competitive-context",children:"22. Competitive Context"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"EmpowerNow"}),(0,r.jsx)(n.th,{children:"Salesforce"}),(0,r.jsx)(n.th,{children:"ServiceNow"}),(0,r.jsx)(n.th,{children:"Microsoft Teams"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Technology"}),(0,r.jsx)(n.td,{children:"Standard React/ESM"}),(0,r.jsx)(n.td,{children:"Proprietary"}),(0,r.jsx)(n.td,{children:"Proprietary"}),(0,r.jsx)(n.td,{children:"iFrames"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Security"}),(0,r.jsx)(n.td,{children:"Multi\u2011layer (CSP+PDP+BFF)"}),(0,r.jsx)(n.td,{children:"Platform\u2011confined"}),(0,r.jsx)(n.td,{children:"Platform\u2011confined"}),(0,r.jsx)(n.td,{children:"Cross\u2011origin seams"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Performance"}),(0,r.jsx)(n.td,{children:"Native import()"}),(0,r.jsx)(n.td,{children:"Good"}),(0,r.jsx)(n.td,{children:"Good"}),(0,r.jsx)(n.td,{children:"Iframe overhead"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Dev speed"}),(0,r.jsx)(n.td,{children:"Days"}),(0,r.jsx)(n.td,{children:"Weeks"}),(0,r.jsx)(n.td,{children:"Weeks"}),(0,r.jsx)(n.td,{children:"Days"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Customization"}),(0,r.jsx)(n.td,{children:"Strong"}),(0,r.jsx)(n.td,{children:"Limited"}),(0,r.jsx)(n.td,{children:"Limited"}),(0,r.jsx)(n.td,{children:"Strong (iframe)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Upgrade path"}),(0,r.jsx)(n.td,{children:"Independent"}),(0,r.jsx)(n.td,{children:"Platform\u2011tied"}),(0,r.jsx)(n.td,{children:"Platform\u2011tied"}),(0,r.jsx)(n.td,{children:"Complex"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Our advantages"}),": no vendor lock\u2011in; better UX (no iframe seams); stronger centralized enforcement; familiar tools."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"23-roadmap-forward-look",children:"23. Roadmap (Forward Look)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Near\u2011term"}),": import\u2011map rollout for peers, enhanced analytics, gradual marketplace, A/B testing hooks.\r\n",(0,r.jsx)(n.strong,{children:"Mid\u2011term"}),": visual plugin builder, AI\u2011assisted scaffolds, cross\u2011tenant sharing options, richer permission templates.\r\n",(0,r.jsx)(n.strong,{children:"Long\u2011term"}),": ML integrations, NL interfaces, predictive customization, collaborative features."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"appendix-a--glossary",children:"Appendix A \u2014 Glossary"}),"\n",(0,r.jsx)(n.p,{children:"Allow\u2011list \u2022 AuthZEN \u2022 BFF \u2022 Bundle \u2022 CSP \u2022 ESM \u2022 Manifest \u2022 PDP \u2022 Plugin \u2022 SDK \u2022 Tenant \u2022 Widget."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"appendix-b--quick-reference",children:"Appendix B \u2014 Quick Reference"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important URLs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Manifests: ",(0,r.jsx)(n.code,{children:"/api/plugins/manifests"})]}),"\n",(0,r.jsxs)(n.li,{children:["Bundles: ",(0,r.jsx)(n.code,{children:"/api/plugins/bundle"})]}),"\n",(0,r.jsxs)(n.li,{children:["Authorization: ",(0,r.jsx)(n.code,{children:"/access/v1/evaluations"})]}),"\n",(0,r.jsxs)(n.li,{children:["Quarantine: ",(0,r.jsx)(n.code,{children:"/api/plugins/quarantine/{id}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Unquarantine: ",(0,r.jsx)(n.code,{children:"/api/plugins/unquarantine/{id}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Refresh manifests: ",(0,r.jsx)(n.code,{children:"/api/plugins/refresh"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key headers"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Id"})," \u2014 identifies calling plugin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X\u2011Plugin\u2011Quarantined"})," \u2014 present when blocked"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X\u2011Allowlist\u2011Violation"})," \u2014 permission denied marker"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X\u2011Integrity\u2011Error"})," \u2014 integrity hash mismatch on bundle serve"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Bundle response headers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Content-Type: text/javascript; charset=utf-8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ETag: sha256-<hex>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cache-Control: public, max-age=31536000, immutable"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"X-Content-Type-Options: nosniff"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cross-Origin-Resource-Policy: same-origin"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Contacts"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dev Support: ",(0,r.jsx)(n.code,{children:"dev-support@empowernow"})]}),"\n",(0,r.jsxs)(n.li,{children:["Operations: ",(0,r.jsx)(n.code,{children:"ops-team@empowernow"})]}),"\n",(0,r.jsxs)(n.li,{children:["Security: ",(0,r.jsx)(n.code,{children:"security@empowernow"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);