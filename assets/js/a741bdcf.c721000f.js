"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2587],{8495:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"website_copy/product_gateway","title":"Product \u2014 ARIA Gateway (MCP PEP)","description":"Overview","source":"@site/docs/website_copy/product_gateway.md","sourceDirName":"website_copy","slug":"/website_copy/product_gateway","permalink":"/empowernow_docs/docs/website_copy/product_gateway","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/website_copy/product_gateway.md","tags":[],"version":"current","frontMatter":{}}');var t=s(74848),r=s(28453);const o={},a="Product \u2014 ARIA Gateway (MCP PEP)",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Boundary enforcement (what\u2019s enforced)",id:"boundary-enforcement-whats-enforced",level:2},{value:"Plan + budget (enforcement lifecycle)",id:"plan--budget-enforcement-lifecycle",level:2},{value:"Example ingress (shape)",id:"example-ingress-shape",level:2},{value:"Obligations and receipts",id:"obligations-and-receipts",level:2},{value:"Interoperability",id:"interoperability",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"product--aria-gateway-mcp-pep",children:"Product \u2014 ARIA Gateway (MCP PEP)"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The ARIA Gateway is a policy enforcement point (PEP) at the agent\u2192tool boundary. It terminates MCP/HTTP requests, verifies the agent\u2019s ARIA Passport, and enforces policy before any tool executes."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["MCP\u2011aware ingress: ",(0,t.jsx)(n.code,{children:"POST /mcp/{tool_id}"})]}),"\n",(0,t.jsx)(n.li,{children:"Normalizes PDP responses (nested or top\u2011level) into enforceable constraints"}),"\n",(0,t.jsx)(n.li,{children:"Executes obligations (e.g., receipts, analytics) on permit"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"boundary-enforcement-whats-enforced",children:"Boundary enforcement (what\u2019s enforced)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Identity binding: pairwise ",(0,t.jsx)(n.code,{children:"sub"})," and ",(0,t.jsx)(n.code,{children:"act.sub"})," from the ARIA Passport; optional PoP (DPoP) support downstream in roadmap"]}),"\n",(0,t.jsxs)(n.li,{children:["Schema pins: verify ",(0,t.jsx)(n.code,{children:"{schema_version, schema_hash}"})," from Tool Registry with rollout grace windows"]}),"\n",(0,t.jsx)(n.li,{children:"Params allowlists: regex by key per tool"}),"\n",(0,t.jsxs)(n.li,{children:["Egress allowlists: host[",":port","] allow\u2011listed; redirects denied unless configured and target still allow\u2011listed"]}),"\n",(0,t.jsx)(n.li,{children:"Plan\u2011step checks: verify plan tool and params fingerprint match signed plan JWS (when present)"}),"\n",(0,t.jsxs)(n.li,{children:["Budget gating: idempotent debit per ",(0,t.jsx)(n.code,{children:"call_id"}),"; 402 if insufficient budget"]}),"\n",(0,t.jsx)(n.li,{children:"Inbound shaping: optional redaction, rails injection, token/byte caps, data_scope tagging"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"plan--budget-enforcement-lifecycle",children:"Plan + budget (enforcement lifecycle)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Read plan contract (JWS) from Passport; check current step matches ",(0,t.jsx)(n.code,{children:"{tool, params_fingerprint}"})]}),"\n",(0,t.jsxs)(n.li,{children:["Debit budget idempotently using ",(0,t.jsx)(n.code,{children:"call_id"}),"; on retry, subsequent debits are 0"]}),"\n",(0,t.jsx)(n.li,{children:"Evaluate with PDP; on deny, stop before tool execution"}),"\n",(0,t.jsx)(n.li,{children:"Enforce inbound caps/allowlists and egress pinning; forward sanitized request to tool"}),"\n",(0,t.jsx)(n.li,{children:"On success, advance plan step; emit signed receipt (hash\u2011chained)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-ingress-shape",children:"Example ingress (shape)"}),"\n",(0,t.jsx)(n.p,{children:"Request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\r\n  "args": {"amount": "12.34", "q": "SFO"},\r\n  "instruction": "search for flights",\r\n  "sql": null\r\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Response (tool\u2019s JSON, sanitized) on permit; on deny, standard HTTP error with reason code (e.g., ",(0,t.jsx)(n.code,{children:"egress_denied"}),", ",(0,t.jsx)(n.code,{children:"plan_step_violation"}),", ",(0,t.jsx)(n.code,{children:"budget_exceeded"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"obligations-and-receipts",children:"Obligations and receipts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"On permit, emit a signed, hash\u2011chained receipt: includes policy snapshot (constraints), schema hash, params hash, and linkage to the previous receipt"}),"\n",(0,t.jsx)(n.li,{children:"Tee analytics with constraints fingerprints and timings (no token bodies)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"interoperability",children:"Interoperability"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Works with any AuthZEN\u2011compatible PDP (nested or top\u2011level constraints)"}),"\n",(0,t.jsx)(n.li,{children:"Consumes Tool Registry metadata (ETag\u2011friendly) for schema pins and rollout"}),"\n",(0,t.jsx)(n.li,{children:"Emits receipts to the Receipt Vault service for signing/anchoring"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"CTAs: See MCP request \u2192 View guards (schema/params/egress) \u2192 Read plan/budget enforcement"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);