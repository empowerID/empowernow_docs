"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2947],{15294:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>f,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"services/bff/reference/admin-config","title":"Admin Configuration Guide","description":"All fields below are present in code.","source":"@site/docs/services/bff/reference/admin-config.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/admin-config","permalink":"/empowernow_docs/docs/services/bff/reference/admin-config","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/admin-config.md","tags":[],"version":"current","frontMatter":{"title":"Admin Configuration Guide"},"sidebar":"tutorialSidebar","previous":{"title":"AI Chat Completions (PDP Enforcement)","permalink":"/empowernow_docs/docs/services/bff/reference/bff-llm-pdp-enforcement"},"next":{"title":"BFF + IdP OAuth (E2E)","permalink":"/empowernow_docs/docs/services/bff/reference/bff-idp-oauth-e2e"}}');var r=s(74848),d=s(28453);const c={title:"Admin Configuration Guide"},o=void 0,l={},t=[{value:"Environment variables",id:"environment-variables",level:2},{value:"Cookies set by BFF",id:"cookies-set-by-bff",level:2},{value:"Headers propagated to services (edge/BFF)",id:"headers-propagated-to-services-edgebff",level:2},{value:"Health and readiness",id:"health-and-readiness",level:2},{value:"Files referenced by code",id:"files-referenced-by-code",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"All fields below are present in code."}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_ISSUER"})," (required): issuer base for discovery and token endpoints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_DYNAMIC_CALLBACK"})," (true|false): dynamic callback reconstruction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_DEFAULT_HOST"}),": used when dynamic callbacks are enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_DEFAULT_SCHEME"}),": defaults to ",(0,r.jsx)(n.code,{children:"https"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_CALLBACK_URL"}),": required when dynamic callbacks are disabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_COOKIE_DOMAIN"}),": domain for ",(0,r.jsx)(n.code,{children:"bff_session"})," cookie; omit domain for localhost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BFF_ALLOWED_REDIRECT_HOSTS"}),": CSV allowlist for absolute return_to safety"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OIDC_SCOPES"}),": space-separated scopes (e.g. must include ",(0,r.jsx)(n.code,{children:"admin.api"}),", ",(0,r.jsx)(n.code,{children:"application.all"})," when needed)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cookies-set-by-bff",children:"Cookies set by BFF"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Session: ",(0,r.jsx)(n.code,{children:"bff_session"})," (HttpOnly, Secure, SameSite=Lax, Domain per ",(0,r.jsx)(n.code,{children:"BFF_COOKIE_DOMAIN"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["CSRF: ",(0,r.jsx)(n.code,{children:"_csrf_token"})," (middleware-managed; HMAC signed; header ",(0,r.jsx)(n.code,{children:"X-CSRF-Token"})," required for state-changing requests)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"headers-propagated-to-services-edgebff",children:"Headers propagated to services (edge/BFF)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-User-ID"}),", ",(0,r.jsx)(n.code,{children:"X-Session-ID"}),", ",(0,r.jsx)(n.code,{children:"X-Auth-Time"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Authorization"})," forwarded as configured"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"health-and-readiness",children:"Health and readiness"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /health"})," returns JSON with Redis and IdP checks"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"files-referenced-by-code",children:"Files referenced by code"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"config/routes.yaml"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"config/idps.yaml"})}),"\n"]})]})}function f(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var i=s(96540);const r={},d=i.createContext(r);function c(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);