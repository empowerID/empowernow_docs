"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2912],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var i=n(96540);const r={},o=i.createContext(r);function s(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:t},e.children)}},40322:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"website_copy/product_bff","title":"Product \u2014 BFF: Spending Control for AI Providers","description":"Overview","source":"@site/docs/website_copy/product_bff.md","sourceDirName":"website_copy","slug":"/website_copy/product_bff","permalink":"/empowernow_docs/docs/website_copy/product_bff","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/website_copy/product_bff.md","tags":[],"version":"current","frontMatter":{}}');var r=n(74848),o=n(28453);const s={},c="Product \u2014 BFF: Spending Control for AI Providers",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Stream\u2011time enforcement",id:"streamtime-enforcement",level:2},{value:"Leakage guards (optional)",id:"leakage-guards-optional",level:2},{value:"Budget hold/settle",id:"budget-holdsettle",level:2},{value:"Interoperability",id:"interoperability",level:2}];function a(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"product--bff-spending-control-for-ai-providers",children:"Product \u2014 BFF: Spending Control for AI Providers"})}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(t.p,{children:["The ARIA BFF is a drop\u2011in replacement for your existing provider proxy that upgrades runtime control without changing the external API surface (e.g., ",(0,r.jsx)(t.code,{children:"/chat/completions"}),"). It consumes PDP constraints, enforces caps while streaming, and settles receipts on completion."]}),"\n",(0,r.jsx)(t.h2,{id:"streamtime-enforcement",children:"Stream\u2011time enforcement"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Live token/output caps from PDP (",(0,r.jsx)(t.code,{children:"tokens.max_output"}),", ",(0,r.jsx)(t.code,{children:"tokens.max_stream"}),") guide the streaming loop"]}),"\n",(0,r.jsx)(t.li,{children:"Early stop with policy\u2011driven warning when limits are reached"}),"\n",(0,r.jsx)(t.li,{children:"Preserves provider\u2011native SSE shape to the client"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"leakage-guards-optional",children:"Leakage guards (optional)"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Rails injection (system prefix/suffix) to constrain model behavior"}),"\n",(0,r.jsx)(t.li,{children:"Redaction of sensitive content in prompts before logging/receipt hashing"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"budget-holdsettle",children:"Budget hold/settle"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Per\u2011agent budget is debited idempotently using ",(0,r.jsx)(t.code,{children:"call_id"})," at invocation time"]}),"\n",(0,r.jsxs)(t.li,{children:["On retries, additional debits are 0; on exceed, return ",(0,r.jsx)(t.code,{children:"402 budget_exceeded"})]}),"\n",(0,r.jsx)(t.li,{children:"On success, a signed, hash\u2011chained receipt is emitted (policy snapshot, schema hash, params hash)"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"interoperability",children:"Interoperability"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Compatible with multiple providers; constraints come from the PDP, not provider\u2011specific configuration"}),"\n",(0,r.jsx)(t.li,{children:"Works alongside the ARIA Gateway; both emit receipts to the Receipt Vault"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"CTAs: See streaming caps \u2192 View 402 behavior \u2192 Read receipts guide"})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);