"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[7052],{8307:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"services/bff/how-to/spa-integration","title":"SPA Integration (React)","description":"Integration pattern verified in code.","source":"@site/docs/services/bff/how-to/spa-integration.md","sourceDirName":"services/bff/how-to","slug":"/services/bff/how-to/spa-integration","permalink":"/empowernow_docs/docs/services/bff/how-to/spa-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/how-to/spa-integration.md","tags":[],"version":"current","frontMatter":{"title":"SPA Integration (React)"},"sidebar":"tutorialSidebar","previous":{"title":"SPA Auth Flows with the BFF","permalink":"/empowernow_docs/docs/services/bff/how-to/spa-auth-flows"},"next":{"title":"SSE and WebSockets \u2014 Guidance","permalink":"/empowernow_docs/docs/services/bff/how-to/sse-websockets"}}');var o=n(74848),r=n(28453);const i={title:"SPA Integration (React)"},c=void 0,a={},d=[];function l(e){const t={code:"code",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Integration pattern verified in code."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Use same-origin ",(0,o.jsx)(t.code,{children:"/api/**"})," calls; set constant ",(0,o.jsx)(t.code,{children:"API_BASE='/api'"})," in frontend"]}),"\n",(0,o.jsxs)(t.li,{children:["Unauthenticated flows return 401 JSON; SPA should redirect to ",(0,o.jsx)(t.code,{children:"/auth/login"})]}),"\n",(0,o.jsxs)(t.li,{children:["Session check endpoint: ",(0,o.jsx)(t.code,{children:"GET /api/auth/session"})," \u2192 ",(0,o.jsx)(t.code,{children:"{ authenticated: boolean, ... }"})]}),"\n",(0,o.jsxs)(t.li,{children:["CSRF: ",(0,o.jsx)(t.code,{children:"_csrf_token"})," cookie set on safe GET; send ",(0,o.jsx)(t.code,{children:"X-CSRF-Token"})," for state-changing calls"]}),"\n",(0,o.jsxs)(t.li,{children:["CORS allowlist read from ",(0,o.jsx)(t.code,{children:"CORS__ALLOW_ORIGINS"})," / ",(0,o.jsx)(t.code,{children:"CORS_ALLOW_ORIGINS"})]}),"\n"]}),"\n",(0,o.jsx)(t.mermaid,{value:"sequenceDiagram\r\n  autonumber\r\n  participant SPA\r\n  participant BFF\r\n  SPA->>BFF: GET /api/auth/session\r\n  alt authenticated\r\n    BFF--\x3e>SPA: 200 {authenticated:true}\r\n    SPA->>BFF: GET /api/resource\r\n    BFF--\x3e>SPA: 200 JSON\r\n  else unauthenticated\r\n    BFF--\x3e>SPA: 401 {authenticated:false}\r\n    SPA->>BFF: GET /auth/login\r\n  end"})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(96540);const o={},r=s.createContext(o);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);