"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[8761],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},69460:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"website_copy/product_idp","title":"Product \u2014 IdP: Agent Passports","description":"Overview","source":"@site/docs/website_copy/product_idp.md","sourceDirName":"website_copy","slug":"/website_copy/product_idp","permalink":"/empowernow_docs/docs/website_copy/product_idp","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/website_copy/product_idp.md","tags":[],"version":"current","frontMatter":{}}');var t=i(74848),a=i(28453);const r={},c="Product \u2014 IdP: Agent Passports",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Why it matters",id:"why-it-matters",level:2},{value:"Identity Chaining (feature\u2011flagged)",id:"identity-chaining-featureflagged",level:2},{value:"Plan Contracts and Schema Pins",id:"plan-contracts-and-schema-pins",level:2},{value:"Claims Reference (example)",id:"claims-reference-example",level:2},{value:"Security Model",id:"security-model",level:2},{value:"Discoverability and Docs",id:"discoverability-and-docs",level:2},{value:"Interoperability",id:"interoperability",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"product--idp-agent-passports",children:"Product \u2014 IdP: Agent Passports"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Issue ARIA Passports for AI agents via OAuth Token Exchange (RFC 8693) with Rich Authorization Requests (RFC 9396). Passports carry least\u2011privilege context for agents:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pairwise identities (",(0,t.jsx)(n.code,{children:"sub"}),") and actor chain (",(0,t.jsx)(n.code,{children:"act.sub"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Plan contracts (JWS) and tool schema pins from the Tool Registry"}),"\n",(0,t.jsxs)(n.li,{children:["Optional DPoP binding (",(0,t.jsx)(n.code,{children:"cnf.jkt"}),", RFC 9449)"]}),"\n",(0,t.jsx)(n.li,{children:"Policy\u2011gated identity chaining endpoints"}),"\n",(0,t.jsx)(n.li,{children:"Discovery + JWKS and ARIA claims documentation endpoints"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"why-it-matters",children:"Why it matters"}),"\n",(0,t.jsx)(n.p,{children:"Move agent governance \u201cleft\u201d into identity. Instead of loose API keys or opaque tokens, agents receive verifiable, purpose\u2011built credentials that encode plan discipline, schema integrity, budgets/max_steps, and (optionally) proof\u2011of\u2011possession."}),"\n",(0,t.jsx)(n.h2,{id:"identity-chaining-featureflagged",children:"Identity Chaining (feature\u2011flagged)"}),"\n",(0,t.jsxs)(n.p,{children:["Two flows are supported; both are gated by PDP constraints (",(0,t.jsx)(n.code,{children:"constraints.identity_chain"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Delegated assertion: mint a short\u2011lived Identity Assertion JWT","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["POST ",(0,t.jsx)(n.code,{children:"/api/oidc/oauth/identity-assertion"})]}),"\n",(0,t.jsxs)(n.li,{children:["Inputs: ",(0,t.jsx)(n.code,{children:"subject_token"}),", (optional) ",(0,t.jsx)(n.code,{children:"actor_token"}),", ",(0,t.jsx)(n.code,{children:"audience"}),", optional ",(0,t.jsx)(n.code,{children:"scope"})]}),"\n",(0,t.jsxs)(n.li,{children:["Output: ",(0,t.jsx)(n.code,{children:"{ assertion, token_type, expires_in }"})," (\u2264 configured TTL, max ~300s)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Brokered exchange: exchange the assertion at a SaaS AS","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["POST ",(0,t.jsx)(n.code,{children:"/api/oidc/oauth/identity-chain/token"})]}),"\n",(0,t.jsxs)(n.li,{children:["Inputs: ",(0,t.jsx)(n.code,{children:"subject_token"}),", (optional) ",(0,t.jsx)(n.code,{children:"actor_token"}),", ",(0,t.jsx)(n.code,{children:"audience"}),", optional ",(0,t.jsx)(n.code,{children:"scope"}),", ",(0,t.jsx)(n.code,{children:"token_endpoint"}),", ",(0,t.jsx)(n.code,{children:"client_auth"})]}),"\n",(0,t.jsxs)(n.li,{children:["Output: downstream ",(0,t.jsx)(n.code,{children:"{ access_token, expires_in, ... }"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"PDP decides which audiences/scopes are allowed, TTL caps, and whether DPoP/MTLS are required. IdP enforces those constraints before minting."}),"\n",(0,t.jsx)(n.h2,{id:"plan-contracts-and-schema-pins",children:"Plan Contracts and Schema Pins"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Plan JWS: signed plan with step indices, params fingerprints, and max cost per step; gives PEPs a verifiable contract for step discipline."}),"\n",(0,t.jsxs)(n.li,{children:["Schema pins: ",(0,t.jsx)(n.code,{children:"{schema_version, schema_hash}"})," for each requested tool, pulled from the Tool Registry; enables rollout windows while preventing shape drift."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"claims-reference-example",children:"Claims Reference (example)"}),"\n",(0,t.jsxs)(n.p,{children:["A passport extends standard JWT claims with ",(0,t.jsx)(n.code,{children:"authorization_details"})," (RAR) and an ARIA section:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\r\n  "iss": "https://idp.example.com",\r\n  "sub": "pairwise:9a7b1c2d3e4f5a6b",\r\n  "aud": "aria.gateway",\r\n  "exp": 1735689600,\r\n  "iat": 1735686000,\r\n  "jti": "be0bfe61-2c36-4b72-9d8a-34a5f3c2a108",\r\n  "act": { "sub": "agent:svc-123:for:9a7b1c2d3e4f5a6b" },\r\n  "authorization_details": [\r\n    {\r\n      "type": "aria_agent_delegation",\r\n      "tools": ["mcp:flights:search"],\r\n      "schema_pins": {"mcp:flights:search": {"schema_version": "1.2.0", "schema_hash": "sha256:..."}}\r\n    }\r\n  ],\r\n  "aria": {\r\n    "bound_sub": "pairwise:9a7b1c2d3e4f5a6b",\r\n    "tenant": "acme",\r\n    "schema_pins": {"mcp:flights:search": {"schema_version": "1.2.0", "schema_hash": "sha256:..."}},\r\n    "plan_contract_jws": "<JWS or null>",\r\n    "call_id": "79dfe9b6-5d0e-4b6e-ae9a-d68a1f0c0e0f",\r\n    "budget": {"initial": 100.00, "currency": "USD"},\r\n    "max_steps": 20\r\n  },\r\n  "cnf": { "jkt": "base64url(SHA256(JWK_thumbprint))" }\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"security-model",children:"Security Model"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["DPoP binding at token endpoint (optional) with replay protection (JTI cache); ",(0,t.jsx)(n.code,{children:"cnf.jkt"})," signals PoP."]}),"\n",(0,t.jsxs)(n.li,{children:["Pairwise subjects mitigate cross\u2011audience linkability; agent ",(0,t.jsx)(n.code,{children:"act.sub"})," binds the user\u2192service relationship."]}),"\n",(0,t.jsx)(n.li,{children:"Plan JWS + schema pins ensure step/order and shape integrity."}),"\n",(0,t.jsx)(n.li,{children:"Fail\u2011closed defaults on invalid/missing RAR, inactive delegations, or audience mismatch."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"discoverability-and-docs",children:"Discoverability and Docs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Discovery advertises supported RAR types, identity chaining endpoints, and DPoP capability."}),"\n",(0,t.jsxs)(n.li,{children:["JWKS exposed at both ",(0,t.jsx)(n.code,{children:"/jwks"})," and ",(0,t.jsx)(n.code,{children:"/.well-known/jwks.json"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["ARIA docs endpoints:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET /aria-metadata"})," \u2014 feature flags and capability snapshot"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET /aria-claims"})," \u2014 claims schema and examples"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"interoperability",children:"Interoperability"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ARIA Gateway accepts Passports as Bearer or (optionally) PoP."}),"\n",(0,t.jsx)(n.li,{children:"PDP governs identity chaining audiences/scopes/TTL; Gateway enforces constraints and obligations."}),"\n",(0,t.jsx)(n.li,{children:"Tool Registry is authoritative for pins; Receipt Vault signs and chains receipts downstream."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"CTAs: See identity chaining \u2192 Read claims reference \u2192 View discovery/JWKS"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);