"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2134],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(96540);const r={},c=i.createContext(r);function l(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:n},e.children)}},76880:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"services/experience/api-reference","title":"Plugins API Reference (BFF-facing)","description":"API endpoints for Experience plugins (manifests, bundles, refresh, quarantine) and expected headers.","source":"@site/docs/services/experience/api-reference.md","sourceDirName":"services/experience","slug":"/services/experience/api-reference","permalink":"/empowernow_docs/docs/services/experience/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/api-reference.md","tags":[],"version":"current","frontMatter":{"title":"Plugins API Reference (BFF-facing)","sidebar_label":"Plugins API Reference","description":"API endpoints for Experience plugins (manifests, bundles, refresh, quarantine) and expected headers."},"sidebar":"tutorialSidebar","previous":{"title":"EmpowerNow Experience (End\u2011User App)","permalink":"/empowernow_docs/docs/services/experience/"},"next":{"title":"Authorization (AuthZEN)","permalink":"/empowernow_docs/docs/services/experience/authorization-authzen"}}');var r=s(74848),c=s(28453);const l={title:"Plugins API Reference (BFF-facing)",sidebar_label:"Plugins API Reference",description:"API endpoints for Experience plugins (manifests, bundles, refresh, quarantine) and expected headers."},d=void 0,o={},t=[{value:"Endpoints",id:"endpoints",level:2},{value:"Headers",id:"headers",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /api/plugins/manifests"})," \u2192 ",(0,r.jsx)(n.code,{children:"PluginManifest[]"})," (scoped by tenant host)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /api/plugins/bundle?entry=<id>&id=<id>"})," \u2192 ESM bundle file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/refresh"})," \u2192 reload manifests from config"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/quarantine/{id}"})," \u2192 quarantine a plugin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/unquarantine/{id}"})," \u2192 reverse quarantine"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"headers",children:"Headers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Baseline response headers (bundles):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Content-Type: text/javascript; charset=utf-8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ETag: sha256-<hex>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cache-Control: public, max-age=31536000, immutable"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"X-Content-Type-Options: nosniff"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Cross-Origin-Resource-Policy: same-origin"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Caching correctness:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Vary: Cookie, X-Plugin-Id"})," on manifests/bundles"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Enforcement signals:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Plugin-Quarantined: 1"})," (403) when blocked"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Allowlist-Violation: 1"})," (403) when allow-list fails"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Integrity-Error: 1"})," (409) on hash mismatch"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See also: Canonical plugin reference ",(0,r.jsx)(n.code,{children:"./experience_plugins"})," and Ops Runbook ",(0,r.jsx)(n.code,{children:"./ops-runbook"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);