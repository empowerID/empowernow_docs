"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[8039],{28453:(e,s,r)=>{r.d(s,{R:()=>c,x:()=>o});var n=r(96540);const i={},t=n.createContext(i);function c(e){const s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(t.Provider,{value:s},e.children)}},61462:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"services/crud-service/secrets/admin-howto","title":"Admin how\u2011to","description":"Setup, rotate, backup/restore, version lifecycle","source":"@site/docs/services/crud-service/secrets/07-admin-howto.md","sourceDirName":"services/crud-service/secrets","slug":"/services/crud-service/secrets/admin-howto","permalink":"/empowernow_docs/docs/services/crud-service/secrets/admin-howto","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/secrets/07-admin-howto.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Admin how\u2011to","description":"Setup, rotate, backup/restore, version lifecycle"},"sidebar":"tutorialSidebar","previous":{"title":"Observability","permalink":"/empowernow_docs/docs/services/crud-service/secrets/observability"},"next":{"title":"Developer guide","permalink":"/empowernow_docs/docs/services/crud-service/secrets/developer-guide"}}');var i=r(74848),t=r(28453);const c={title:"Admin how\u2011to",description:"Setup, rotate, backup/restore, version lifecycle"},o=void 0,l={},d=[];function a(e){const s={code:"code",li:"li",ol:"ol",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"Setup"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Configure providers: ",(0,i.jsx)(s.code,{children:"VAULT_URL"}),", ",(0,i.jsx)(s.code,{children:"VAULT_TOKEN"})," (or AppRole), mounts"]}),"\n",(0,i.jsxs)(s.li,{children:["Enable PDP: ",(0,i.jsx)(s.code,{children:"ENABLE_AUTHORIZATION=true"})," with policy backend"]}),"\n",(0,i.jsxs)(s.li,{children:["Set tenant guards: ",(0,i.jsx)(s.code,{children:"TENANT_ID"}),", ",(0,i.jsx)(s.code,{children:"TENANT_ALLOWED_MOUNTS"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Procedures"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Initial setup","\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Set provider env vars and create KVv2 mount/policy"}),"\n",(0,i.jsx)(s.li,{children:"Set TENANT_* and enable PDP/scopes"}),"\n",(0,i.jsx)(s.li,{children:"Deploy and verify health/metrics"}),"\n",(0,i.jsx)(s.li,{children:"Create sample secret and read via Canonical URI"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Rotation playbook","\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Approve change (ticket) \u2192 execute ",(0,i.jsx)(s.code,{children:"/api/secrets/rotate"})," or bulk ",(0,i.jsx)(s.code,{children:"rotate"})]}),"\n",(0,i.jsx)(s.li,{children:"Verify provider version increment, app reads new value, audits emitted"}),"\n",(0,i.jsx)(s.li,{children:"Rollback: rotate back to prior version"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Backup/restore (KVv2)","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Use provider snapshots or export metadata; test restore to staging"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Disaster recovery","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Promote standby provider; re-point VAULT_URL; verify policies and mounts"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Access control setup","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Least-privilege policies per mount and app; rotate provider creds regularly"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Verification"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Health endpoints OK, metrics present, audit events seen in Kafka"}),"\n",(0,i.jsx)(s.li,{children:"Sample cURL reads/writes succeed and match policy"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Version lifecycle"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Soft delete \u2192 undelete; destroy versions only with approval and evidence capture"}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);