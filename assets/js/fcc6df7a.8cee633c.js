"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[1443],{13235:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"services/bff/reference/health-metrics","title":"Health and metrics","description":"Purpose: operator endpoints for liveness/readiness and Prometheus metrics.","source":"@site/docs/services/bff/reference/health-metrics.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/health-metrics","permalink":"/empowernow_docs/docs/services/bff/reference/health-metrics","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/health-metrics.md","tags":[{"inline":true,"label":"service:bff","permalink":"/empowernow_docs/docs/tags/service-bff"},{"inline":true,"label":"type:reference","permalink":"/empowernow_docs/docs/tags/type-reference"},{"inline":true,"label":"roles:devops","permalink":"/empowernow_docs/docs/tags/roles-devops"}],"version":"current","frontMatter":{"id":"health-metrics","title":"Health and metrics","sidebar_label":"Health / Metrics","tags":["service:bff","type:reference","roles:devops"]},"sidebar":"tutorialSidebar","previous":{"title":"Frontend Errors and UX Patterns (401/403)","permalink":"/empowernow_docs/docs/services/bff/reference/frontend-errors"},"next":{"title":"IdP admin proxy","permalink":"/empowernow_docs/docs/services/bff/reference/idp-admin-proxy"}}');var t=r(74848),i=r(28453);const c={id:"health-metrics",title:"Health and metrics",sidebar_label:"Health / Metrics",tags:["service:bff","type:reference","roles:devops"]},o=void 0,l={},d=[];function a(e){const s={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"Purpose: operator endpoints for liveness/readiness and Prometheus metrics."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Code: ",(0,t.jsx)(s.code,{children:"ms_bff_spike/ms_bff/src/metrics/__init__.py"}),", ",(0,t.jsx)(s.code,{children:"ms_bff_spike/ms_bff/src/api/v1/health.py"})," (mounted in ",(0,t.jsx)(s.code,{children:"api.v1.api"}),")"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Endpoints"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["GET ",(0,t.jsx)(s.code,{children:"/api/v1/metrics"})," (Prometheus format)"]}),"\n",(0,t.jsxs)(s.li,{children:["GET ",(0,t.jsx)(s.code,{children:"/api/v1/health"})," (overall; includes Redis summary)"]}),"\n",(0,t.jsxs)(s.li,{children:["GET ",(0,t.jsx)(s.code,{children:"/api/v1/health/redis"})]}),"\n",(0,t.jsxs)(s.li,{children:["GET ",(0,t.jsx)(s.code,{children:"/api/v1/health/ready"})," (503 when Redis unhealthy)"]}),"\n",(0,t.jsxs)(s.li,{children:["GET ",(0,t.jsx)(s.code,{children:"/api/v1/health/live"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Examples"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -s https://.../api/v1/metrics | head -n 20\r\ncurl -s https://.../api/v1/health | jq .\n"})}),"\n",(0,t.jsx)(s.p,{children:"SLO hints"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["p95 ",(0,t.jsx)(s.code,{children:"/auth/verify"})," < 5ms; PDP p95 < 100ms; 5xx rate < 0.1%"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["See also: ",(0,t.jsx)(s.code,{children:"../how-to/alerting-cookbook"}),", ",(0,t.jsx)(s.code,{children:"../how-to/health-readiness"}),", ",(0,t.jsx)(s.code,{children:"./observability"})]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>c,x:()=>o});var n=r(96540);const t={},i=n.createContext(t);function c(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);