"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[9088],{28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var t=r(96540);const i={},s=t.createContext(i);function c(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:n},e.children)}},31487:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"services/nowconnect/reference/pki-guidance","title":"pki-guidance","description":"PKI Guidance for NowConnect","source":"@site/docs/services/nowconnect/reference/pki-guidance.md","sourceDirName":"services/nowconnect/reference","slug":"/services/nowconnect/reference/pki-guidance","permalink":"/empowernow_docs/docs/services/nowconnect/reference/pki-guidance","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/nowconnect/reference/pki-guidance.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Perf results (sample)","permalink":"/empowernow_docs/docs/services/nowconnect/reference/perf-nowconnect-report"},"next":{"title":"ports-and-protocols","permalink":"/empowernow_docs/docs/services/nowconnect/reference/ports-and-protocols"}}');var i=r(74848),s=r(28453);const c={},o=void 0,a={},d=[{value:"PKI Guidance for NowConnect",id:"pki-guidance-for-nowconnect",level:2},{value:"CA hierarchy and trust",id:"ca-hierarchy-and-trust",level:3},{value:"Certificate content",id:"certificate-content",level:3},{value:"Rotation sequencing (mesh)",id:"rotation-sequencing-mesh",level:3},{value:"Revocation strategy",id:"revocation-strategy",level:3},{value:"SAN allowlist and validation",id:"san-allowlist-and-validation",level:3},{value:"Alerts and monitoring",id:"alerts-and-monitoring",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"pki-guidance-for-nowconnect",children:"PKI Guidance for NowConnect"}),"\n",(0,i.jsx)(n.p,{children:"This page covers CA hierarchy, certificate content (SANs), issuance, rotation sequencing, and revocation strategies for NowConnect mesh and optional agent mTLS at ingress."}),"\n",(0,i.jsx)(n.h3,{id:"ca-hierarchy-and-trust",children:"CA hierarchy and trust"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Use"}),(0,i.jsx)(n.th,{children:"Recommended CA"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:["Mesh ",(0,i.jsx)(n.code,{children:"/mesh"})," mTLS"]}),(0,i.jsx)(n.td,{children:"Private enterprise CA (intermediate) dedicated to mesh"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Agent mTLS (optional at ingress)"}),(0,i.jsx)(n.td,{children:"Same enterprise CA or a separate profile"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Avoid using public CAs for internal mesh links."}),"\n",(0,i.jsx)(n.h3,{id:"certificate-content",children:"Certificate content"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SANs must include DNS names used in ",(0,i.jsx)(n.code,{children:"ha.mesh.peers"})," (e.g., ",(0,i.jsx)(n.code,{children:"cloud-a.example.com"}),"). Modern clients ignore CN for name checks."]}),"\n",(0,i.jsxs)(n.li,{children:["Key usage: ",(0,i.jsx)(n.code,{children:"Digital Signature"}),"; Extended Key Usage: ",(0,i.jsx)(n.code,{children:"TLS Web Client Authentication"})," for client, ",(0,i.jsx)(n.code,{children:"TLS Web Server Authentication"})," for server as applicable."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rotation-sequencing-mesh",children:"Rotation sequencing (mesh)"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\r\n  participant CA as CA/PKI\r\n  participant ING as Ingress\r\n  participant HUB as Cloud Hubs\r\n\r\n  CA->>ING: Issue new server cert (SAN includes mesh host)\r\n  ING->>ING: Deploy new cert+key; keep old CA trusted\r\n  CA->>HUB: Issue new client certs per hub\r\n  HUB->>HUB: Deploy new client certs + updated CA bundle\r\n  ING->>HUB: Allow both old/new during overlap\r\n  Note over ING,HUB: Verify `/mesh` reconnect succeeds using new material\r\n  ING->>ING: Remove old server cert after overlap window\r\n  HUB->>HUB: Remove old client certs after overlap window"}),"\n",(0,i.jsx)(n.h3,{id:"revocation-strategy",children:"Revocation strategy"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prefer short-lived certificates and rotation over CRL/OCSP complexity."}),"\n",(0,i.jsx)(n.li,{children:"If revocation is required, use OCSP stapling at ingress and restrict trust to a narrow intermediate."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"san-allowlist-and-validation",children:"SAN allowlist and validation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep peer endpoints tight; avoid wildcard SANs. Monitor for unexpected SANs issued under the mesh CA."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"alerts-and-monitoring",children:"Alerts and monitoring"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cert expiry alerts (see HA architecture page). Track TLS errors and reconnects as early indicators."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);