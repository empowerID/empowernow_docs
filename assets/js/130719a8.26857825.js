"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[5677],{2847:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"website_copy/product_pdp","title":"Product \u2014 PDP: AuthZEN + Membership PIP","description":"Overview","source":"@site/docs/website_copy/product_pdp.md","sourceDirName":"website_copy","slug":"/website_copy/product_pdp","permalink":"/empowernow_docs/docs/website_copy/product_pdp","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/website_copy/product_pdp.md","tags":[],"version":"current","frontMatter":{}}');var t=n(74848),r=n(28453);const c={},o="Product \u2014 PDP: AuthZEN + Membership PIP",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Membership\u2011powered constraints (PIP)",id:"membershippowered-constraints-pip",level:2},{value:"Merge model (most\u2011restrictive)",id:"merge-model-mostrestrictive",level:2},{value:"Operator pack (policy conditions)",id:"operator-pack-policy-conditions",level:2},{value:"Example request/response (shape)",id:"example-requestresponse-shape",level:2},{value:"Why this matters",id:"why-this-matters",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"product--pdp-authzen--membership-pip",children:"Product \u2014 PDP: AuthZEN + Membership PIP"})}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(s.p,{children:"The EmpowerNow PDP implements the OpenID Authorization API (AuthZEN) evaluation contract and returns a decision with first\u2011class constraints and obligations:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Endpoints: ",(0,t.jsx)(s.code,{children:"POST /access/v1/evaluation"}),", ",(0,t.jsx)(s.code,{children:"POST /access/v1/evaluations"})," (batch)"]}),"\n",(0,t.jsxs)(s.li,{children:["Response (rich): ",(0,t.jsx)(s.code,{children:"{ decision, context: { constraints, obligations, decision_id, policy_version, constraints_schema, ttl_ms } }"})]}),"\n",(0,t.jsxs)(s.li,{children:["App scoping: policies resolve by ",(0,t.jsx)(s.code,{children:"resource.properties.pdp_application"})]}),"\n",(0,t.jsx)(s.li,{children:"Performance: short TTL decision cache for hot paths"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"membershippowered-constraints-pip",children:"Membership\u2011powered constraints (PIP)"}),"\n",(0,t.jsx)(s.p,{children:"At evaluation time, the PDP queries the Membership service (Neo4j) to enrich decisions with authoritative context:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"data_scope"})," \u2014 tenant_ids and ",(0,t.jsx)(s.code,{children:"row_filter_sql"})," for row\u2011level governance"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"step_up"})," \u2014 MFA hints (e.g., ",(0,t.jsx)(s.code,{children:'{ mfa_required: true, level: "strong" }'}),")"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"identity_chain"})," \u2014 allow\u2011listed audiences/scopes and TTL caps for identity chaining"]}),"\n",(0,t.jsx)(s.li,{children:"Capability check \u2014 verifies the agent\u2019s requested capability (user+agent pairing)"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This approach produces constraints that are consistent, explainable, and centrally governed."}),"\n",(0,t.jsx)(s.h2,{id:"merge-model-mostrestrictive",children:"Merge model (most\u2011restrictive)"}),"\n",(0,t.jsx)(s.p,{children:"The PDP normalizes policy inputs and merges constraints conservatively:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Intersection: ",(0,t.jsx)(s.code,{children:"model.allow"}),", ",(0,t.jsx)(s.code,{children:"egress.allow"}),", ",(0,t.jsx)(s.code,{children:"params.allowlist"})]}),"\n",(0,t.jsxs)(s.li,{children:["Minimum: ",(0,t.jsx)(s.code,{children:"tokens.max_input"}),", ",(0,t.jsx)(s.code,{children:"tokens.max_output"}),", ",(0,t.jsx)(s.code,{children:"tokens.max_stream"}),", ",(0,t.jsx)(s.code,{children:"spend.max_cents"}),", ",(0,t.jsx)(s.code,{children:"identity_chain.max_token_ttl_seconds"})]}),"\n",(0,t.jsxs)(s.li,{children:["Logical AND: ",(0,t.jsx)(s.code,{children:"step_up.mfa_required"})," (conservative), booleans"]}),"\n",(0,t.jsxs)(s.li,{children:["SQL AND composition: ",(0,t.jsx)(s.code,{children:"data_scope.row_filter_sql"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Obligations merge by presence/union: ",(0,t.jsx)(s.code,{children:"emit_receipt"})," is idempotent; attributes (e.g., ",(0,t.jsx)(s.code,{children:"tee_analytics.include"}),") unify conservatively."]}),"\n",(0,t.jsx)(s.h2,{id:"operator-pack-policy-conditions",children:"Operator pack (policy conditions)"}),"\n",(0,t.jsx)(s.p,{children:"The PDP includes deterministic helpers suitable for content/URL checks and network gating:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"url_host_in(url, allowlist)"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"domain_allow(host, patterns)"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"cidr_match(ip, cidr)"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"content_has_phrase(text, phrases)"})}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"example-requestresponse-shape",children:"Example request/response (shape)"}),"\n",(0,t.jsx)(s.p,{children:"Request (shape):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\r\n  "subject": {"type": "agent", "id": "agent:svc-123:for:pairwise", "properties": {"bound_user": "user:pairwise"}},\r\n  "action": {"name": "execute"},\r\n  "resource": {"type": "tool", "id": "mcp:flights:search", "properties": {"pdp_application": "aria-gateway", "schema_hash": "sha256:..."}},\r\n  "context": {"capability": "mcp:flights:search", "budget_remaining": 42.0}\r\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"Response (shape):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\r\n  "decision": true,\r\n  "context": {\r\n    "constraints": {\r\n      "tokens": {"max_input": 6000, "max_output": 1500, "max_stream": 4096},\r\n      "egress": {"allow": ["tools.example.com:443"]},\r\n      "params": {"allowlist": {"amount": ["^\\\\d+(\\\\.\\\\d{1,2})?$"]}},\r\n      "data_scope": {"tenant_ids": ["acme"], "row_filter_sql": "tenant_id=\'acme\'"},\r\n      "step_up": {"mfa_required": false},\r\n      "identity_chain": {"allowed_audiences": ["https://graph.microsoft.com"], "allowed_scopes": ["User.Read"], "max_token_ttl_seconds": 300}\r\n    },\r\n    "obligations": [{"id": "emit_receipt"}, {"id": "tee_analytics", "attributes": {"include": ["usage", "limits"]}}],\r\n    "decision_id": "...",\r\n    "policy_version": "...",\r\n    "constraints_schema": "aria.constraints.v1",\r\n    "ttl_ms": 1500\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"why-this-matters",children:"Why this matters"}),"\n",(0,t.jsx)(s.p,{children:"AuthZEN gives you a standard, future\u2011proof PEP\u2194PDP contract. The Membership PIP ensures decisions carry live, graph\u2011derived context (tenancy, MFA, chaining), and the merge model keeps effective constraints conservative across policy layers."}),"\n",(0,t.jsx)(s.p,{children:"CTAs: View evaluation examples \xb7 See Membership PIP \xb7 Read the operator/merge guide"})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>o});var i=n(96540);const t={},r=i.createContext(t);function c(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);