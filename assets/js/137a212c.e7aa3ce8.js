"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[2857],{28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var s=r(96540);const i={},c=s.createContext(i);function o(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(c.Provider,{value:n},e.children)}},39450:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"services/crud-service/reference/connectors/azure-connector-overview","title":"Azure (Microsoft Graph) connector \u2013 reliability, scalability, admin depth","description":"Overview of the upgraded Azure connector: resiliency, observability, standardized responses, new admin commands, configuration, and examples.","source":"@site/docs/services/crud-service/reference/connectors/azure-connector-overview.md","sourceDirName":"services/crud-service/reference/connectors","slug":"/services/crud-service/reference/connectors/azure-connector-overview","permalink":"/empowernow_docs/docs/services/crud-service/reference/connectors/azure-connector-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/crud-service/reference/connectors/azure-connector-overview.md","tags":[],"version":"current","frontMatter":{"id":"azure-connector-overview","title":"Azure (Microsoft Graph) connector \u2013 reliability, scalability, admin depth","description":"Overview of the upgraded Azure connector: resiliency, observability, standardized responses, new admin commands, configuration, and examples.","sidebar_label":"Azure connector overview"},"sidebar":"tutorialSidebar","previous":{"title":"Azure connector guide","permalink":"/empowernow_docs/docs/services/crud-service/reference/connectors/azure-connector-guide"},"next":{"title":"Entra ID admin commands","permalink":"/empowernow_docs/docs/services/crud-service/reference/connectors/entra-admin-coverage"}}');var i=r(74848),c=r(28453);const o={id:"azure-connector-overview",title:"Azure (Microsoft Graph) connector \u2013 reliability, scalability, admin depth",description:"Overview of the upgraded Azure connector: resiliency, observability, standardized responses, new admin commands, configuration, and examples.",sidebar_label:"Azure connector overview"},t=void 0,l={},d=[{value:"Overview",id:"overview",level:2},{value:"Key improvements",id:"key-improvements",level:2},{value:"New/expanded admin capabilities (system YAMLs)",id:"newexpanded-admin-capabilities-system-yamls",level:2},{value:"Behavior changes and standardization",id:"behavior-changes-and-standardization",level:2},{value:"Configuration (connection-level)",id:"configuration-connection-level",level:2},{value:"Batch API usage",id:"batch-api-usage",level:2},{value:"Gov cloud considerations",id:"gov-cloud-considerations",level:2},{value:"Testing (highlights)",id:"testing-highlights",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"We upgraded the Azure (Microsoft Graph) connector for reliability, scalability, and admin depth, and standardized its outputs with AD/LDAP. This page summarizes changes, new capabilities, configuration, and examples."}),"\n",(0,i.jsx)(n.h2,{id:"key-improvements",children:"Key improvements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Resilience and performance","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Keyed global rate limiting per scope (for example, base_url/tenant) via ",(0,i.jsx)(n.code,{children:"max_concurrent_requests"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Centralized retry/backoff with jitter; honors ",(0,i.jsx)(n.code,{children:"Retry-After"})," in seconds, milliseconds, and HTTP-date."]}),"\n",(0,i.jsx)(n.li,{children:"Granular httpx timeouts (connect/read/write/pool) instead of a single timeout."}),"\n",(0,i.jsxs)(n.li,{children:["Streaming pagination helper and automatic page following when needed; preserves ",(0,i.jsx)(n.code,{children:"@odata.deltaLink"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Batch API wrapper with standardized responses and rate limiting."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Observability","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Optional request/response logging with masking; configurable detail level."}),"\n",(0,i.jsx)(n.li,{children:"OpenTelemetry span for page collection."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Consistency","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Standardized connector response shape across Azure/AD/LDAP."}),"\n",(0,i.jsxs)(n.li,{children:["Unified error propagation from the HTTP layer (includes response headers for ",(0,i.jsx)(n.code,{children:"Retry-After"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"newexpanded-admin-capabilities-system-yamls",children:"New/expanded admin capabilities (system YAMLs)"}),"\n",(0,i.jsxs)(n.p,{children:["See detailed coverage: ",(0,i.jsx)(n.code,{children:"services/crud-service/reference/connectors/entra-admin-coverage"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Users: revoke sessions; auth methods list/delete; manager operations; direct reports; transitive memberships; member groups; user photo."}),"\n",(0,i.jsxs)(n.li,{children:["Groups: ",(0,i.jsx)(n.code,{children:"groups/delta"}),", transitive members/memberOf, ",(0,i.jsx)(n.code,{children:"getMemberGroups"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Applications and Service Principals: owners add/remove; credentials add/remove; service principal password add."}),"\n",(0,i.jsx)(n.li,{children:"Administrative Units and Roles: AU membership; AU-scoped role assignments; directory role assignments/definitions."}),"\n",(0,i.jsxs)(n.li,{children:["Directory Objects: bulk ",(0,i.jsx)(n.code,{children:"getByIds"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Devices: enable/disable; owners list/add/remove; user-owned/registered devices."}),"\n",(0,i.jsx)(n.li,{children:"B2B invitations: create invitations."}),"\n",(0,i.jsx)(n.li,{children:"Batch API: submit multiple Graph calls in one HTTP request."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"behavior-changes-and-standardization",children:"Behavior changes and standardization"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Standard response shape (envelope) for all connectors:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "response": {\r\n    "success": true,\r\n    "data": {},\r\n    "meta": {}\r\n  }\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Retries"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The HTTP layer can be run in \u201cno-retry\u201d mode; the Azure wrapper performs retries to avoid double retry."}),"\n",(0,i.jsxs)(n.li,{children:["Honors ",(0,i.jsx)(n.code,{children:"Retry-After"})," (seconds, -ms, or HTTP-date), throttling appropriately."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Concurrency"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"max_concurrent_requests"})," applies per scope (for example, per base_url/tenant), preventing cross-tenant contention."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Pagination"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Helper provides streaming iteration and/or automatic collection; preserves ",(0,i.jsx)(n.code,{children:"@odata.deltaLink"})," for resyncs."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-connection-level",children:"Configuration (connection-level)"}),"\n",(0,i.jsxs)(n.p,{children:["Add these under the Azure system\u2019s ",(0,i.jsx)(n.code,{children:"connection"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Rate limiting","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"max_concurrent_requests"})," (int, default 4): concurrency per scope."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Retries","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retry.max_attempts"})," (int, default 3)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retry.backoff_base"})," (float seconds, default 0.1)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retry.backoff_factor"})," (float, default 2.0)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retry.jitter"})," (float seconds, default 0.1)"]}),"\n",(0,i.jsxs)(n.li,{children:["Honors ",(0,i.jsx)(n.code,{children:"Retry-After"})," headers automatically."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Timeouts (httpx.Timeout)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timeouts.connect"})," (float seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timeouts.read"})," (float seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timeouts.write"})," (float seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timeouts.pool"})," (float seconds)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Logging (optional)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logging.enabled"})," (bool)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logging.request"})," (bool)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logging.response"})," (bool)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logging.auth"})," (bool)  // masked"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logging.format"}),' ("basic" | "detailed")']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'connection:\r\n  auth_type: azure\r\n  credentials:\r\n    client_id: ${{ENV:...}}\r\n    client_secret: ${{ENV:...}}\r\n    tenant_id: ${{ENV:...}}\r\n    resource: "https://graph.microsoft.com/"\r\n    grant_type: "client_credentials"\r\n  base_url: "https://graph.microsoft.com/v1.0"\r\n  max_concurrent_requests: 6\r\n  retry:\r\n    max_attempts: 4\r\n    backoff_base: 0.2\r\n    backoff_factor: 2.0\r\n    jitter: 0.1\r\n  timeouts:\r\n    connect: 2.0\r\n    read: 20.0\r\n    write: 10.0\r\n    pool: 2.0\r\n  logging:\r\n    enabled: true\r\n    request: true\r\n    response: false\r\n    auth: false\r\n    format: detailed\n'})}),"\n",(0,i.jsx)(n.h2,{id:"batch-api-usage",children:"Batch API usage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Command (in Azure YAMLs); see detailed examples: ",(0,i.jsx)(n.code,{children:"services/crud-service/reference/connectors/entra-graph-batch-examples"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'graph:\r\n  schema_mapping: graph_misc\r\n  commands:\r\n    batch:\r\n      endpoint: "/$batch"\r\n      method: POST\r\n      headers:\r\n        Content-Type: "application/json"\r\n      body:\r\n        requests: "{{ params.requests | tojson }} asjsonobject"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"gov-cloud-considerations",children:"Gov cloud considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:'base_url: "https://graph.microsoft.us/v1.0"'})," and ",(0,i.jsx)(n.code,{children:'resource: "https://graph.microsoft.us/"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Owner ",(0,i.jsx)(n.code,{children:"$ref"})," bodies must use the US domain; tests validate this."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"testing-highlights",children:"Testing (highlights)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Unit tests validate:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Retry/backoff and ",(0,i.jsx)(n.code,{children:"Retry-After"})," handling"]}),"\n",(0,i.jsx)(n.li,{children:"Keyed rate limiting"}),"\n",(0,i.jsx)(n.li,{children:"Timeout construction"}),"\n",(0,i.jsx)(n.li,{children:"Streaming pagination"}),"\n",(0,i.jsx)(n.li,{children:"Batch API"}),"\n",(0,i.jsx)(n.li,{children:"Admin command URLs and bodies (users, groups, apps/SPs, AUs, directoryObjects, devices, invitations)"}),"\n",(0,i.jsxs)(n.li,{children:["Gov-specific owner ",(0,i.jsx)(n.code,{children:"$ref"})," body host"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"See also:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"services/crud-service/reference/connectors/entra-admin-coverage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"services/crud-service/reference/connectors/entra-graph-batch-examples"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);