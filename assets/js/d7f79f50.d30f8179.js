"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[6887],{474:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"services/bff/explanation/overview","title":"What a BFF Is (and Isn\'t)","description":"Not Your Typical BFF: in our context, a Backend for Frontend is a dedicated service layer that sits between the SPA and downstream services. It optimizes UX, consolidates security, and prevents tokens from ever reaching the browser.","source":"@site/docs/services/bff/explanation/overview.md","sourceDirName":"services/bff/explanation","slug":"/services/bff/explanation/overview","permalink":"/empowernow_docs/docs/services/bff/explanation/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/explanation/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"What a BFF Is (and Isn\'t)","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Executive overview","permalink":"/empowernow_docs/docs/services/bff/explanation/executive-overview"},"next":{"title":"Authentication Options and Flow","permalink":"/empowernow_docs/docs/services/bff/explanation/authentication"}}');var s=i(74848),t=i(28453);const o={title:"What a BFF Is (and Isn't)",sidebar_position:1},a=void 0,c={},d=[];function l(e){const n={code:"code",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Not Your Typical BFF: in our context, a Backend for Frontend is a dedicated service layer that sits between the SPA and downstream services. It optimizes UX, consolidates security, and prevents tokens from ever reaching the browser."}),"\n",(0,s.jsx)(n.p,{children:"Executive summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Single, secure session cookie for the browser"}),"\n",(0,s.jsx)(n.li,{children:"Multiple service\u2011specific tokens managed server\u2011side"}),"\n",(0,s.jsx)(n.li,{children:"Zero token exposure to the browser/client"}),"\n",(0,s.jsx)(n.li,{children:"Fine\u2011grained access control per service/route"}),"\n",(0,s.jsxs)(n.li,{children:["Same\u2011origin SPA calls to ",(0,s.jsx)(n.code,{children:"/api/**"}),"; edge performs ForwardAuth"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"What it is"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An edge\u2011adjacent web service that owns login, callback, session verification, and logout"}),"\n",(0,s.jsxs)(n.li,{children:["A security boundary that validates sessions at the edge (Traefik ForwardAuth \u2192 ",(0,s.jsx)(n.code,{children:"/auth/verify"})," or ",(0,s.jsx)(n.code,{children:"/auth/forward"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"A server\u2011side token broker: obtains/refreshes per\u2011service tokens and injects only required headers to backend services"}),"\n",(0,s.jsx)(n.li,{children:"A simplifier for frontends: SPA uses cookie\u2011based session and CSRF token, no OAuth dance in the browser"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"What it is not"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Not a generic API Gateway replacement for east\u2011west traffic"}),"\n",(0,s.jsx)(n.li,{children:"Not a place to expose OAuth/DPoP/PKCE artifacts to the browser"}),"\n",(0,s.jsx)(n.li,{children:"Not a monolith; it orchestrates, it does not absorb all domain logic"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When to use it"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multiple SPAs need consistent login/session handling and secure same\u2011origin API access"}),"\n",(0,s.jsx)(n.li,{children:"You require strict control against token theft and browser exposure"}),"\n",(0,s.jsx)(n.li,{children:"Per\u2011service authorization differs (audiences/scopes) and must be enforced centrally"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When not to use it"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pure machine\u2011to\u2011machine traffic without a browser client"}),"\n",(0,s.jsx)(n.li,{children:"A single UI directly coupled to a single backend where an API gateway already enforces all concerns"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Verified request model"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\r\n  autonumber\r\n  participant SPA as SPA (same-origin)\r\n  participant Traefik as Traefik (Edge)\r\n  participant BFF as BFF\r\n  participant Services as Backend Services\r\n  SPA->>Traefik: GET /api/...\r\n  Traefik->>BFF: ForwardAuth /auth/verify (Cookie)\r\n  alt session valid\r\n    BFF--\x3e>Traefik: 200 + identity headers\r\n    Traefik--\x3e>SPA: 200 JSON (proxied to service)\r\n  else not authenticated\r\n    BFF--\x3e>Traefik: 401\r\n    Traefik--\x3e>SPA: 401 \u2192 SPA navigates to /auth/login\r\n  end"}),"\n",(0,s.jsx)(n.p,{children:"EmpowerNow specifics (code\u2011verified)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Endpoints: ",(0,s.jsx)(n.code,{children:"/auth/login"}),", ",(0,s.jsx)(n.code,{children:"/auth/callback"}),", ",(0,s.jsx)(n.code,{children:"/auth/verify"})," (alias ",(0,s.jsx)(n.code,{children:"/auth/forward"}),"), ",(0,s.jsx)(n.code,{children:"/auth/logout"}),", ",(0,s.jsx)(n.code,{children:"/api/auth/session"}),", ",(0,s.jsx)(n.code,{children:"/auth/health"})]}),"\n",(0,s.jsxs)(n.li,{children:["Cookie: ",(0,s.jsx)(n.code,{children:"bff_session"})," (HttpOnly, Secure, SameSite=Lax, domain per env)"]}),"\n",(0,s.jsx)(n.li,{children:"Edge: Traefik ForwardAuth configured to call BFF; response/request headers include identity/session info"}),"\n",(0,s.jsx)(n.li,{children:"Tokens: acquired server\u2011side, per\u2011service; never stored in or exposed to the browser"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(96540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);