"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[9749],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(96540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}},53661:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"services/experience/ops-runbook","title":"Plugins Ops Runbook","description":"Quarantine, refresh, allow-list triage, integrity checks, and headers to monitor for Experience plugins.","source":"@site/docs/services/experience/ops-runbook.md","sourceDirName":"services/experience","slug":"/services/experience/ops-runbook","permalink":"/empowernow_docs/docs/services/experience/ops-runbook","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/experience/ops-runbook.md","tags":[],"version":"current","frontMatter":{"title":"Plugins Ops Runbook","sidebar_label":"Plugins Ops Runbook","description":"Quarantine, refresh, allow-list triage, integrity checks, and headers to monitor for Experience plugins."},"sidebar":"tutorialSidebar","previous":{"title":"Monitoring & Alerts","permalink":"/empowernow_docs/docs/services/experience/monitoring-alerts"},"next":{"title":"React App (Spec)","permalink":"/empowernow_docs/docs/services/experience/overview"}}');var r=i(74848),o=i(28453);const l={title:"Plugins Ops Runbook",sidebar_label:"Plugins Ops Runbook",description:"Quarantine, refresh, allow-list triage, integrity checks, and headers to monitor for Experience plugins."},t=void 0,c={},d=[{value:"Quarantine (kill switch)",id:"quarantine-kill-switch",level:2},{value:"Refresh manifests",id:"refresh-manifests",level:2},{value:"Allow-list triage",id:"allow-list-triage",level:2},{value:"Integrity checks (optional)",id:"integrity-checks-optional",level:2},{value:"Headers to monitor",id:"headers-to-monitor",level:2},{value:"QA additions",id:"qa-additions",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"quarantine-kill-switch",children:"Quarantine (kill switch)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Block serving and use immediately:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"POST /api/plugins/quarantine/{id}"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"POST /api/plugins/unquarantine/{id}"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Expect header ",(0,r.jsx)(n.code,{children:"X-Plugin-Quarantined: 1"})," when blocked"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"refresh-manifests",children:"Refresh manifests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/plugins/refresh"})," reloads ",(0,r.jsx)(n.code,{children:"plugins.yaml"})," without container rebuilds"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"allow-list-triage",children:"Allow-list triage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Violations: 403 with ",(0,r.jsx)(n.code,{children:"X-Allowlist-Violation: 1"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ensure SDK stamps ",(0,r.jsx)(n.code,{children:"X-Plugin-Id"}),"; check method+path template in ",(0,r.jsx)(n.code,{children:"plugins.yaml"})]}),"\n",(0,r.jsxs)(n.li,{children:["SSE prefixes must be declared under ",(0,r.jsx)(n.code,{children:"permissions.sse"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integrity-checks-optional",children:"Integrity checks (optional)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Configure ",(0,r.jsx)(n.code,{children:"bundle.integrity: sha256:<hex>"})," in ",(0,r.jsx)(n.code,{children:"plugins.yaml"})]}),"\n",(0,r.jsxs)(n.li,{children:["Mismatch: 409 with ",(0,r.jsx)(n.code,{children:"X-Integrity-Error: 1"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"headers-to-monitor",children:"Headers to monitor"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Vary: Cookie, X-Plugin-Id"})," on manifests/bundles"]}),"\n",(0,r.jsxs)(n.li,{children:["Bundle response headers: ",(0,r.jsx)(n.code,{children:"Content-Type"}),", ",(0,r.jsx)(n.code,{children:"ETag"}),", ",(0,r.jsx)(n.code,{children:"Cache-Control"}),", ",(0,r.jsx)(n.code,{children:"X-Content-Type-Options"}),", ",(0,r.jsx)(n.code,{children:"Cross-Origin-Resource-Policy"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"qa-additions",children:"QA additions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add smoke tests asserting allow-list violation and quarantine headers"}),"\n",(0,r.jsx)(n.li,{children:"Verify canonical PDP subject shape (account ARN) in AuthZEN requests"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See also: Canonical plugin reference ",(0,r.jsx)(n.code,{children:"./experience_plugins"}),", Storage & Deployment ",(0,r.jsx)(n.code,{children:"./plugins-storage-deployment"}),", BFF routing ",(0,r.jsx)(n.code,{children:"../bff/devops/experience_routing"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);