"use strict";(self.webpackChunkempowernow_docs=self.webpackChunkempowernow_docs||[]).push([[173],{14050:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"services/bff/reference/routes-reference","title":"routes-reference","description":"Budgets","source":"@site/docs/services/bff/reference/routes-reference.md","sourceDirName":"services/bff/reference","slug":"/services/bff/reference/routes-reference","permalink":"/empowernow_docs/docs/services/bff/reference/routes-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/bff/reference/routes-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"QA \u2014 Troubleshooting Checklist","permalink":"/empowernow_docs/docs/services/bff/reference/qa-troubleshooting"},"next":{"title":"Session Binding and CSRF (Verified)","permalink":"/empowernow_docs/docs/services/bff/reference/session-binding-csrf"}}');var c=r(74848),t=r(28453);const i={},d=void 0,o={},l=[{value:"Budgets",id:"budgets",level:2},{value:"title: routes.yaml Reference",id:"title-routesyaml-reference",level:2}];function a(e){const s={code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h2,{id:"budgets",children:"Budgets"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-yaml",children:'- id: "authzen-effective-budgets"\r\n  path: "/access/v1/budgets/effective"\r\n  target_service: "pdp_service"\r\n  upstream_path: "/access/v1/budgets/effective"\r\n  methods: ["GET", "OPTIONS"]\r\n  auth: "session"\r\n  preserve_path: true\r\n  authz: "none"\n'})}),"\n",(0,c.jsx)(s.hr,{}),"\n",(0,c.jsx)(s.h2,{id:"title-routesyaml-reference",children:"title: routes.yaml Reference"}),"\n",(0,c.jsx)(s.p,{children:"Structure"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"services: container DNS and base URLs for upstreams"}),"\n",(0,c.jsxs)(s.li,{children:["routes[]:","\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"id, description"}),"\n",(0,c.jsxs)(s.li,{children:["path: client path, supports wildcard ",(0,c.jsx)(s.code,{children:"*"})]}),"\n",(0,c.jsx)(s.li,{children:"target_service: key from services"}),"\n",(0,c.jsxs)(s.li,{children:["upstream_path: templated backend path, ",(0,c.jsx)(s.code,{children:"{path}"})," is wildcard capture"]}),"\n",(0,c.jsx)(s.li,{children:"methods: [GET, POST, ...]"}),"\n",(0,c.jsxs)(s.li,{children:["auth: ",(0,c.jsx)(s.code,{children:"session"})," | ",(0,c.jsx)(s.code,{children:"bearer"})," | ",(0,c.jsx)(s.code,{children:"none"})]}),"\n",(0,c.jsx)(s.li,{children:"streaming: boolean (SSE)"}),"\n",(0,c.jsx)(s.li,{children:"preserve_path: boolean"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Mental model"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"path"})," is the SPA\u2019s client path (what your app calls under ",(0,c.jsx)(s.code,{children:"/api/..."}),")."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_path"})," is the backend path the BFF will call; ",(0,c.jsx)(s.code,{children:"{path}"})," captures the wildcard portion."]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Example translation"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-text",children:'Client: GET /api/crud/forms/123\r\nRoute:  path "/api/crud/forms/*"  \u2192  upstream_path "/forms/{path}" (target_service: crud_service)\r\nBFF:    GET http://crud_service/forms/123\n'})}),"\n",(0,c.jsx)(s.p,{children:"Auth semantics"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"session: cookie\u2011based session check, headers injected to backend"}),"\n",(0,c.jsx)(s.li,{children:"bearer: pass/validate bearer token per idps/audience"}),"\n",(0,c.jsx)(s.li,{children:"none: public endpoint (e.g., health, OIDC discovery)"}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Canonical prefixes"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:["CRUD APIs are exposed under ",(0,c.jsx)(s.code,{children:"/api/crud/**"})]}),"\n",(0,c.jsxs)(s.li,{children:["AuthZEN preserved paths are proxied as-is: ",(0,c.jsx)(s.code,{children:"/access/v1/evaluation"})," and ",(0,c.jsx)(s.code,{children:"/access/v1/evaluations"})," (paths preserved to PDP)"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>d});var n=r(96540);const c={},t=n.createContext(c);function i(e){const s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);